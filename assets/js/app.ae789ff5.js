(function(){"use strict";var e={1868:function(e,t,a){a.d(t,{U:function(){return i}});var r=a(4291),o="production",l="prod",n={dev:{api:"",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},test:{api:"",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},prod:{api:"",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},apikaifa:"https://stp.haier.net/mock/290"};"development"===o&&(n={dev:{api:"/apidev",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},test:{api:"/apitest",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},prod:{api:"/apiprod",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},apikaifa:"https://stp.haier.net/mock/290"});n[l];var i=function(e,t,a,o){return"get"===e.toLowerCase()?r.iotAxios.get(n[l].api+t,{params:a},o).catch((function(e){e.status})):r.iotAxios.post(n[l].api+t,a,o).catch((function(e){e.status}))}},719:function(e,t,a){a.d(t,{K3:function(){return l},kq:function(){return r},nk:function(){return o},yo:function(){return n}});var r="zoom",o="fullScreen",l="save",n="disabled"},5991:function(e,t,a){a.d(t,{B:function(){return g},U:function(){return f}});var r=a(3634),o=a(3230),l=a(1186),n=a(3645),i=function(e){e.bindKey(["meta+c","ctrl+c"],(function(){var t=e.getSelectedCells();return t.length&&e.copy(t),!1}))},s=function(e){e.bindKey(["meta+v","ctrl+v"],(function(){if(!e.isClipboardEmpty()){var t=e.paste({offset:32});e.cleanSelection(),e.select(t)}return!1}))},u=function(e){e.bindKey(["meta+x","ctrl+x"],(function(){var t=e.getSelectedCells();return t.length&&e.cut(t),!1}))},c=function(e){e.bindKey(["meta+z","ctrl+z"],(function(){return e.canUndo()&&e.undo(),!1}))},d=function(e){e.bindKey(["meta+shift+z","ctrl+shift+z"],(function(){return e.canRedo()&&e.redo(),!1}))},p=function(e){e.bindKey(["backspace","delete"],(function(){var t=e.getSelectedCells();t.length&&e.removeCells(t)}))},m=a(8711),h=a(4023),v=a(5959),g=function(e){var t=new r.kJ(e);return t.use(new o.H({enabled:!0})),t.use(new m.Y({enabled:!0,multiple:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0})),t.use(new h.T({enabled:!0})),t.use(new n.N({enabled:!0})),t.use(new v.A({enabled:!0})),t.use(new l.D),t},f=function(e,t){t.forEach((function(t){switch(t){case"copy":i(e);break;case"paste":s(e);break;case"cut":u(e);break;case"undo":c(e);break;case"redo":d(e);break;case"delete":p(e);break;default:break}}))}},8917:function(e,t,a){a.d(t,{d:function(){return l},m:function(){return o}});var r=a(4082),o=function(e){var t=new r.q({target:e});return t},l=function(e){var t=e.graph,a=e.dnd,r=e.event,o=e.options,l=e.data,n=t.createNode(o);return n.setData(l),a.start(n,r),n}},6454:function(e,t,a){a.d(t,{Jl:function(){return n},Kg:function(){return u},O:function(){return s},RR:function(){return i},lz:function(){return c},n2:function(){return d}});var r=a(692),o=a(3997),l=a(8503),n=[{className:"设备条件",classCode:"equipment",children:[{description:"设备条件",name:"equipment",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.Iu},port:{templates:[o.gF,o.QX]},attr:{template:l.hP}}]},{className:"定时条件",classCode:"time",children:[]},{className:"天气条件",classCode:"weather",children:[]},{className:"地理围栏条件",classCode:"geofence",children:[]}],i=[{className:"决策点",classCode:"descision",children:[{id:"descision",name:r.Bu,description:"决策节点",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.Bu},port:{templates:[o.gF,o.QX]},attr:{template:l.lG}}]},{className:"逻辑关系",classCode:"relation",children:[{id:"andId",name:"or",description:"并行节点",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.WH},port:{templates:[o.Kc]}},{id:"andId",name:"and",description:"会签节点",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.WH},port:{templates:[o.Kc]}},{id:"serialId",name:"serial",description:"串行节点",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.WH},port:{templates:[o.Kc]}}]}],s=[{className:"决策组",classCode:"descisionGroup",children:[{id:"descisionGroup",name:r.xf,description:"决策组",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.xf},attr:{template:l.AN}}]}],u=[{className:"设备动作",classCode:"equipmentActioin",children:[{id:"prodTypeActionId",name:"prodTypeAction",description:"设备执行",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.Iu},port:{templates:[o.jo]},attr:{template:l.Hd}}]},{className:"消息动作",classCode:"messageGroup",children:[{id:"messageId",name:"messagePush",description:"消息通知",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.Iu},port:{templates:[o.jo]},attr:{template:l._0}}]},{className:"延时动作",classCode:"delayGroup",children:[]}],c=(r.Xn,r.Xn,r.Xn,r.Xn,r.Xn,r.Xn,r.Xn,r.Xn,{className:"网关",classCode:"gateway",children:[{id:"Exclusive",name:r.gn,description:"互斥网关",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.gn},attr:{template:l.Hd}},{id:"Parallel",name:r.gn,description:"并行网关",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.gn}}]}),d={className:"任务",classCode:"gateway",children:[{id:"User",name:r.Xn,description:"人工任务",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.Xn}},{id:"Service",name:r.Xn,description:"服务任务",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.Xn}},{id:"Receive",name:r.Xn,description:"接受任务",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.Xn}},{id:"Service",name:r.Xn,description:"调用活动",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:r.Xn}}]}},14:function(e,t,a){var r=a(8222);function o(e,t){const a=(0,r.resolveComponent)("router-view");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(a)])}var l=a(3744);const n={},i=(0,l.Z)(n,[["render",o]]);var s=i,u=a(655),c=a(2201),d=a(5781),p=function(e){return(0,r.pushScopeId)("data-v-2f96ffc7"),e=e(),(0,r.popScopeId)(),e},m={class:"common-block"},h=p((function(){return(0,r.createElementVNode)("h5",{class:"mb-2"},"haigeek",-1)})),v=p((function(){return(0,r.createElementVNode)("span",null,"场景流程",-1)})),g=p((function(){return(0,r.createElementVNode)("span",null,"决策组",-1)})),f=p((function(){return(0,r.createElementVNode)("span",null,"决策点",-1)})),y=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,c.tv)(),a=(0,c.yj)(),o=function(e,t){console.log(e,t)},l=function(e,t){console.log(e,t)},n=function(e){t.push(e)};return function(e,t){var i=(0,r.resolveComponent)("el-icon"),s=(0,r.resolveComponent)("el-menu-item"),u=(0,r.resolveComponent)("document"),c=(0,r.resolveComponent)("el-menu"),p=(0,r.resolveComponent)("el-col"),y=(0,r.resolveComponent)("el-row"),b=(0,r.resolveComponent)("router-view");return(0,r.openBlock)(),(0,r.createElementBlock)("div",m,[(0,r.withDirectives)((0,r.createVNode)(y,{class:"tac"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{span:24},{default:(0,r.withCtx)((function(){return[h,(0,r.createVNode)(c,{"default-active":"2",class:"el-menu-vertical-demo",onOpen:o,onClose:l,onSelect:n},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{index:"flow-list"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)((0,r.unref)(d.Menu))]})),_:1}),v]})),_:1}),(0,r.createVNode)(s,{index:"descision-group-list"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u)]})),_:1}),g]})),_:1}),(0,r.createVNode)(s,{index:"descision-node-list"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)((0,r.unref)(d.Location))]})),_:1}),f]})),_:1})]})),_:1})]})),_:1})]})),_:1},512),[[r.vShow,!(0,r.unref)(a).meta.hideMenu]]),(0,r.createVNode)(b)])}}});const b=(0,l.Z)(y,[["__scopeId","data-v-2f96ffc7"]]);var k=b,V=["src"],C=(0,r.createElementVNode)("p",{style:{"font-size":"16px",margin:"-5px 0 15px"}},"链接桩配置",-1),N=(0,r.createElementVNode)("p",{style:{"font-size":"16px",margin:"-5px 0 15px"}},"属性配置",-1),S=(0,r.defineComponent)({__name:"configComponent",setup:function(e){var t=this,a=(0,r.ref)("default"),o=(0,r.ref)(),l=(0,r.reactive)({name:"",description:"",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:"",region:"",count:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),n=(0,r.reactive)({name:[{required:!0,message:"Please input 组件名称",trigger:"blur"}],shape:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}]}),i=function(e){return(0,u.mG)(t,void 0,void 0,(function(){return(0,u.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,e.validate((function(e,t){if(console.log(l),e){console.log("submit!");var a={name:l.name,icon:l.icon,description:l.name,shape:{template:l.shape},port:{templates:l.type}},r=JSON.parse(localStorage.getItem("config")||"[]");r.push(a),localStorage.setItem("config",JSON.stringify(r))}else console.log("error submit!",t)}))]:[2];case 1:return t.sent(),[2]}}))}))},s=function(e){e&&e.resetFields()};return function(e,t){var u=(0,r.resolveComponent)("el-input"),c=(0,r.resolveComponent)("el-form-item"),d=(0,r.resolveComponent)("el-option"),p=(0,r.resolveComponent)("el-select"),m=(0,r.resolveComponent)("el-divider"),h=(0,r.resolveComponent)("el-switch"),v=(0,r.resolveComponent)("el-checkbox"),g=(0,r.resolveComponent)("el-checkbox-group"),f=(0,r.resolveComponent)("el-button"),y=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(y,{ref_key:"ruleFormRef",ref:o,model:l,rules:n,"label-width":"120px",class:"demo-ruleForm",size:a.value,"status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"组件名称",prop:"description"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{modelValue:l.description,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.description=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"组件标识",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.name=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"组件图标",prop:"icon"},{default:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("img",{src:l.icon,alt:""},null,8,V)]})),_:1}),(0,r.createVNode)(c,{label:"UI容器",prop:"region"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:l.shape,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.shape=e}),placeholder:"Activity zone"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{label:"基础模板",value:"basic-node"}),(0,r.createVNode)(d,{label:"Zone two",value:"beijing"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(m),C,(0,r.createVNode)(c,{label:"使用模板",prop:"delivery"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(h,{modelValue:l.delivery,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.delivery=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"链接桩模板",prop:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(g,{modelValue:l.type,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(v,{label:"conditionInPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 条件输入节点 ")]})),_:1}),(0,r.createVNode)(v,{label:"conditionOutPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 条件输出节点 ")]})),_:1}),(0,r.createVNode)(v,{label:"actionInPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 动作输入节点 ")]})),_:1}),(0,r.createVNode)(v,{label:"actionOutPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 动作输出节点 ")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),N,(0,r.createVNode)(c,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(f,{type:"primary",onClick:t[5]||(t[5]=function(e){return i(o.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 创建 ")]})),_:1}),(0,r.createVNode)(f,{onClick:t[6]||(t[6]=function(e){return s(o.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Reset")]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])}}});const x=S;var F=x,w=(0,r.createElementVNode)("p",{style:{"font-size":"16px",margin:"-5px 0 15px"}},"连接桩规则配置",-1),B=(0,r.defineComponent)({__name:"portComponent",setup:function(e){var t=this,a=(0,r.ref)("default"),o=(0,r.ref)(),l=(0,r.reactive)({name:"",description:"",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:"",region:"",count:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),n=(0,r.reactive)({name:[{required:!0,message:"Please input 组件名称",trigger:"blur"}],shape:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}]}),i=function(e){return(0,u.mG)(t,void 0,void 0,(function(){return(0,u.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,e.validate((function(e,t){if(console.log(l),e){console.log("submit!");var a={name:l.name,icon:l.icon,description:l.name,shape:{template:l.shape},port:{templates:l.type}},r=JSON.parse(localStorage.getItem("config")||"[]");r.push(a),localStorage.setItem("config",JSON.stringify(r))}else console.log("error submit!",t)}))]:[2];case 1:return t.sent(),[2]}}))}))},s=function(e){e&&e.resetFields()};return function(e,t){var u=(0,r.resolveComponent)("el-input"),c=(0,r.resolveComponent)("el-form-item"),d=(0,r.resolveComponent)("el-option"),p=(0,r.resolveComponent)("el-select"),m=(0,r.resolveComponent)("el-divider"),h=(0,r.resolveComponent)("el-checkbox"),v=(0,r.resolveComponent)("el-checkbox-group"),g=(0,r.resolveComponent)("el-button"),f=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(f,{ref_key:"ruleFormRef",ref:o,model:l,rules:n,"label-width":"120px",class:"demo-ruleForm",size:a.value,"status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"连接桩名称",prop:"description"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{modelValue:l.description,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.description=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"连接桩标识",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.name=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"连接桩位置",prop:"region"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:l.shape,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.shape=e}),placeholder:"Activity zone"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{label:"上",value:"top"}),(0,r.createVNode)(d,{label:"下",value:"bottom"}),(0,r.createVNode)(d,{label:"左",value:"left"}),(0,r.createVNode)(d,{label:"右",value:"right"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"连接桩样式配置",prop:"icon"}),(0,r.createVNode)(m),w,(0,r.createVNode)(c,{label:"链接桩模板",prop:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(v,{modelValue:l.type,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(h,{label:"conditionInPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 条件输入节点 ")]})),_:1}),(0,r.createVNode)(h,{label:"conditionOutPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 条件输出节点 ")]})),_:1}),(0,r.createVNode)(h,{label:"actionInPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 动作输入节点 ")]})),_:1}),(0,r.createVNode)(h,{label:"actionOutPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 动作输出节点 ")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(g,{type:"primary",onClick:t[4]||(t[4]=function(e){return i(o.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 创建 ")]})),_:1}),(0,r.createVNode)(g,{onClick:t[5]||(t[5]=function(e){return s(o.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Reset")]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])}}});const D=B;var A=D,L=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,r.ref)("first"),a=function(e,t){console.log(e,t)};return function(e,o){var l=(0,r.resolveComponent)("el-tab-pane"),n=(0,r.resolveComponent)("el-tabs");return(0,r.openBlock)(),(0,r.createBlock)(n,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=function(e){return t.value=e}),type:"card",class:"demo-tabs",onTabClick:a},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(l,{label:"添加组件",name:"first"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(F)]})),_:1}),(0,r.createVNode)(l,{label:"添加连接桩",name:"second"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(A)]})),_:1}),(0,r.createVNode)(l,{label:"Role",name:"third"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Role")]})),_:1}),(0,r.createVNode)(l,{label:"Task",name:"fourth"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Task")]})),_:1})]})),_:1},8,["modelValue"])}}});const E=L;var T=E,P=a(8917),I=a(5991),q=a(8116),O=a(6941);function M(){var e=(0,r.ref)(),t=(0,r.ref)();return(0,r.onMounted)((function(){e.value=(0,O.j)({templateName:q.ef,container:document.getElementById("container")}),t.value=(0,P.m)(e.value),(0,I.U)(e.value,["copy","paste","cut","undo","redo","delete"])})),{graph:e,dnd:t}}var _=a(3927),J=a(6454),U={class:"material-content"},j=["onMousedown"],R=["src"],H=(0,r.defineComponent)({__name:"materialComponent",props:{graph:null,dnd:null},setup:function(e){var t=e,a=[J.lz,J.n2],o=[];a.forEach((function(e){o.push.apply(o,e.children)})),(0,_.Z)(o);var l=function(e,a){t.graph&&t.dnd&&(0,P.d)({graph:t.graph,dnd:t.dnd,event:e,options:{shape:a.name},data:(0,u.pi)({},a)})},n=(0,r.ref)(["gateway","task"]),i=function(){console.log("world")};return function(e,t){var o=(0,r.resolveComponent)("el-collapse-item"),s=(0,r.resolveComponent)("el-collapse");return(0,r.openBlock)(),(0,r.createElementBlock)("div",U,[(0,r.createVNode)(s,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.value=e}),onChange:i},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a,(function(e){return(0,r.createVNode)(o,{title:e.className,name:e.classCode,key:e.classCode},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.children,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"menu-item",key:e.id,onMousedown:function(t){return l(t,e)}},[(0,r.createElementVNode)("img",{src:e.icon},null,8,R),(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.description),1)],40,j)})),128))]})),_:2},1032,["title","name"])})),64))]})),_:1},8,["modelValue"])])}}});const Z=(0,l.Z)(H,[["__scopeId","data-v-1ec282a1"]]);var Q=Z,G=a(7489),K=a(719),z=a(1803),W={class:"attribute-block"},Y={class:"attribute-title"},X=["src"],$=(0,r.defineComponent)({__name:"index",props:{node:null},setup:function(e){var t=e,a=(0,r.computed)((function(){return o.value.attr?(0,z.E)(o.value.attr):null})),o=(0,r.computed)((function(){return t.node&&t.node.data||{}}));return function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",W,[(0,r.createElementVNode)("div",Y,[(0,r.createElementVNode)("img",{src:(0,r.unref)(o).icon,alt:""},null,8,X),(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(o).description),1)]),(0,r.unref)(a)?((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)((0,r.unref)(a)),(0,r.normalizeProps)((0,r.mergeProps)({key:0},e.$attrs)),null,16)):(0,r.createCommentVNode)("",!0)])}}});const ee=(0,l.Z)($,[["__scopeId","data-v-1ea7eba8"]]);var te=ee,ae=a(1348);function re(e,t){var a=t.name,r=t.query.id,o=!1;if("createDescisionNode"===a){var l=JSON.parse(localStorage.getItem("descisionNode")||"{}");l[r]=e,localStorage.setItem("descisionNode",JSON.stringify(l)),o=!0}if("createDescisionGroup"===a){var n=JSON.parse(localStorage.getItem("descisionGroup")||"{}");n[r]=e,console.log("当前决策组内容是",e),localStorage.setItem("descisionGroup",JSON.stringify(n)),o=!0}if("createFlow"===a){var i=JSON.parse(localStorage.getItem("flow")||"{}");i[r]=e,localStorage.setItem("flow",JSON.stringify(i)),o=!0}o&&(0,ae.z8)({message:"保存成功",type:"success"})}var oe=a(692),le=a(2681),ne=function(e){return(0,r.pushScopeId)("data-v-b09a3fca"),e=e(),(0,r.popScopeId)(),e},ie={class:"home"},se={class:"menu-bar"},ue={class:"canvas-card"},ce=ne((function(){return(0,r.createElementVNode)("div",{id:"container"},null,-1)})),de={class:"attrs-bar"},pe=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,c.yj)(),a=(0,le.kR)(),o=M(),l=o.graph,n=o.dnd,i=(0,r.ref)(),s=(0,r.ref)(),d=function(){l.value&&l.value.removeNode(i.value),i.value=void 0},p=function(e){if(i.value)if(i.value.shape===oe.xf)i.value.attr("text/text",e.descision);else{var t=i.value.getData();i.value.setData((0,u.pi)((0,u.pi)({},t),{attrData:e}))}},m=function(e){console.log("保存的数据是",e),re(e,t,l.value)},h=[K.kq,K.nk,K.K3,K.yo],v=function(e,t){for(var a=0,r=e.length;a<r;a+=1)e[a].style.visibility=t?"visible":"hidden"};return(0,r.onMounted)((function(){l.value&&n.value&&(l.value.on("node:click",(function(e){var t=e.view,a=e.node;s.value&&s.value.classList.remove("active"),s.value=t.container.querySelector(".basic-node")||void 0,s.value&&s.value.classList.add("active"),i.value?i.value!==a?i.value=a:i.value=void 0:i.value=a})),l.value.on("blank:click",(function(){i.value=void 0,s.value&&s.value.classList.remove("active")})),l.value.on("node:mouseenter",(function(){var e=document.getElementById("container"),t=e.querySelectorAll(".x6-port-body");v(t,!0)})),l.value.on("node:mouseleave",(function(){var e=document.getElementById("container"),t=e.querySelectorAll(".x6-port-body");v(t,!1)})))})),function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",ie,[(0,r.createElementVNode)("div",se,[(0,r.createVNode)(Q,{graph:(0,r.unref)(l),dnd:(0,r.unref)(n)},null,8,["graph","dnd"])]),(0,r.createElementVNode)("div",ue,[(0,r.createElementVNode)("header",null,[(0,r.createVNode)(G.Z,{tools:h,graph:(0,r.unref)(l),dnd:(0,r.unref)(n),onSaveData:m},null,8,["graph","dnd"])]),ce,(0,r.createVNode)((0,r.unref)(a))]),(0,r.withDirectives)((0,r.createElementVNode)("div",de,[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(te,{key:(0,r.unref)(i)&&(0,r.unref)(i).id,node:(0,r.unref)(i),onSyncData:p,onDelNode:d},null,8,["node"])),[[r.vShow,(0,r.unref)(i)]])],512),[[r.vShow,(0,r.unref)(i)]])])}}});const me=(0,l.Z)(pe,[["__scopeId","data-v-b09a3fca"]]);var he=me,ve=function(e){return(0,r.pushScopeId)("data-v-06dd2138"),e=e(),(0,r.popScopeId)(),e},ge={class:"rules-block"},fe={class:"common-title"},ye=ve((function(){return(0,r.createElementVNode)("h3",null,"决策列表",-1)})),be=(0,r.defineComponent)({__name:"descisionNode",setup:function(e){var t=(0,c.tv)(),a=(0,r.ref)(JSON.parse(localStorage.getItem("descisionNodeList")||"[]")),o=function(){var e=prompt("请输入决策点名称");e&&(a.value.push({id:"".concat(a.value.length+1),name:e}),localStorage.setItem("descisionNodeList",JSON.stringify(a.value)))},l=function(e){t.push({name:"createDescisionNode",query:{id:e.id,name:e.name}})},n=function(e){t.push({name:"rulesDetail",query:{id:e.id}})};return function(e,t){var i=(0,r.resolveComponent)("el-button"),s=(0,r.resolveComponent)("el-table-column"),u=(0,r.resolveComponent)("el-table");return(0,r.openBlock)(),(0,r.createElementBlock)("div",ge,[(0,r.createElementVNode)("div",fe,[ye,(0,r.createVNode)(i,{onClick:o},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("新建决策点")]})),_:1})]),(0,r.createVNode)(u,{data:a.value,style:{width:"100%"}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{prop:"name",label:"决策点名称",width:"180"}),(0,r.createVNode)(s,{prop:"createTime",label:"创建时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"修改时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"是否启用",width:"180"}),(0,r.createVNode)(s,{fixed:"right",label:"操作",width:"180"},{default:(0,r.withCtx)((function(e){return[(0,r.createVNode)(i,{link:"",type:"primary",size:"small",onClick:function(t){return n(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("详情")]})),_:2},1032,["onClick"]),(0,r.createVNode)(i,{link:"",type:"primary",size:"small",onClick:function(t){return l(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 编辑 ")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}}});const ke=(0,l.Z)(be,[["__scopeId","data-v-06dd2138"]]);var Ve=ke,Ce=a(8358),Ne=function(e){return(0,r.pushScopeId)("data-v-19493b1e"),e=e(),(0,r.popScopeId)(),e},Se={class:"rules-block"},xe={class:"common-title"},Fe=Ne((function(){return(0,r.createElementVNode)("h3",null,"决策组列表",-1)})),we=(0,r.defineComponent)({__name:"descisionGroup",setup:function(e){var t=(0,c.tv)(),a=(0,r.ref)(JSON.parse(localStorage.getItem("descisionGroupList")||"[]")),o=function(){var e=prompt("请输入决策组名称");e&&(a.value.push({id:"".concat(a.value.length+1),name:e}),localStorage.setItem("descisionGroupList",JSON.stringify(a.value)))},l=function(e){t.push({name:"createDescisionGroup",query:{id:e.id,name:e.name}})},n=function(e){t.push({name:"rulesDetail",query:{id:e.id}})};return function(e,t){var i=(0,r.resolveComponent)("el-button"),s=(0,r.resolveComponent)("el-table-column"),u=(0,r.resolveComponent)("el-table");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Se,[(0,r.createElementVNode)("div",xe,[Fe,(0,r.createVNode)(i,{onClick:o},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("新建决策组")]})),_:1})]),(0,r.createVNode)(u,{data:a.value,style:{width:"100%"}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{prop:"name",label:"决策组名称",width:"180"}),(0,r.createVNode)(s,{prop:"createTime",label:"创建时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"修改时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"是否启用",width:"180"}),(0,r.createVNode)(s,{fixed:"right",label:"操作",width:"180"},{default:(0,r.withCtx)((function(e){return[(0,r.createVNode)(i,{link:"",type:"primary",size:"small",onClick:function(t){return n(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("详情")]})),_:2},1032,["onClick"]),(0,r.createVNode)(i,{link:"",type:"primary",size:"small",onClick:function(t){return l(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 编辑 ")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}}});const Be=(0,l.Z)(we,[["__scopeId","data-v-19493b1e"]]);var De=Be,Ae=[{path:"/descision-node-list",name:"descisionNodeList",component:Ve},{path:"/create-descision-node",name:"createDescisionNode",component:Ce["default"],meta:{hideMenu:!0}},{path:"/descision-detail",name:"descisionDetail",component:Ce["default"],meta:{hideMenu:!0}},{path:"/descision-group-list",name:"descisionGroupList",component:De},{path:"/create-descision-group",name:"createDescisionGroup",component:Ce["default"],meta:{hideMenu:!0}}],Le=[{path:"/flow-list",name:"flow-list",component:function(){return a.e(239).then(a.bind(a,3288))}},{path:"/create-flow",name:"createFlow",component:function(){return a.e(239).then(a.bind(a,8358))},meta:{hideMenu:!0}},{path:"/flow-detail",name:"flowDetail",component:function(){return a.e(239).then(a.bind(a,8358))},meta:{hideMenu:!0}}],Ee=function(e){return(0,r.pushScopeId)("data-v-591be888"),e=e(),(0,r.popScopeId)(),e},Te={class:"logicFlow-list-block"},Pe={class:"common-title"},Ie=Ee((function(){return(0,r.createElementVNode)("h3",null,"场景列表",-1)})),qe=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,c.tv)(),a=(0,r.ref)(JSON.parse(localStorage.getItem("logicList")||'[{"id":0,"name":"汽车生产"}]'));localStorage.setItem("logicList",JSON.stringify(a.value));var o=function(){var e=prompt("请输入场景名称");e&&(a.value.push({id:a.value.length,name:e}),localStorage.setItem("logicList",JSON.stringify(a.value)))},l=function(e){t.push({name:"createLogicFlow",query:{id:e.id,name:e.name}})},n=function(e){t.push({name:"logicFlowDetail",query:{id:e.id}})};return function(e,t){var i=(0,r.resolveComponent)("el-button"),s=(0,r.resolveComponent)("el-table-column"),u=(0,r.resolveComponent)("el-table");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Te,[(0,r.createElementVNode)("div",Pe,[Ie,(0,r.createVNode)(i,{onClick:o},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("新建场景")]})),_:1})]),(0,r.createVNode)(u,{data:a.value,style:{width:"100%"}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{prop:"name",label:"场景名称"}),(0,r.createVNode)(s,{prop:"createTime",label:"创建时间"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"修改时间"}),(0,r.createVNode)(s,{prop:"creater",label:"创建人"}),(0,r.createVNode)(s,{fixed:"right",label:"操作"},{default:(0,r.withCtx)((function(e){return[(0,r.createVNode)(i,{link:"",type:"primary",size:"small",onClick:function(t){return n(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("详情")]})),_:2},1032,["onClick"]),(0,r.createVNode)(i,{link:"",type:"primary",size:"small",onClick:function(t){return l(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 编辑 ")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}}});const Oe=(0,l.Z)(qe,[["__scopeId","data-v-591be888"]]);var Me=Oe,_e={class:"pattern"},Je=["onMousedown"],Ue=(0,r.defineComponent)({__name:"bpmnMenu",props:{lf:null},setup:function(e){var t=e,a=(0,r.toRefs)(t).lf;(0,r.watch)(a,(function(){a.value&&a.value.on("selection:selected",(function(){a.value.updateEditConfig({stopMoveGraph:!1})}))}));var o=["control","events","gateways","task","logic"],l=[{name:"开始",type:"h-bpmn:startEvent",className:"pattern-start"},{name:"时间事件",type:"h-bpmn:timerIntermediateEvent",className:"pattern-time"},{name:"结束",type:"h-bpmn:endEvent",className:"pattern-end"}],n=[{name:"用户任务",type:"h-bpmn:userTask",className:"pattern-user"},{name:"设备任务",type:"h-bpmn:equipmentTask",className:"pattern-equipment"},{name:"服务任务",type:"h-bpmn:serviceTask",className:"pattern-service"},{name:"调用活动",type:"h-bpmn:callActivity",className:"pattern-call"}],i=[{id:"control",title:"工具",children:[{name:"选择",type:"selection",className:"pattern-selection"}]},{id:"events",title:"事件",children:l},{id:"task",title:"任务",children:n},{id:"logic",title:"逻辑",children:[{name:"逻辑或",type:"h-bpmn:complexGatewayOr",className:"pattern-or"},{name:"逻辑且",type:"h-bpmn:complexGatewayAnd",className:"pattern-and"},{name:"复杂逻辑",type:"h-bpmn:complexGateway",className:"pattern-complex"},{name:"条件判断",type:"h-bpmn:exclusiveGateway",className:"pattern-exclusive"}]}];function s(e){"selection"!==e?a&&a.value.dnd.startDrag({type:e}):a.value.updateEditConfig({stopMoveGraph:!0})}return function(e,t){var a=(0,r.resolveComponent)("el-collapse-item"),l=(0,r.resolveComponent)("el-collapse");return(0,r.openBlock)(),(0,r.createElementBlock)("div",_e,[(0,r.createVNode)(l,{modelValue:o,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o=e})},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(i,(function(e){return(0,r.createVNode)(a,{key:e.id,title:e.title,name:e.id},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.children,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.type,class:"pattern-item"},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["pattern-ins",e.className]),onMousedown:function(t){return s(e.type)}},null,42,Je),(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.name),1)])})),128))]})),_:2},1032,["title","name"])})),64))]})),_:1})])}}});const je=(0,l.Z)(Ue,[["__scopeId","data-v-500dea52"]]);var Re=je,He=a(9782),Ze=a.n(He),Qe=(a(4728),a(611)),Ge="h-bpmn:startEvent",Ke="h-bpmn:timerIntermediateEvent",ze="h-bpmn:endEvent",We="h-bpmn:userTask",Ye="h-bpmn:serviceTask",Xe="h-bpmn:receiveTask",$e="h-bpmn:callActivity",et="h-bpmn:equipmentTask",tt="h-bpmn:exclusiveGateway",at="h-bpmn:parallelGateway",rt="h-bpmn:complexGateway",ot="h-bpmn:complexGatewayOr",lt="h-bpmn:complexGatewayAnd",nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.value="开始",this.text.editable=!1,this.text.x=this.x,this.text.y=this.y+this.r,this.r=30}}),t}(He.CircleNodeModel),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.width,a=e.height,r=e.r,o=e.x,l=e.y,n=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("circle",(0,u.pi)((0,u.pi)({},n),{r:r,cx:o,cy:l,width:t,height:a}))])}}),t}(He.CircleNode),st={type:Ge,view:it,model:nt},ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.value=this.text.value||"时间事件",this.text.editable=!0,this.text.x=this.x,this.text.y=this.y+this.r,this.r=30}}),t}(He.CircleNodeModel),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,He.h)("svg",{x:t-r/2+6,y:a-o/2,width:60,height:60,viewBox:"0 0 1274 1024"},[(0,He.h)("path",{fill:l.stroke,d:"M827.871087 196.128913C743.498468 111.756293 631.321596 65.290005 512 65.290005c-119.319549 0-231.499491 46.465265-315.871087 130.837884S65.290005 392.680451 65.290005 512s46.465265 231.499491 130.837884 315.871087 196.551538 130.837884 315.871087 130.837884c119.321596 0 231.499491-46.465265 315.871087-130.837884S958.708971 631.319549 958.708971 512 912.243707 280.500509 827.871087 196.128913zM531.556405 917.246651l0-74.145697c0-11.31572-9.174963-20.491707-20.491707-20.491707-11.316743 0-20.491707 9.174963-20.491707 20.491707l0 74.059739C283.276738 906.322857 116.693746 739.164766 106.755396 531.634176l72.351841 0c11.31572 0 20.491707-9.174963 20.491707-20.491707 0-11.31572-9.174963-20.491707-20.491707-20.491707l-72.273047 0c10.769274-206.737528 177.01253-373.005342 383.740848-383.813502l0 72.346725c0 11.316743 9.174963 20.491707 20.491707 20.491707 11.31572 0 20.491707-9.17394 20.491707-20.491707L531.558451 106.752326c207.593012 9.901511 374.807385 176.539762 385.609405 383.89946l-74.142627 0c-11.316743 0-20.491707 9.174963-20.491707 20.491707 0 11.316743 9.174963 20.491707 20.491707 20.491707l74.220399 0C907.275555 739.78796 739.720422 907.317511 531.556405 917.246651z"}),(0,He.h)("path",{fill:l.stroke,d:"M532.098757 503.118726 532.098757 258.240529c0-11.316743-9.174963-20.491707-20.491707-20.491707-11.31572 0-20.491707 9.17394-20.491707 20.491707l0 254.66612c0 7.858992 4.429893 14.677281 10.924817 18.114566L693.447539 722.42757c4.002151 4.000104 9.245572 6.001691 14.490016 6.001691s10.487865-2.001587 14.490016-6.001691c8.002254-8.002254 8.002254-20.977777 0-28.980032L532.098757 503.118726z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.width,a=e.height,r=e.r,o=e.x,l=e.y,n=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("circle",(0,u.pi)((0,u.pi)({},n),{r:r,cx:o,cy:l,width:t,height:a})),this.getLabelShape()])}}),t}(He.CircleNode),dt={type:Ke,view:ct,model:ut},pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.value="结束",this.text.editable=!1,this.text.x=this.x,this.text.y=this.y+this.r,this.r=30;var a={message:"正方形节点下一个节点只能是圆形节点",validate:function(e,t,a,r){return console.log(e,t,a,r),e.type!==ze}};this.sourceRules.push(a)}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t.strokeWidth=4,t}}),t}(He.CircleNodeModel),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t}(He.CircleNode),ht={type:ze,view:mt,model:pt},vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(He.RectNodeModel),gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,He.h)("svg",{x:t-r/2+5,y:a-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},[(0,He.h)("path",{fill:l.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.radius,n=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("rect",(0,u.pi)((0,u.pi)({},n),{x:t-r/2,y:a-o/2,rx:l,ry:l,width:r,height:o})),this.getLabelShape()])}}),t}(He.RectNode),ft={type:We,view:gt,model:vt},yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(He.RectNodeModel),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,He.h)("svg",{x:t-r/2+5,y:a-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},[(0,He.h)("path",{fill:l.stroke,d:"M1016.832 606.208q2.048 12.288-1.024 29.696t-10.24 35.328-17.408 32.256-22.528 20.48-21.504 6.144-20.48-4.096q-10.24-3.072-25.6-5.632t-31.232-1.024-31.744 6.656-27.136 17.408q-24.576 25.6-28.672 58.368t9.216 62.464q10.24 20.48-3.072 40.96-6.144 8.192-19.456 16.896t-29.184 15.872-33.28 11.264-30.72 4.096q-9.216 0-17.408-7.168t-11.264-15.36l-1.024 0q-11.264-31.744-38.4-54.784t-62.976-23.04q-34.816 0-62.976 23.04t-39.424 53.76q-5.12 12.288-15.36 17.92t-22.528 5.632q-14.336 0-32.256-5.12t-35.84-12.8-32.256-17.92-21.504-20.48q-5.12-7.168-5.632-16.896t7.68-27.136q11.264-23.552 8.704-53.76t-26.112-55.808q-14.336-15.36-34.816-19.968t-38.912-3.584q-21.504 1.024-44.032 8.192-14.336 4.096-28.672-2.048-11.264-4.096-20.992-18.944t-17.408-32.768-11.776-36.864-2.048-31.232q3.072-22.528 20.48-28.672 30.72-12.288 55.296-40.448t24.576-62.976q0-35.84-24.576-62.464t-55.296-38.912q-9.216-3.072-15.36-14.848t-6.144-24.064q0-13.312 4.096-29.696t10.752-31.744 15.36-28.16 18.944-18.944q8.192-5.12 15.872-4.096t16.896 4.096q30.72 12.288 64 7.68t58.88-29.184q12.288-12.288 17.92-30.208t7.168-35.328 0-31.744-2.56-20.48q-2.048-6.144-3.584-14.336t1.536-14.336q6.144-14.336 22.016-25.088t34.304-17.92 35.84-10.752 27.648-3.584q13.312 0 20.992 8.704t10.752 17.92q11.264 27.648 36.864 48.64t60.416 20.992q35.84 0 63.488-19.968t38.912-50.688q4.096-8.192 12.8-16.896t17.92-8.704q14.336 0 31.232 4.096t33.28 11.264 30.208 18.432 22.016 24.576q5.12 8.192 3.072 17.92t-4.096 13.824q-13.312 29.696-8.192 62.464t29.696 57.344 60.416 27.136 66.56-11.776q8.192-5.12 19.968-4.096t19.968 9.216q15.36 14.336 27.136 43.52t15.872 58.88q2.048 17.408-5.632 27.136t-15.872 12.8q-31.744 11.264-54.272 39.424t-22.528 64q0 34.816 18.944 60.928t49.664 37.376q7.168 4.096 12.288 8.192 11.264 9.216 15.36 23.552zM540.672 698.368q46.08 0 87.04-17.408t71.168-48.128 47.616-71.168 17.408-86.528-17.408-86.528-47.616-70.656-71.168-47.616-87.04-17.408-86.528 17.408-70.656 47.616-47.616 70.656-17.408 86.528 17.408 86.528 47.616 71.168 70.656 48.128 86.528 17.408z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.radius,n=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("rect",(0,u.pi)((0,u.pi)({},n),{x:t-r/2,y:a-o/2,rx:l,ry:l,width:r,height:o})),this.getLabelShape()])}}),t}(He.RectNode),kt={type:Ye,view:bt,model:yt},Vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(He.RectNodeModel),Ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,He.h)("svg",{x:t-r/2+5,y:a-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},[(0,He.h)("path",{fill:l.stroke,d:"M780.8 341.333333H243.2l268.8 149.333334v85.333333L213.333333 409.6V682.666667h597.333334V409.6l-298.666667 166.4v-85.333333L780.8 341.333333zM896 256v512H128V256h768z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.radius,n=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("rect",(0,u.pi)((0,u.pi)({},n),{x:t-r/2,y:a-o/2,rx:l,ry:l,width:r,height:o})),this.getLabelShape()])}}),t}(He.RectNode),Nt={type:Xe,view:Ct,model:Vt},St=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(He.RectNodeModel),xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t}(He.RectNode),Ft={type:$e,view:xt,model:St},wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(He.RectNodeModel),Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,He.h)("svg",{x:t-r/2+5,y:a-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},[(0,He.h)("path",{fill:l.stroke,d:"M1035.09001747 686.59460362V79.64608611H-11.09001747v606.94851751h492.95525433v192.93487986h-274.01820648v60.32985611h608.33610417v-60.32985611h-273.98804156v-192.93487986h492.89492448z m-985.85017885-60.32985612V139.97594225h925.52032276v486.28880525H49.23983862z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.radius,n=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("rect",(0,u.pi)((0,u.pi)({},n),{x:t-r/2,y:a-o/2,rx:l,ry:l,width:r,height:o})),this.getLabelShape()])}}),t}(He.RectNode),Dt={type:et,view:Bt,model:wt},At=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),console.log(this),this.text.editable=!1,this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(He.DiamondNodeModel),Lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,He.h)("svg",{x:t-r/2+15,y:a-o/2+12,width:36,height:36,viewBox:"0 0 1274 1024"},[(0,He.h)("path",{fill:l.stroke,d:"M617.92 516.096l272 272-101.824 101.824-272-272-272 272-101.856-101.824 272-272-275.008-275.04L241.056 139.2l275.04 275.04 275.04-275.04 101.824 101.824-275.04 275.04z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.points,a=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("polygon",(0,u.pi)((0,u.pi)({},a),{points:t})),this.getLabelShape()])}}),t}(He.DiamondNode),Et={type:tt,view:Lt,model:At},Tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),console.log(this),this.text.editable=!1,this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(He.DiamondNodeModel),Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,He.h)("svg",{x:t-r/2+15,y:a-o/2+12,width:36,height:36,viewBox:"0 0 1274 1024"},[(0,He.h)("path",{fill:l.stroke,d:"M960.621531 575.791885 571.769268 575.791885l0 382.755404-120.688733 0L451.080535 575.791885 64.875566 575.791885 64.875566 448.207092l386.204969 0L451.080535 65.451688l120.688733 0 0 382.755404 388.853285 0L960.622554 575.791885z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.points,a=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("polygon",(0,u.pi)((0,u.pi)({},a),{points:t})),this.getLabelShape()])}}),t}(He.DiamondNode),It={type:at,view:Pt,model:Tt},qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),console.log(this),this.text.editable=!1,this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(He.DiamondNodeModel),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,He.h)("svg",{x:t-r/2+15,y:a-o/2+12,width:36,height:36,viewBox:"0 0 1274 1024"},[(0,He.h)("path",{fill:l.stroke,d:"M476 72a8 8 0 0 1 8-8h56a8 8 0 0 1 8 8v353.089l249.671-249.672a8 8 0 0 1 11.314 0l39.598 39.598a8 8 0 0 1 0 11.314L598.912 476H952a8 8 0 0 1 8 8v56a8 8 0 0 1-8 8H598.912l249.671 249.671a8 8 0 0 1 0 11.314l-39.598 39.598a8 8 0 0 1-11.314 0L548 598.911V952a8 8 0 0 1-8 8h-56a8 8 0 0 1-8-8V598.912L226.329 848.583a8 8 0 0 1-11.314 0l-39.598-39.598a8 8 0 0 1 0-11.314L425.089 548H72a8 8 0 0 1-8-8v-56a8 8 0 0 1 8-8h353.089L175.417 226.329a8 8 0 0 1 0-11.314l39.598-39.598a8 8 0 0 1 11.314 0L476 425.088V72z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.points,a=e.getNodeStyle();return(0,He.h)("g",{},[(0,He.h)("polygon",(0,u.pi)((0,u.pi)({},a),{points:t})),this.getLabelShape()])}}),t}(He.DiamondNode),Mt={type:rt,view:Ot,model:qt},_t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.editable=!1,this.text.value="and",this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(He.DiamondNodeModel),Jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t}(He.DiamondNode),Ut={type:lt,view:Jt,model:_t},jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.editable=!1,this.text.value="or",this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(He.DiamondNodeModel),Rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t}(He.DiamondNode),Ht={type:ot,view:Rt,model:jt},Zt=function(){function e(e){var t=e.lf;t.register(st),t.register(dt),t.register(ht),t.register(ft),t.register(kt),t.register(Nt),t.register(Ft),t.register(Dt),t.register(Et),t.register(It),t.register(Mt),t.register(Ut),t.register(Ht)}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"pluginName",{enumerable:!0,configurable:!0,writable:!0,value:"HBpmn"}),e}(),Qt=Zt,Gt={0:{nodes:[{id:"6669bf12-8295-4169-9f8b-c46ac8e8ff03",type:"h-bpmn:startEvent",x:360,y:320,properties:{},text:{x:360,y:370,value:"开始"}},{id:"5d284689-55d8-4a83-8565-3ce849b6b17d",type:"h-bpmn:userTask",x:580,y:320,properties:{},text:{x:580,y:320,value:"设计汽车的人工任务"}},{id:"67b0cb5b-57f7-4b8e-86bf-6f025eeaa598",type:"h-bpmn:userTask",x:840,y:320,properties:{},text:{x:840,y:320,value:"审核批准生产"}},{id:"7ee0298b-542c-409e-a3e5-6cc545e0f07a",type:"h-bpmn:exclusiveGateway",x:1040,y:320,properties:{}},{id:"5574b2a6-6977-46fa-bf7b-19c4529a017b",type:"h-bpmn:serviceTask",x:1340,y:320,properties:{},text:{x:1340,y:320,value:"载入图纸"}},{id:"2afa2413-55c4-4496-8954-307effcd069d",type:"h-bpmn:callActivity",x:1660,y:320,properties:{},text:{x:1660,y:320,value:"集团成本审核（调用审核子流程）"}},{id:"f945ccf4-82cf-4a24-bd0e-44b49d6ca3b2",type:"h-bpmn:receiveTask",x:1660,y:560,properties:{},text:{x:1660,y:560,value:"等待原材料"}},{id:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",type:"h-bpmn:parallelGateway",x:600,y:960,properties:{}},{id:"567f6bc5-8c53-440b-b857-757b310cc037",type:"h-bpmn:serviceTask",x:920,y:780,properties:{},text:{x:920,y:780,value:"生产引擎"}},{id:"e75efa15-2a53-4115-af55-908265eb1ce8",type:"h-bpmn:serviceTask",x:920,y:900,properties:{},text:{x:920,y:900,value:"生产轮胎"}},{id:"ae8b0af0-2bb9-41cb-9832-5b8834b54381",type:"h-bpmn:serviceTask",x:920,y:1020,properties:{},text:{x:920,y:1020,value:"生产车灯"}},{id:"d1635522-d221-4810-917f-b7e39a51790c",type:"h-bpmn:serviceTask",x:920,y:1140,properties:{},text:{x:920,y:1140,value:"生产内饰"}},{id:"1eb353d2-5c96-4127-ad91-cc16a5649216",type:"h-bpmn:parallelGateway",x:1220,y:960,properties:{}},{id:"f80c87fa-10b3-4b7b-a6d9-8ec06f5d7b50",type:"h-bpmn:serviceTask",x:1440,y:960,properties:{},text:{x:1440,y:960,value:"组装"}},{id:"4c5376d8-60e4-4ffe-bfab-1d00424f9605",type:"h-bpmn:endEvent",x:1700,y:960,properties:{},text:{x:1700,y:1010,value:"结束"}}],edges:[{id:"dc03c358-2cb1-47a3-a532-5648c2fe713d",type:"polyline",sourceNodeId:"6669bf12-8295-4169-9f8b-c46ac8e8ff03",targetNodeId:"5d284689-55d8-4a83-8565-3ce849b6b17d",startPoint:{x:390,y:320},endPoint:{x:480,y:320},properties:{},pointsList:[{x:390,y:320},{x:480,y:320}]},{id:"409724bc-7682-4e5a-bfc4-422cae7c50c6",type:"polyline",sourceNodeId:"5d284689-55d8-4a83-8565-3ce849b6b17d",targetNodeId:"67b0cb5b-57f7-4b8e-86bf-6f025eeaa598",startPoint:{x:680,y:320},endPoint:{x:740,y:320},properties:{},pointsList:[{x:680,y:320},{x:740,y:320}]},{id:"1221b0fb-87f2-4c4b-adbd-4c9b46ca12dc",type:"polyline",sourceNodeId:"67b0cb5b-57f7-4b8e-86bf-6f025eeaa598",targetNodeId:"7ee0298b-542c-409e-a3e5-6cc545e0f07a",startPoint:{x:940,y:320},endPoint:{x:1010,y:320},properties:{},pointsList:[{x:940,y:320},{x:1010,y:320}]},{id:"4fb48ca0-2d57-4d7a-823d-82f0b59f7f7e",type:"polyline",sourceNodeId:"7ee0298b-542c-409e-a3e5-6cc545e0f07a",targetNodeId:"5d284689-55d8-4a83-8565-3ce849b6b17d",startPoint:{x:1040,y:350},endPoint:{x:580,y:370},properties:{},text:{x:780.6273922638885,y:457,value:"返回修改"},pointsList:[{x:1040,y:350},{x:1040,y:457},{x:580,y:457},{x:580,y:370}]},{id:"3d2c8399-d2c8-405e-894b-e8893a8a513e",type:"polyline",sourceNodeId:"7ee0298b-542c-409e-a3e5-6cc545e0f07a",targetNodeId:"5574b2a6-6977-46fa-bf7b-19c4529a017b",startPoint:{x:1070,y:320},endPoint:{x:1240,y:320},properties:{},text:{x:1134.3773922638886,y:320,value:"审批通过"},pointsList:[{x:1070,y:320},{x:1240,y:320}]},{id:"31016c0b-8350-48b5-b85d-2dcc8069312d",type:"polyline",sourceNodeId:"5574b2a6-6977-46fa-bf7b-19c4529a017b",targetNodeId:"2afa2413-55c4-4496-8954-307effcd069d",startPoint:{x:1440,y:320},endPoint:{x:1560,y:320},properties:{},pointsList:[{x:1440,y:320},{x:1560,y:320}]},{id:"1ce078c4-105b-456d-bd7a-4cbc2492ae81",type:"polyline",sourceNodeId:"2afa2413-55c4-4496-8954-307effcd069d",targetNodeId:"f945ccf4-82cf-4a24-bd0e-44b49d6ca3b2",startPoint:{x:1660,y:370},endPoint:{x:1660,y:510},properties:{},pointsList:[{x:1660,y:370},{x:1660,y:510}]},{id:"8cab2708-bab4-43bc-93e6-7d8739e01643",type:"polyline",sourceNodeId:"f945ccf4-82cf-4a24-bd0e-44b49d6ca3b2",targetNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",startPoint:{x:1660,y:610},endPoint:{x:600,y:930},properties:{},pointsList:[{x:1660,y:610},{x:1660,y:673.0769230769231},{x:600,y:673.0769230769231},{x:600,y:930}]},{id:"07ec8fb2-aa2a-4d91-afed-a88e50a76c42",type:"polyline",sourceNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",targetNodeId:"567f6bc5-8c53-440b-b857-757b310cc037",startPoint:{x:630,y:960},endPoint:{x:820,y:780},properties:{},pointsList:[{x:630,y:960},{x:724.6153846153848,y:960},{x:724.6153846153848,y:780},{x:820,y:780}]},{id:"e0879137-a770-4dd0-885a-fae3af21739d",type:"polyline",sourceNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",targetNodeId:"e75efa15-2a53-4115-af55-908265eb1ce8",startPoint:{x:630,y:960},endPoint:{x:820,y:900},properties:{},pointsList:[{x:630,y:960},{x:725,y:960},{x:725,y:900},{x:820,y:900}]},{id:"78c37200-e933-4b55-9bb3-dd26fe79a2bf",type:"polyline",sourceNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",targetNodeId:"ae8b0af0-2bb9-41cb-9832-5b8834b54381",startPoint:{x:630,y:960},endPoint:{x:820,y:1020},properties:{},pointsList:[{x:630,y:960},{x:725,y:960},{x:725,y:1020},{x:820,y:1020}]},{id:"ee049f6e-a63b-4390-8e0d-fb98e67012a6",type:"polyline",sourceNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",targetNodeId:"d1635522-d221-4810-917f-b7e39a51790c",startPoint:{x:630,y:960},endPoint:{x:820,y:1140},properties:{},pointsList:[{x:630,y:960},{x:724.6153846153848,y:960},{x:724.6153846153848,y:1140},{x:820,y:1140}]},{id:"cc27abc3-664c-4dc7-af21-4aa0b7baa9c2",type:"polyline",sourceNodeId:"567f6bc5-8c53-440b-b857-757b310cc037",targetNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",startPoint:{x:1020,y:780},endPoint:{x:1190,y:960},properties:{},pointsList:[{x:1020,y:780},{x:1123.995726495727,y:780},{x:1123.995726495727,y:960},{x:1190,y:960}]},{id:"08205997-63c0-4e98-b531-d4e911fae978",type:"polyline",sourceNodeId:"e75efa15-2a53-4115-af55-908265eb1ce8",targetNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",startPoint:{x:1020,y:900},endPoint:{x:1190,y:960},properties:{},pointsList:[{x:1020,y:900},{x:1123.3760683760681,y:900},{x:1123.3760683760681,y:960},{x:1190,y:960}]},{id:"bf09cc38-b930-46b0-9c9c-66ead7e26a91",type:"polyline",sourceNodeId:"ae8b0af0-2bb9-41cb-9832-5b8834b54381",targetNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",startPoint:{x:1020,y:1020},endPoint:{x:1190,y:960},properties:{},pointsList:[{x:1020,y:1020},{x:1124.230769230769,y:1020},{x:1124.230769230769,y:960},{x:1190,y:960}]},{id:"0a068a23-ac1d-4040-bb47-9903dde0c7d3",type:"polyline",sourceNodeId:"d1635522-d221-4810-917f-b7e39a51790c",targetNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",startPoint:{x:1020,y:1140},endPoint:{x:1190,y:960},properties:{},pointsList:[{x:1020,y:1140},{x:1123.8888888888891,y:1140},{x:1123.8888888888891,y:960},{x:1190,y:960}]},{id:"08734739-b3f9-4b47-b3b1-88ac54bce878",type:"polyline",sourceNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",targetNodeId:"f80c87fa-10b3-4b7b-a6d9-8ec06f5d7b50",startPoint:{x:1250,y:960},endPoint:{x:1340,y:960},properties:{},pointsList:[{x:1250,y:960},{x:1340,y:960}]},{id:"a33987af-dad0-4646-b422-1c655ce1a446",type:"polyline",sourceNodeId:"f80c87fa-10b3-4b7b-a6d9-8ec06f5d7b50",targetNodeId:"4c5376d8-60e4-4ffe-bfab-1d00424f9605",startPoint:{x:1540,y:960},endPoint:{x:1670,y:960},properties:{},pointsList:[{x:1540,y:960},{x:1670,y:960}]}]}},Kt=Gt,zt="menu-common",Wt=200,Yt=100,Xt=function(){function e(e){var t=this,a=e.lf;Object.defineProperty(this,"lf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"menuTypeMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__menuDOM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_activeData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isShow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setContextMenuByType",{enumerable:!0,configurable:!0,writable:!0,value:function(e,a){t.menuTypeMap.set(e,a)}}),Object.defineProperty(this,"listenDelete",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.hideContextMenu()}}),this.menuTypeMap=new Map,this.lf=a,this.__menuDOM=document.createElement("div"),this.__menuDOM.className="lf-inner-context",this.menuTypeMap.set(zt,[]),this.isShow=!1}return Object.defineProperty(e.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var a=this;this.container=t,e.on("node:click",(function(e){var t=e.data;a._activeData=t,a.createContextMenu()})),e.on("edge:click",(function(e){var t=e.data;a._activeData=t,a.createContextMenu()})),e.on("blank:click",(function(){a.hideContextMenu()}))}}),Object.defineProperty(e.prototype,"hideContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.__menuDOM.innerHTML="",this.__menuDOM.style.display="none",this.isShow&&this.container.removeChild(this.__menuDOM),this.lf.off("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!1}}),Object.defineProperty(e.prototype,"showContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&e.id?(this._activeData=e,this.createContextMenu()):console.warn("请检查传入的参数")}}),Object.defineProperty(e.prototype,"setContextMenuItems",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.menuTypeMap.set(zt,e)}}),Object.defineProperty(e.prototype,"getContextMenuPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._activeData,t=this.lf.graphModel.getElement(e.id);if(t){var a,r;if("edge"===t.BaseType){a=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER;var o=t.getData();a=Math.max(o.startPoint.x,a),r=Math.min(o.startPoint.y,r),a=Math.max(o.endPoint.x,a),r=Math.min(o.endPoint.y,r),o.pointsList&&o.pointsList.forEach((function(e){a=Math.max(e.x,a),r=Math.min(e.y,r)}))}return"node"===t.BaseType&&(a=e.x+t.width/2,r=e.y-t.height/2),this.lf.graphModel.transformModel.CanvasPointToHtmlPoint([a,r])}console.warn("找不到元素".concat(e.id))}}),Object.defineProperty(e.prototype,"createContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.lf.options.isSilentMode;if(!t){var a=this.menuTypeMap.get(this._activeData.type)||[];a=a.concat(this.menuTypeMap.get(zt)),console.log(a);var r=document.createDocumentFragment();a.forEach((function(t){var a=document.createElement("div");a.className="lf-context-item";var o=document.createElement("img");o.src=t.icon,o.className="lf-context-img",t.className&&(a.className="".concat(a.className," ").concat(t.className)),o.addEventListener("click",(function(){if(console.log("sdfef"),e.hideContextMenu(),t.callback)t.callback(e._activeData);else{var a=e.lf.getNodeModelById(e._activeData.id);console.log(a),e.addNode({sourceId:e._activeData.id,x:e._activeData.x,y:e._activeData.y,width:e._activeData.width,properties:t.properties,type:t.type},void 0)}})),a.appendChild(o),r.appendChild(a)})),this.__menuDOM.innerHTML="",this.__menuDOM.appendChild(r),this.showMenu()}}}),Object.defineProperty(e.prototype,"addNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var a=void 0!==t;void 0===t&&(t=e.y);var r=this.lf.getNodeModelById(e.sourceId),o=e.x+Wt,l=t-e.y/2-20,n=e.x+100+Wt,i=t+e.y/2+20,s=this.lf.getAreaElement([o,l],[n,i]);if(s.length)return t+=Yt,void this.addNode(e,t);console.log(e);var u,c,d=this.lf.addNode({type:e.type,x:e.x+Wt+r.width/2,y:t,properties:e.properties});a&&(u={x:e.x,y:e.y+r.height/2},c={x:d.x-d.width/2,y:d.y}),this.lf.addEdge({sourceNodeId:e.sourceId,targetNodeId:d.id,startPoint:u,endPoint:c})}}),Object.defineProperty(e.prototype,"showMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getContextMenuPosition(),t=e[0],a=e[1];this.__menuDOM.style.display="flex",this.__menuDOM.style.top="".concat(a,"px"),this.__menuDOM.style.left="".concat(t+10,"px"),this.container.appendChild(this.__menuDOM),!this.isShow&&this.lf.on("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!0}}),e}();Xt.pluginName="contextPad";var $t=Xt,ea=function(e){var t={type:"h-bpmn:userTask",label:"用户任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAp1JREFUWEftlj9oE2EYxp/3IkSckotOpqDgl5ZWcLBgxcVBdBL8gw66iCg2lxrBzcl0qpPS1lyQKm5uiuBUHBztoAjVVtOLRDA46Z06VAvmXkkwQWLS3PudQwn54KY8z/v8eO7uvRA2+KENzoc+YNg71PsNxm6VYxStnibwIQCnAF4kptcMv+RWjSlk1VqYFkM1mLCLx5jpJoh2doD4zoQpL61u6EJqA5oF5zwY9wIFE3JuWk0G0raItAATd8r7uPprQRRoYMQdV8siD6C3ZkzbeQ5gTBLGwGPPUsclnppW3GCs8HaHwZvK0iAAq5sj37Z9ujS6KvGKARP5lXNMdF8S0tT6fNidSD2VeMWAcfv9OMEvSEKaWo2XRQwYm3UOGhE80wEk5pNfMqlHEq8YMFEobmc2KpKQhpZR3eNZQ4sSrxiwNty0Sw8BPiEJAujDlp/R4crVgR8Snxagzm1m8FnPSj2QwGmtmUaAaTtzAC4ECWTCNd3PnVaDDahEoZRl5ul1ITVWy9/zQgHWBsULpQPw+QwIw2CM1IcTlsBYZgN3v6bVqyAtd9KEBgwTHsTb+4DmnJPEGgZgIAlCst4KowIfFUTx0b2otHZmo11xg+ZtZz8iGAPjCFC/gpx5EOZRxYI7oWr/hAKfQIBb7XeDDOMKMx1tthQ4okXIqBDxE4I//dkaKnYb0xXQzBdzoEgW4Hi3YbLfyQNXZ9zMYG4937qApu28Af6sDlm6RL3kWmq3eM3EbecFAXslSbpaBl56lhpt52/bYNxemSHQZd1AHR+DZz0rlW31tgfMOw4RdukE6XqYUfIySgUCNG2HdYPC+FxL/VNY2wb7gB1q7qEG68vZuB7meRJ72Z9st7S7fknEQf/Z0AcMW2i/wbAN/gbA1dYpL5kz5gAAAABJRU5ErkJggg=="},a={type:"h-bpmn:serviceTask",label:"系统任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAz9JREFUWEfVmEtoE1EUhv8zqaBgwUwi+K5CJqkoumhBxY11IVTBhaBUUNCFtplQRRSrK+vKVrTgYyZUF7qRigV3dqFg3YhdtAsLapIJKK2vRToRqgtpM0cmtTVJE3IzyWKcXTL/+c83c+/cc+4luPwil/OhKsCVWjJgEVqZM75iD8rk+co08/xHePMnpy/CMaANlyE2RBJbNLvJKaRjQF/UuMaMSyKAROiZCiuXRbSFGseAsp4cALhNLCk9NtXAUTFtvqoKQOMNgJ2CSUdMVdklqM2TlQRc1ze57NfS38eJM2uY+GlabRzPjZR14xuAVYJJv5uqsjpX69Vj24jpECRpAoQRs0N5X8yrKKCsJdeDeBDAjvkgBl5JzHdm6+itlEEfAQcF4eZkRENShs4xZbZaRJ0E7MmJfwemVjMSmBSag7KWvAXiMxUBVCtmum1GAmfLAvq1ZItF/LLafE7iJaa9qUhgODd20RDL0eQzMO93kqDqGKIhMxw4UBJQ1uKnQNK9yhPxFwYZEjhmEc0SEAIoBOYNFXuxddqMhO7Pxy28wfr+uH9JRnoNIFiJKTGfnIoEHxaL8WqJi0TUW4kfgMSMx9o93R5KZb+t+WBZNw4DeFKJmUgJ8+vJJgs8WokvE46lw8qjfEAt3g2SrogaSaDmlBoYE9GviH7YKHHdRxFtVsPWVTMS6s4DtH94dWOUgKZyRszclY4Er5fT5d73aYkTTPSgfAyPm2pw+6I5aP/h743VW8ulfhCVrptEE2Y40FA+0WKFrCc+A7S2ZCzzgPTTak91NU4XBVyYj1r8PEi6UdSI8MIMK/ucAHp1Y7iggvyzYeuCGQndLPQtWYtLmTHhbjqsdDoB9OmJKIM6CmPtMppWlZZinv8noOzWIXb9R+LqZUZ2+0Lt+lLn+mbBXoNc3W4tVBE3N6zZeuz2ln9uqF28afoLWHLbyR6Kwco2tlsqqcfMSHqI2pithqq3nXZigY27abeQgpBpU1XkXG1VG3eRpKJVJ9sgA2NpVWkW8RVut8qZybphD7O9jxG5Bk1VOSIirBmgTzd6GOgSSUpA75SqCB3V1QzQ9QeY9pO6+ghYZGhroXF8gFmL5CIefwB0scE4DheJlAAAAABJRU5ErkJggg==",cls:"import_icon"},r={type:"h-bpmn:exclusiveGateway",label:"条件判断",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="},o={type:"h-bpmn:timerIntermediateEvent",label:"时间时间",icon:"data:image/png;base64,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"},l={type:"h-bpmn:endEvent",label:"结束",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"},n={icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAUpJREFUWEftVzuywjAMlKgDPV2g4RYPuAnfDs7w4AzQ8b0Jn1vQQDp6SI0YFwFPSMC2EiYZnDLZldYrybERGI/XLs4Aofc2BMHcXV37pmnQlOh1SwMgmijxEYfu4jJVwoZARgKPXeevQLjTSXhDqlcX/l6HI7APgaeOM0LCulIAhDIA1JSwT9ABCM4qHELaVZb+6FUg4L9KgLQxBDTOqUDVEqdsYWSJU85pHN5oio2zGRDzK/DUchpYwI3BorUpdKNmZe1vo4ixDlqBkl2JOCiCaNfuDUFun0QEustrogPldYoU6P9dgWKQ5CoGkxj3XsZ+xcG4JOEdIKo9rEBRLuugfKIOb1mcPuJwwzqUf3U6jW4FCps5LnC4tsRc962D1sGgBziTyOHaHsxUD2b+wMq5RH3lwJopgZm/dnLc+sRN5Nr5KQnne64F3gEyDFZHJCakvQAAAABJRU5ErkJggg==",callback:function(t){e.deleteElement(t.id),e.extension.contextPad.hideContextMenu()}};e.extension.contextPad.setContextMenuItems([n]),e.extension.contextPad.setContextMenuByType("h-bpmn:startEvent",[t,a,r,o]),e.extension.contextPad.setContextMenuByType("h-bpmn:timerIntermediateEvent",[t,a,r,o]),e.extension.contextPad.setContextMenuByType("h-bpmn:userTask",[t,a,r,l,o]),e.extension.contextPad.setContextMenuByType("h-bpmn:serviceTask",[t,o,a,r,l]),e.extension.contextPad.setContextMenuByType("h-bpmn:exclusiveGateway",[t,a,o])},ta=ea;function aa(){var e=(0,r.ref)(void 0),t=(0,r.ref)(null),a=(0,c.yj)(),o=a.query.id;return(0,r.onMounted)((function(){e.value=new(Ze())({container:document.querySelector("#logic-flow"),grid:!0,background:{backgroundColor:"rgb(248, 248, 248)"},keyboard:{enabled:!0},overlapMode:1,isSilentMode:"logicFlowDetail"===a.name,plugins:[Qe.Ou,$t,Qe.aC,Qe.v2,Qe.ip,Qe.Ju,Qt],style:{rect:{radius:5,stroke:"#187DFF"},circle:{r:18,stroke:"#187DFF"},polygon:{stroke:"#187DFF"},polyline:{stroke:"#187DFF",hoverStroke:"#187DFF",selectedStroke:"#187DFF"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}}}),ta(e.value),e.value.extension.selectionSelect.setSelectionSense(!1,!1),e.value.on("node:click",(function(e){console.log(e),t.value=e})),e.value.on("blank:click",(function(e){console.log(e),t.value=null}));var r=JSON.parse(localStorage.getItem("logicData")||JSON.stringify(Kt));r[o]?(e.value.render(r[o]),localStorage.setItem("logicData",JSON.stringify(r))):e.value.render()})),{lf:e,activeCell:t}}var ra=function(e){return(0,r.pushScopeId)("data-v-12adbf9c"),e=e(),(0,r.popScopeId)(),e},oa={class:"flow-basic__attr"},la=ra((function(){return(0,r.createElementVNode)("h4",null,"全局属性",-1)})),na=ra((function(){return(0,r.createElementVNode)("span",{class:"text-gray-500"},"-",-1)})),ia=(0,r.defineComponent)({__name:"logicFlowBasicAttr",setup:function(e){var t=(0,r.ref)("default"),a=(0,r.ref)(),o=(0,r.reactive)({name:"",tag:"",atag:"",group:"",date2:"",date1:"",type:[],resource:"",desc:""}),l=(0,r.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],region:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]});return function(e,n){var i=(0,r.resolveComponent)("el-input"),s=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-option"),c=(0,r.resolveComponent)("el-select"),d=(0,r.resolveComponent)("el-date-picker"),p=(0,r.resolveComponent)("el-col"),m=(0,r.resolveComponent)("el-time-picker"),h=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createElementBlock)("div",oa,[la,(0,r.createVNode)(h,{ref_key:"ruleFormRef",ref:a,model:o,rules:l,"label-width":"120px",class:"demo-ruleForm",size:t.value,"label-position":"top","status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{label:"场景名称",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,{modelValue:o.name,"onUpdate:modelValue":n[0]||(n[0]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"场景分类标签",prop:"tag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{modelValue:o.tag,"onUpdate:modelValue":n[1]||(n[1]=function(e){return o.tag=e}),placeholder:"请选择场景分类标签"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"低碳节能",value:"weiyu"}),(0,r.createVNode)(u,{label:"安心居家",value:"chufang"}),(0,r.createVNode)(u,{label:"灯光氛围",value:"anfang"}),(0,r.createVNode)(u,{label:"健康睡眠",value:"dengguang"}),(0,r.createTextVNode)("a "),(0,r.createVNode)(u,{label:"家庭空气",value:"kongqi"}),(0,r.createVNode)(u,{label:"居家环境",value:"tongyong"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"场景标签",prop:"atag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{modelValue:o.atag,"onUpdate:modelValue":n[2]||(n[2]=function(e){return o.atag=e}),placeholder:"请选择场景标签"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"卫浴",value:"weiyu"}),(0,r.createVNode)(u,{label:"厨房",value:"chufang"}),(0,r.createVNode)(u,{label:"安防",value:"anfang"}),(0,r.createVNode)(u,{label:"灯光",value:"dengguang"}),(0,r.createVNode)(u,{label:"空气",value:"kongqi"}),(0,r.createVNode)(u,{label:"通用",value:"tongyong"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"场景描述",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,{modelValue:o.name,"onUpdate:modelValue":n[3]||(n[3]=function(e){return o.name=e}),type:"textarea"},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"关联分组",prop:"group"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{modelValue:o.group,"onUpdate:modelValue":n[4]||(n[4]=function(e){return o.group=e}),placeholder:"请选择分组"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"分组1",value:"weiyu"}),(0,r.createVNode)(u,{label:"分组2",value:"chufang"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"生效时间",prop:"group"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{span:11},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:o.date1,"onUpdate:modelValue":n[5]||(n[5]=function(e){return o.date1=e}),type:"date",placeholder:"Pick a date",style:{width:"100%"}},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(p,{span:2,class:"text-center"},{default:(0,r.withCtx)((function(){return[na]})),_:1}),(0,r.createVNode)(p,{span:11},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(m,{modelValue:o.date2,"onUpdate:modelValue":n[6]||(n[6]=function(e){return o.date2=e}),placeholder:"Pick a time",style:{width:"100%"}},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])])}}});const sa=(0,l.Z)(ia,[["__scopeId","data-v-12adbf9c"]]);var ua=sa,ca=function(e){return(0,r.pushScopeId)("data-v-887bc7ae"),e=e(),(0,r.popScopeId)(),e},da={class:"flow-basic__attr"},pa=ca((function(){return(0,r.createElementVNode)("h4",null,"设备属性",-1)})),ma=(0,r.defineComponent)({__name:"logicFlowBasicEquipmentAttr",setup:function(e){var t=(0,r.ref)("default"),a=(0,r.ref)(),o=(0,r.reactive)({name:"",tag:"",atag:"",group:"",date2:"",date1:"",type:[],resource:"",desc:""}),l=(0,r.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],region:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]});return function(e,n){var i=(0,r.resolveComponent)("el-radio"),s=(0,r.resolveComponent)("el-radio-group"),u=(0,r.resolveComponent)("el-form-item"),c=(0,r.resolveComponent)("el-option"),d=(0,r.resolveComponent)("el-select"),p=(0,r.resolveComponent)("el-input"),m=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createElementBlock)("div",da,[pa,(0,r.createVNode)(m,{ref_key:"ruleFormRef",ref:a,model:o,rules:l,"label-width":"120px",class:"demo-ruleForm",size:t.value,"label-position":"top","status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"类型"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:o.type,"onUpdate:modelValue":n[0]||(n[0]=function(e){return o.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,{label:3},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("消息上报")]})),_:1}),(0,r.createVNode)(i,{label:6},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("消息下发")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"设备产品类型",prop:"tag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:o.tag,"onUpdate:modelValue":n[1]||(n[1]=function(e){return o.tag=e}),placeholder:"请选择设备产品类型"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"穿衣镜",value:"weiyu"}),(0,r.createVNode)(c,{label:"电熨斗",value:"chufang"}),(0,r.createVNode)(c,{label:"床头灯",value:"anfang"}),(0,r.createVNode)(c,{label:"智能温控器",value:"dengguang"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"设备命令",prop:"atag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:o.atag,"onUpdate:modelValue":n[2]||(n[2]=function(e){return o.atag=e}),placeholder:"请选择设备命令"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"目标温度",value:"weiyu"}),(0,r.createVNode)(c,{label:"目标湿度",value:"chufang"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"命令参数",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":n[3]||(n[3]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules","size"])])}}});const ha=(0,l.Z)(ma,[["__scopeId","data-v-887bc7ae"]]);var va=ha,ga=function(e){return(0,r.pushScopeId)("data-v-40abc83b"),e=e(),(0,r.popScopeId)(),e},fa={class:"flow-basic__attr"},ya=ga((function(){return(0,r.createElementVNode)("h4",null,"服务属性",-1)})),ba=(0,r.defineComponent)({__name:"logicFlowBasicServiceAttr",setup:function(e){var t=(0,r.ref)("default"),a=(0,r.ref)(),o=(0,r.reactive)({name:"",tag:"",atag:"",group:"",date2:"",date1:"",type:3,resource:"",desc:""}),l=(0,r.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],region:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]});return function(e,n){var i=(0,r.resolveComponent)("el-radio"),s=(0,r.resolveComponent)("el-radio-group"),u=(0,r.resolveComponent)("el-form-item"),c=(0,r.resolveComponent)("el-option"),d=(0,r.resolveComponent)("el-select"),p=(0,r.resolveComponent)("el-input"),m=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createElementBlock)("div",fa,[ya,(0,r.createVNode)(m,{ref_key:"ruleFormRef",ref:a,model:o,rules:l,"label-width":"120px",class:"demo-ruleForm",size:t.value,"label-position":"top","status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"类型"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:o.type,"onUpdate:modelValue":n[0]||(n[0]=function(e){return o.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,{label:3},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("常规")]})),_:1}),(0,r.createVNode)(i,{label:6},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("自定义服务")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),3===o.type?((0,r.openBlock)(),(0,r.createBlock)(u,{key:0,label:"服务类型",prop:"tag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:o.tag,"onUpdate:modelValue":n[1]||(n[1]=function(e){return o.tag=e}),placeholder:"请选择设备产品类型"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"室外温度",value:"weiyu"}),(0,r.createVNode)(c,{label:"室外湿度",value:"chufang"})]})),_:1},8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0),3===o.type?((0,r.openBlock)(),(0,r.createBlock)(u,{key:1,label:"命令参数",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":n[2]||(n[2]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0),6===o.type?((0,r.openBlock)(),(0,r.createBlock)(u,{key:2,label:"接入Api",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":n[3]||(n[3]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0),6===o.type?((0,r.openBlock)(),(0,r.createBlock)(u,{key:3,label:"输入参数",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":n[4]||(n[4]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0),6===o.type?((0,r.openBlock)(),(0,r.createBlock)(u,{key:4,label:"输出参数",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":n[5]||(n[5]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0)]})),_:1},8,["model","rules","size"])])}}});const ka=(0,l.Z)(ba,[["__scopeId","data-v-40abc83b"]]);var Va=ka,Ca={key:0,class:"flow-attr__block"},Na=(0,r.defineComponent)({__name:"logicFlowAttr",props:{activeCell:null},setup:function(e){var t=e,a={basic:ua,"h-bpmn:equipmentTask":va,"h-bpmn:serviceTask":Va},o=(0,r.computed)((function(){var e=null===t.activeCell?"basic":t.activeCell.data.type;return a[e]||null}));return function(e,t){return(0,r.unref)(o)?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ca,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)((0,r.unref)(o))))])):(0,r.createCommentVNode)("",!0)}}});const Sa=(0,l.Z)(Na,[["__scopeId","data-v-70f86f4e"]]);var xa=Sa,Fa={class:"logic-flow__tools"},wa=(0,r.defineComponent)({__name:"index",props:{lf:null},setup:function(e){var t=e,a=(0,c.yj)(),o=(0,r.toRefs)(t).lf,l=a.query.id,n=function(){var e=o.value.getGraphData(),t=JSON.parse(localStorage.getItem("logicData")||"{}");t[l]=e,localStorage.setItem("logicData",JSON.stringify(t)),(0,ae.z8)({message:"保存成功",type:"success"})},i=function(e){switch(e.key){case"ZoomIn":o.value.zoom(!0);break;case"ZoomOut":o.value.zoom(!1);break;case"Undo":o.value.undo();break;case"Redo":o.value.redo();break;case"Reset":o.value.clearData();break;case"Save":n();break;default:break}},s=[{id:"1",children:[{key:"ZoomIn",name:"放大"},{key:"ZoomOut",name:"缩小"}]},{id:"2",children:[{key:"Undo",icon:"RefreshLeft",name:"返回上一步"},{key:"Redo",icon:"RefreshRight",name:"恢复下一步"},{key:"Reset",icon:"Refresh",name:"重置"},{key:"Save",icon:"Download",name:"保存"}]}];return function(e,t){var a=(0,r.resolveComponent)("el-icon"),o=(0,r.resolveComponent)("el-button"),l=(0,r.resolveComponent)("el-button-group");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Fa,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s,(function(e){return(0,r.createVNode)(l,{key:e.id},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.children,(function(e){return(0,r.openBlock)(),(0,r.createBlock)(o,{key:e.key,title:e.name,onClick:function(t){return i(e)}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(a,null,{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon||e.key)))]})),_:2},1024)]})),_:2},1032,["title","onClick"])})),128))]})),_:2},1024)})),64))])}}});const Ba=(0,l.Z)(wa,[["__scopeId","data-v-5e418635"]]);var Da=Ba,Aa={class:"home"},La={class:"logic-block"},Ea={id:"logic-flow",ref:"flow"},Ta=(0,r.defineComponent)({__name:"logicFlowBasic",setup:function(e){var t=(0,c.yj)(),a=aa(),o=a.lf,l=a.activeCell;return function(e,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Aa,["logicFlowDetail"!==(0,r.unref)(t).name?((0,r.openBlock)(),(0,r.createBlock)(Re,{key:0,lf:(0,r.unref)(o)},null,8,["lf"])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",La,[(0,r.createVNode)(Da,{lf:(0,r.unref)(o)},null,8,["lf"]),(0,r.createElementVNode)("div",Ea,null,512)]),(0,r.createVNode)(xa,{activeCell:(0,r.unref)(l)},null,8,["activeCell"])])}}});const Pa=(0,l.Z)(Ta,[["__scopeId","data-v-9808a76c"]]);var Ia=Pa,qa=[{path:"/logic-flow-list",name:"logic-flow-list",component:Me},{path:"/create-logic-flow",name:"createLogicFlow",component:Ia,meta:{hideMenu:!0}},{path:"/logic-flow-detail",name:"logicFlowDetail",component:Ia,meta:{hideMenu:!0}}],Oa=(0,u.ev)((0,u.ev)([{path:"/scene",name:"scene",component:he},{path:"/",name:"home",component:k,children:(0,u.ev)((0,u.ev)([],Ae,!0),Le,!0)}],qa,!0),[{path:"/config",name:"config",component:T}],!1),Ma=(0,c.p7)({history:(0,c.r5)(),routes:Oa}),_a=Ma,Ja=a(3907),Ua=(0,Ja.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),ja=a(5260),Ra=(a(4415),a(544)),Ha=(0,r.createApp)(s);Ha.use(ja.Z,{locale:Ra.Z}).use(Ua).use(_a).mount("#app");for(var Za=0,Qa=Object.entries(d);Za<Qa.length;Za++){var Ga=Qa[Za],Ka=Ga[0],za=Ga[1];Ha.component(Ka,za)}},8503:function(e,t,a){a.d(t,{AN:function(){return o},HT:function(){return i},Hd:function(){return u},_0:function(){return c},fg:function(){return n},hI:function(){return s},hP:function(){return l},lG:function(){return r},m8:function(){return d}});var r="descision",o="descisionGroup",l="equipmentAttr",n="time",i="weather",s="FENCE",u="equipmentActionAttr",c="messageActionAttr",d="messageActionAttr"},1803:function(e,t,a){a.d(t,{E:function(){return Pe}});var r=a(655),o=a(8503),l=a(8222);function n(e,t){(0,l.watch)(t,(function(){console.log("sdfe"),e("syncData",t)}),{deep:!0})}var i=a(6486),s=(0,l.defineComponent)({__name:"attrDescision",emits:["syncData"],setup:function(e,t){var a=this,o=t.emit,s=function(e){console.log(e);var t=(0,i.find)(u,(function(t){return t.id===e}));p.descision=t.name},u=JSON.parse(localStorage.getItem("descisionNodeList")||"[]");console.log(u),(0,l.onMounted)((function(){n(o,p)}));var c=(0,l.ref)("default"),d=(0,l.ref)(),p=(0,l.reactive)({name:"Hello",descisionId:"",descision:"",count:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),m=(0,l.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],descisionId:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]}),h=function(e){return(0,r.mG)(a,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,e.validate((function(e,t){e?console.log("submit!"):console.log("error submit!",t)}))]:[2];case 1:return t.sent(),[2]}}))}))},v=function(e){e&&e.resetFields()};return function(e,t){var a=(0,l.resolveComponent)("el-option"),r=(0,l.resolveComponent)("el-select"),o=(0,l.resolveComponent)("el-form-item"),n=(0,l.resolveComponent)("el-checkbox"),i=(0,l.resolveComponent)("el-checkbox-group"),g=(0,l.resolveComponent)("el-button"),f=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(f,{ref_key:"ruleFormRef",ref:d,model:p,rules:m,"label-width":"120px",class:"demo-ruleForm",size:c.value,"status-icon":""},{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(o,{label:"决策点",prop:"descision"},{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(r,{modelValue:p.descisionId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return p.descisionId=e}),placeholder:"请选择决策点",onChange:s},{default:(0,l.withCtx)((function(){return[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)((0,l.unref)(u),(function(e){return(0,l.openBlock)(),(0,l.createBlock)(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),(0,l.createVNode)(o,{label:"决策方式",prop:"type"},{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(i,{modelValue:p.type,"onUpdate:modelValue":t[1]||(t[1]=function(e){return p.type=e})},{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(n,{label:"正确",name:"type"}),(0,l.createVNode)(n,{label:"错误",name:"type"})]})),_:1},8,["modelValue"])]})),_:1}),(0,l.createVNode)(o,null,{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(g,{type:"primary",onClick:t[2]||(t[2]=function(e){return h(d.value)})},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)(" Create ")]})),_:1}),(0,l.createVNode)(g,{onClick:t[3]||(t[3]=function(e){return v(d.value)})},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)("Reset")]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])}}});const u=s;var c=u,d=(0,l.defineComponent)({__name:"attrDescisionGroup",emits:["syncData"],setup:function(e,t){var a=this,o=t.emit,s=function(e){console.log(e);var t=(0,i.find)(u,(function(t){return t.id===e}));p.descision=t.name},u=JSON.parse(localStorage.getItem("descisionGroupList")||"[]");(0,l.onMounted)((function(){n(o,p)}));var c=(0,l.ref)("default"),d=(0,l.ref)(),p=(0,l.reactive)({name:"Hello",descisionId:"",descision:"",count:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),m=(0,l.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],descisionId:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]}),h=function(e){return(0,r.mG)(a,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,e.validate((function(e,t){e?console.log("submit!"):console.log("error submit!",t)}))]:[2];case 1:return t.sent(),[2]}}))}))},v=function(e){e&&e.resetFields()};return function(e,t){var a=(0,l.resolveComponent)("el-option"),r=(0,l.resolveComponent)("el-select"),o=(0,l.resolveComponent)("el-form-item"),n=(0,l.resolveComponent)("el-button"),i=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(i,{ref_key:"ruleFormRef",ref:d,model:p,rules:m,"label-width":"120px",class:"demo-ruleForm",size:c.value,"status-icon":""},{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(o,{label:"决策组",prop:"descision"},{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(r,{modelValue:p.descisionId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return p.descisionId=e}),placeholder:"请选择决策组",onChange:s},{default:(0,l.withCtx)((function(){return[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)((0,l.unref)(u),(function(e){return(0,l.openBlock)(),(0,l.createBlock)(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),(0,l.createVNode)(o,null,{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(n,{type:"primary",onClick:t[1]||(t[1]=function(e){return h(d.value)})},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)(" Create ")]})),_:1}),(0,l.createVNode)(n,{onClick:t[2]||(t[2]=function(e){return v(d.value)})},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)("Reset")]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])}}});const p=d;var m,h=p,v=(m={},m[o.lG]=c,m[o.AN]=h,m);const g={class:"command-param"},f={class:"command-left"},y={class:"command-right"},b=(0,l.createElementVNode)("span",null,"无",-1),k={key:2,class:"diff-param"},V={class:"command-param"},C={class:"command-left"},N={key:0,class:"command-right"},S={class:"input-style"},x={key:1,class:"device-unit"},F={class:"device-unit"};function w(e,t,a,r,o,n){const i=(0,l.resolveComponent)("el-option"),s=(0,l.resolveComponent)("el-select"),u=(0,l.resolveComponent)("el-form-item"),c=(0,l.resolveComponent)("el-input"),d=(0,l.resolveComponent)("el-checkbox"),p=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(p,{ref:"diffForm",class:"device-condition common-form",model:o.ruleForm,rules:o.rules,"label-width":"120px","label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{label:"设备产品类型",prop:"componentId"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.componentId,"onUpdate:modelValue":t[0]||(t[0]=e=>o.ruleForm.componentId=e),filterable:"",placeholder:"请选择设备产品类型","popper-class":"selectCustomAttrs"},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.deviceProductTypeList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.id,label:e.prodtypeName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(u,{label:"设备命令",prop:"deviceCommand"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.deviceCommand,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ruleForm.deviceCommand=e),filterable:"",placeholder:"请选择设备命令","popper-class":"selectCustomAttrs",onChange:n.handleDeviceCommandList},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.deviceCommandList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),o.ruleForm.deviceSkillObject.length>0&&(o.ruleForm.isDeviceSkill||o.ruleForm.noMessage)?((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,{key:0},(0,l.renderList)(o.ruleForm.deviceSkillObject,((e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:e.id,class:"diff-param"},[(0,l.createVNode)(u,{label:"事件属性",class:"deviceParam"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(e.description)+" "+(0,l.toDisplayString)(e.propName),1)])),_:2},1024),(0,l.createVNode)(u,{label:"命令参数",class:"my-select-input deviceParam"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",g,[(0,l.createElementVNode)("div",f,[(0,l.createVNode)(s,{modelValue:e.operationSign,"onUpdate:modelValue":t=>e.operationSign=t,"popper-class":"selectCustomAttrs",onChange:e=>n.handleDeviceParamSelect(e,t)},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.operationSignList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.key,label:e.value,value:e.key},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),(0,l.createElementVNode)("div",y,["enum"===e.propValType||"bool"===e.propValType||"int"===e.propValType&&"1"===e.exchangeType?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,prop:"deviceSkillObject."+t+".param",rules:[{required:!0,message:"参数值不能为空",trigger:"change"}]},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,style:{width:"100%"},placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:e=>n.handleSkillSelect(e,t,"select")},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.variantsList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])):((0,l.openBlock)(),(0,l.createBlock)(u,{key:1,prop:"deviceSkillObject."+t+".param",class:"my-select-input deviceParam",rules:[{required:!0,message:"参数值不能为空",trigger:"blur"},{validator:(t,a,r)=>{n.getVariantsValue(e,a,r)}}]},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,style:{width:"100%"},maxlength:"string"===e.propValType?500:null,placeholder:e.variantsList?""+("请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step):"请输入字符串值",onChange:e=>n.handleSkillSelect(e,t,"input")},null,8,["modelValue","onUpdate:modelValue","maxlength","placeholder","onChange"])])),_:2},1032,["prop","rules"]))])])])),_:2},1024),(0,l.createVNode)(u,{label:"用户编辑",prop:"deviceSkillObject."+t+".require",class:"checkbox-style"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{modelValue:e.require,"onUpdate:modelValue":t=>e.require=t,onChange:e=>n.handleSkillSelect(e,t,"check")},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("支持")])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])])))),128)):0===o.ruleForm.deviceSkillObject.length&&o.ruleForm.isDeviceSkill?((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,{key:1},[(0,l.createVNode)(u,{label:"命令参数",prop:"commandParam"},{default:(0,l.withCtx)((()=>[b])),_:1}),(0,l.createVNode)(u,{label:"用户编辑",class:"checkbox-style"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{disabled:!0},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("支持")])),_:1})])),_:1})],64)):((0,l.openBlock)(),(0,l.createElementBlock)("div",k,[o.ruleForm.noMessage?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,label:"命令参数",class:"my-select-input deviceParam"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",V,[(0,l.createElementVNode)("div",C,[(0,l.createVNode)(s,{modelValue:o.ruleForm.operationSign,"onUpdate:modelValue":t[2]||(t[2]=e=>o.ruleForm.operationSign=e),disabled:o.ruleForm.noAlarm,"popper-class":"selectCustomAttrs",class:(0,l.normalizeClass)(o.ruleForm.noAlarm?"setMaxWidth":"")},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.ruleForm.operationSignList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.key,label:e.value,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","class"])]),o.ruleForm.noAlarm?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",N,[Array.isArray(o.ruleForm.variantsList)||""===o.ruleForm.deviceCommand?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,prop:"commandParamSelect"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.commandParamSelect,"onUpdate:modelValue":t[3]||(t[3]=e=>o.ruleForm.commandParamSelect=e),style:{width:"100%"},placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:n.handleChangeCommad},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.ruleForm.variantsList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):((0,l.openBlock)(),(0,l.createBlock)(u,{key:1,prop:"inputValue"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",S,[(0,l.createVNode)(c,{modelValue:o.ruleForm.inputValue,"onUpdate:modelValue":t[4]||(t[4]=e=>o.ruleForm.inputValue=e),type:"text",maxlength:o.ruleForm.variantsList&&o.ruleForm.variantsList.propValType&&"string"==o.ruleForm.variantsList.propValType?500:null,class:(0,l.normalizeClass)(o.ruleForm.variantsList&&o.ruleForm.variantsList.propValType&&"string"==o.ruleForm.variantsList.propValType?"string-width":""),placeholder:o.inputPlaceHolder,onBlur:n.handleChangeInput},null,8,["modelValue","maxlength","class","placeholder","onBlur"])])])),_:1}))])),!Array.isArray(o.ruleForm.variantsList)&&o.ruleForm.variantsList&&o.ruleForm.variantsList.unit&&!o.ruleForm.noAlarm?((0,l.openBlock)(),(0,l.createElementBlock)("div",x,[(0,l.createElementVNode)("span",F,(0,l.toDisplayString)(o.ruleForm.variantsList.unit),1)])):(0,l.createCommentVNode)("",!0)])])),_:1})),(0,l.createVNode)(u,{label:"用户编辑",class:"checkbox-style"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{modelValue:o.ruleForm.isRequired,"onUpdate:modelValue":t[5]||(t[5]=e=>o.ruleForm.isRequired=e),disabled:o.ruleForm.noAlarm,onChange:n.handleUuterSupport},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("支持")])),_:1},8,["modelValue","disabled","onChange"])])),_:1})])),(0,l.createVNode)(u,{label:"条件描述",style:{width:"100%"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{modelValue:o.ruleForm.desc,"onUpdate:modelValue":t[6]||(t[6]=e=>o.ruleForm.desc=e),maxlength:"100",type:"textarea",class:(0,l.normalizeClass)({"input-focus":o.inputFocus}),"show-word-limit":"",placeholder:"请填写条件描述，最多100字符",onFocus:t[7]||(t[7]=e=>o.inputFocus=!0),onBlur:t[8]||(t[8]=e=>o.inputFocus=!1)},null,8,["modelValue","class"])])),_:1})])),_:1},8,["model","rules"])}var B=a(1868),D={props:{fragmentListData:{type:Object,default(){return{}}},singData:{type:Object,default(){return{}}}},data(){return{inputFocus:!1,ruleForm:{componentId:"",deviceCommand:"",stdDesc:"",isRequired:!1,noMessage:!1,noAlarm:!1,desc:"",operationSign:"equal",operationSignList:[{key:"equal",value:"等于"}],deviceSkillObject:[],key:{desc:"",value:"",id:""},value:{value:"",desc:"",required:!1},params:[],variantsParamList:null,isDeviceSkill:!1,variantsList:null,inputValue:"",commandParamSelect:""},source:this.$route.query.source||"",rules:{componentId:[{required:!0,message:"请选择设备产品类型",trigger:"change"}],deviceCommand:[{required:!0,message:"请选择设备命令",trigger:"change"}],commandParamSelect:[{required:!0,message:"请选择命令参数",trigger:"blur"}],inputValue:[{required:!0,message:"请输入命令参数",trigger:"blur"},{validator:(e,t,a)=>{const r={variantsList:this.ruleForm.variantsList,propValType:this.ruleForm.variantsList.propValType};this.getVariantsValue(r,t,a)},trigger:"blur"}]},deviceProductTypeList:[],deviceCommandList:[],inputPlaceHolder:"",editData:this.singData}},watch:{"ruleForm.componentId":{handler(e,t){if(console.log(e,"val---"),e){t&&e!==t&&(this.editData={});const a=this.deviceProductTypeList.filter((t=>t.id===e));this.ruleForm.stdDesc=a[0].prodtypeName,this.ruleForm.prodtypeName=a[0].prodtypeName,this.ruleForm.prodtypeCode=a[0].prodtypeCode,this.handleDeviceCommand()}},immediate:!0,deep:!0}},mounted(){this.handleDeviceProductType(),n(this.$emit,this.ruleForm)},methods:{handleUuterSupport(e){this.ruleForm.value.required=e},handleDeviceParamSelect(e,t){this.ruleForm.params[t].operationSign=e,this.$forceUpdate()},handleDeviceProductType(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/prodtype/getAllProdtypeList":"/developerportal/developer/prodtype/getAllProdtypeList",(0,B.U)("post",e).then((e=>{if("00000"===e.retCode)return this.deviceProductTypeList=e.data,!0})).then((()=>{"{}"!==JSON.stringify(this.editData)&&(this.ruleForm.componentId=this.editData.componentId)}))},handleDeviceCommand(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/prodtypeFunction/getProdtypeConditionFunctionList":"/developerportal/developer/prodtypeFunction/getProdtypeConditionFunctionList",(0,B.U)("post",e,{prodtypeId:this.ruleForm.componentId}).then((e=>{if("00000"===e.retCode)return e.data.map((e=>{console.log(e.type),"skill"==e.type&&(e.description="(语音)"+e.description),"deviceSkill"==e.type&&(e.description="(技)"+e.description)})),this.deviceCommandList=e.data,this.$nextTick((()=>{this.$refs.diffForm.clearValidate("deviceCommand"),this.ruleForm.isDeviceSkill=!1,this.ruleForm.noMessage=!1,this.ruleForm.deviceSkillObject=[],this.ruleForm.params=[],this.ruleForm.variantsParamList=null,this.ruleForm.variantsList=null,this.ruleForm.inputValue="",this.ruleForm.commandParamSelect="",this.ruleForm.operationSignList=[{key:"equal",value:"等于"}]})),this.ruleForm.deviceCommand="",!0})).then((()=>{"{}"!==JSON.stringify(this.editData)&&(this.ruleForm.deviceCommand=this.editData.key.id,this.handleDeviceCommandList(this.ruleForm.deviceCommand))}))},handleDeviceCommandList(e){console.log("选中的值",e),this.$refs.diffForm.clearValidate(),"{}"!==JSON.stringify(this.editData)&&e!==this.editData.key.id&&(this.editData={}),this.ruleForm.deviceSkillObject=[],this.ruleForm.isDeviceSkill=!1,this.ruleForm.operationSign="equal",this.ruleForm.operationSignList=[{key:"equal",value:"等于"}],this.ruleForm.variantsParamList=null,this.ruleForm.variantsList=null,this.ruleForm.inputValue="",this.ruleForm.commandParamSelect="",this.ruleForm.isRequired=!1,this.ruleForm.params=[];const t=this.deviceCommandList.filter((t=>t.id===e));if("property"===t[0].type)if(this.ruleForm.isDeviceSkill=!1,this.ruleForm.params=[],this.noAlarm=!1,this.noMessage=!1,this.ruleForm.key={desc:t[0].description,value:t[0].name,id:t[0].id},"{}"!==JSON.stringify(this.editData)&&this.$set(this.ruleForm,"desc",this.editData.desc),"int"==t[0].valType){const e=JSON.parse(t[0].variants);this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType,this.ruleForm.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.value.value),this.$set(this.ruleForm,"value",this.editData.value),this.$set(this.ruleForm,"operationSign",this.editData.operationSign),this.$set(this.ruleForm,"isRequired",this.editData.value.required))}else if("bool"==t[0].valType||"enum"==t[0].valType){const e=JSON.parse(t[0].variants);e.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue.toString())})),this.ruleForm.variantsList=e,"bool"==t[0].valType&&(this.ruleForm.operationSignList=[{key:"equal",value:"等于"}]),"enum"==t[0].valType&&(this.ruleForm.operationSignList=[{key:"equal",value:"等于"},{key:"unequal",value:"不等于"}]),"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"commandParamSelect",this.editData.value.value),this.$set(this.ruleForm,"value",this.editData.value),this.$set(this.ruleForm,"operationSign",this.editData.operationSign),this.$set(this.ruleForm,"isRequired",this.editData.value.required))}else if("double"==t[0].valType){const e=JSON.parse(t[0].variants);this.ruleForm.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType,"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.value.value),this.$set(this.ruleForm,"operationSign",this.editData.operationSign),this.$set(this.ruleForm,"value",this.editData.value),this.$set(this.ruleForm,"isRequired",this.editData.value.required))}else"string"==t[0].valType&&(void 0===t[0].variants?this.ruleForm.variantsList={}:this.ruleForm.variantsList=JSON.parse(t[0].variants),this.ruleForm.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"},{key:"greaterThanEqual",value:"高于或等于"},{key:"unequal",value:"不等于"},{key:"lessThanEqual",value:"低于或等于"}],this.inputPlaceHolder="",this.ruleForm.variantsList.propValType="string","{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.value.value),this.$set(this.ruleForm,"value",this.editData.value),this.$set(this.ruleForm,"operationSign",this.editData.operationSign),this.$set(this.ruleForm,"isRequired",this.editData.value.required)));"deviceSkill"===t[0].type?(this.ruleForm.key={desc:t[0].stdDescription,value:t[0].name,id:t[0].id,type:"deviceSkill"},"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"desc",this.editData.desc),this.$set(this.ruleForm,"params",this.editData.params)),this.ruleForm.isDeviceSkill=!0,this.ruleForm.deviceSkillObject=t[0].prodtypeFunctionSubDtoList?t[0].prodtypeFunctionSubDtoList:[],this.ruleForm.deviceSkillObject.length>0?this.ruleForm.deviceSkillObject.map(((e,t)=>{this.$set(e,"param","");const a={desc:e.description,key:{desc:e.description,id:e.id,type:"deviceSkill",value:e.propName},logicalSign:"AND",operationSign:"equal",value:{desc:"",required:!1,value:""}};if("{}"===JSON.stringify(this.editData)&&this.ruleForm.params.push(a),"enum"==e.propValType){if(e.variants){const t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"},{key:"unequal",value:"不等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else if("string"==e.propValType)e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入字符串",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"},{key:"greaterThanEqual",value:"高于或等于"},{key:"unequal",value:"不等于"},{key:"lessThanEqual",value:"低于或等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1);else if("bool"==e.propValType){if(e.variants){const t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else e.propValType,e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",Number(this.editData.params[t].value.value)),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)})):this.ruleForm.params=[]):this.ruleForm.isDeviceSkill=!1,"message"==t[0].type?(this.ruleForm.noMessage=!0,this.ruleForm.key={desc:t[0].stdDescription,value:t[0].name,id:t[0].id,type:"message"},"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"desc",this.editData.desc),this.$set(this.ruleForm,"params",this.editData.params)),this.ruleForm.deviceSkillObject=t[0].prodtypeFunctionSubDtoList?t[0].prodtypeFunctionSubDtoList:[],this.ruleForm.deviceSkillObject.length>0?this.ruleForm.deviceSkillObject.map(((e,t)=>{this.$set(e,"param","");const a={desc:e.description,key:{desc:e.description,id:e.id,type:"message",value:e.propName},logicalSign:"AND",operationSign:"equal",value:{desc:"",required:!1,value:""}};if("{}"===JSON.stringify(this.editData)&&this.ruleForm.params.push(a),"enum"==e.propValType){if(e.variants){const t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"},{key:"unequal",value:"不等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else if("string"==e.propValType)e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入字符串",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"},{key:"greaterThanEqual",value:"高于或等于"},{key:"unequal",value:"不等于"},{key:"lessThanEqual",value:"低于或等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1);else if("bool"==e.propValType){if(e.variants){const t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else if("int"==e.propValType)if("1"===e.exchangeType){if(e.exchangeVariants){const t=this.isJSON_test(e.exchangeVariants)?JSON.parse(e.exchangeVariants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"},{key:"unequal",value:"不等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",Number(this.editData.params[t].value.value)),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1);else e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",Number(this.editData.params[t].value.value)),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)})):this.ruleForm.params=[]):this.ruleForm.noMessage=!1,"alarm"==t[0].type?(this.ruleForm.noAlarm=!0,this.ruleForm.params=[],this.ruleForm.key={desc:t[0].description,value:t[0].name,id:t[0].id},this.ruleForm.value={desc:"",required:!1,value:""},"{}"!==JSON.stringify(this.editData)&&this.$set(this.ruleForm,"desc",this.editData.desc)):this.ruleForm.noAlarm=!1},isJSON_test(e){if("string"==typeof e)try{var t=JSON.parse(e);return console.log(t),!0}catch(a){return!1}},getVariantsValue(e,t,a){if(e.variantsList&&t){if("double"===e.propValType&&(this.$vertifyMethods.isDouble(t,2)||a("数据不符合要求"),parseFloat(t)<parseFloat(e.variantsList.minValue)||parseFloat(t)>parseFloat(e.variantsList.maxValue)||parseFloat(t)%parseFloat(e.variantsList.step)!==0?a("参数值数据格式不合法，请重新填写"):a()),"int"===e.propValType){let r=/^[0-9]*$/;r.test(t)||a("数据不符合要求"),console.log(Number(t),Number(e.variantsList.minValue)),Number(t)<Number(e.variantsList.minValue)||Number(t)>Number(e.variantsList.maxValue)||Number(t)%Number(e.variantsList.step)!==0?a("参数值数据格式不合法，请重新填写"):a()}"string"===e.propValType&&a()}else a()},handleSkillSelect(e,t,a){"select"===a?this.ruleForm.deviceSkillObject[t].variantsList.filter((a=>{a.stdValue===e&&(this.ruleForm.params[t].value={desc:a.description,required:this.ruleForm.deviceSkillObject[t].require,value:e})})):"input"===a?this.ruleForm.params[t].value={desc:e,required:this.ruleForm.deviceSkillObject[t].require,value:e}:(this.$set(this.ruleForm.deviceSkillObject[t],"require",e),this.ruleForm.params[t].value.required=e,this.$forceUpdate())},resetFormData(){this.$refs.diffForm.resetFields()},handleChangeCommad(e){e&&this.$refs.diffForm.clearValidate("commandParamSelect");const t=this.ruleForm.variantsList.filter((t=>t.stdValue===e));this.ruleForm.value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleChangeSelectParamSet(e){const t=this.ruleForm.variantsParamList.filter((t=>t.stdValue===e));this.ruleForm.args[0].value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleChangeParamSet(e){let t;this.ruleForm.variantsList.unit&&(t=e.target.value+this.ruleForm.variantsList.unit),this.ruleForm.args[0].value={desc:t,value:e.target.value,required:this.ruleForm.isRequired}},handleChangeInput(e){let t;t=this.ruleForm.variantsList.unit?e.target.value+this.ruleForm.variantsList.unit:e.target.value,this.ruleForm.value={desc:t,value:e.target.value,required:this.ruleForm.isRequired}}}},A=a(3744);const L=(0,A.Z)(D,[["render",w]]);var E=L;const T=(0,l.createElementVNode)("span",{style:{margin:"0 6px"}},"时",-1),P=(0,l.createElementVNode)("span",{style:{"margin-left":"6px"}},"分",-1);function I(e,t,a,r,o,n){const i=(0,l.resolveComponent)("el-option"),s=(0,l.resolveComponent)("el-select"),u=(0,l.resolveComponent)("el-form-item"),c=(0,l.resolveComponent)("el-checkbox"),d=(0,l.resolveComponent)("el-checkbox-group"),p=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(p,{ref:"diffForm",model:o.value,class:"common-form","label-width":"100px","label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",null,[(0,l.createVNode)(u,{label:"时间设置",class:"item-required"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.value.hours,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.hours=e),style:{width:"122px"},"popper-class":"selectCustomAttrs",placeholder:""},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setHour,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),T,(0,l.createVNode)(s,{modelValue:o.value.minutes,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.minutes=e),style:{width:"122px"},"popper-class":"selectCustomAttrs",placeholder:""},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setMinutes,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),P])),_:1})]),(0,l.createVNode)(u,{label:"重复设置",class:"item-required"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.value.repeatType,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.repeatType=e),style:{width:"100%"},"popper-class":"selectCustomAttrs",onChange:n.handleRepeatSet},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.repeatTypeMap,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,l.createVNode)(u,null,{default:(0,l.withCtx)((()=>[4==o.value.repeatType?((0,l.openBlock)(),(0,l.createBlock)(d,{key:0,modelValue:o.value.repeatTypeArr,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.repeatTypeArr=e),onChange:n.changeBox},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.customSetList,(e=>((0,l.openBlock)(),(0,l.createBlock)(c,{key:e.id,label:e.id},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.description),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","onChange"])):(0,l.createCommentVNode)("",!0)])),_:1})])),_:1},8,["model"])}var q=function(e,t){"undefined"===typeof t&&(t=!1);for(var a=new Array(e),r=0;r<e;r++)a[r]=t&&r<10?"0"+r.toString():r.toString();return a},O={initHMS:q},M={props:{singData:{type:Object,default(){return{}}}},data(){return{value:{desc:"",required:!0,value:"",minutes:"00",hours:"00",repeatType:1,repeatTypeArr:[]},ruleForm:{componentId:"",key:{id:"",value:"",desc:""},logicalSign:"OR",operationSign:"equal"},source:this.$route.query.source||"",setHour:null,setMinutes:null,repeatTypeMap:[{description:"每天",id:1},{description:"工作日(周一至周五)",id:2},{description:"休息日(周六至周日)",id:3},{description:"自定义",id:4}],customSetList:[{description:"星期日",id:1},{description:"星期一",id:2},{description:"星期二",id:3},{description:"星期三",id:4},{description:"星期四",id:5,checked:!1},{description:"星期五",id:6,checked:!1},{description:"星期六",id:7,checked:!1}]}},mounted(){if(this.setHour=O.initHMS(24,!0),this.setMinutes=O.initHMS(60,!0),this.getTimer(),"{}"!==JSON.stringify(this.singData)){const e=this.singData.value.value.split("?");this.value.hours=e[0].split(" ")[1],this.value.minutes=e[0].split(" ")[2];const t=e[1].split("*")[1].split(" ")[1];if("1,2,3,4,5,6,7"==t)this.value.repeatType=1;else if("2,3,4,5,6"===t)this.value.repeatType=2;else if("1,7"===t)this.value.repeatType=3;else{this.value.repeatType=4;const t=e[1].split(" ")[2].split(",");t.map((e=>{this.value.repeatTypeArr.push(Number(e))}))}}n(this.$emit,this.value)},methods:{getTimer(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/component/cmptPropList/TIMER":"/developerportal/developer/component/cmptPropList/TIMER",(0,B.U)("get",e).then((e=>{"00000"===e.retCode&&(this.ruleForm={componentId:e.data[0].componentId,key:{id:e.data[0].id,value:e.data[0].name,desc:e.data[0].description}})}))},handleRepeatSet(){this.value.repeatTypeArr=[]},resetFormData(){this.value={minutes:"00",hours:"00",repeatType:1,repeatTypeArr:[]}},changeBox(e){console.log(e)}}};const _=(0,A.Z)(M,[["render",I]]);var J=_;const U={class:"typeinput"},j={key:0,class:"unit"};function R(e,t,a,r,o,n){const i=(0,l.resolveComponent)("el-option"),s=(0,l.resolveComponent)("el-select"),u=(0,l.resolveComponent)("el-form-item"),c=(0,l.resolveComponent)("el-input"),d=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(d,{ref:"diffForm",model:o.ruleForm,class:"weather-condition common-form",rules:o.rules,"label-width":"100px","label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{label:"设备命令",prop:"id"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.id,"onUpdate:modelValue":t[0]||(t[0]=e=>o.ruleForm.id=e),style:{width:"100%"},placeholder:"请选择设备命令","popper-class":"selectCustomAttrs",onChange:n.handleDeviceCommand},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.deviceCommandList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,l.createElementVNode)("div",null,[(0,l.createVNode)(u,{label:"命令参数",class:"deviceParam"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.operationSign,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ruleForm.operationSign=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",disabled:""==o.ruleForm.id},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.operationSignList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.name,label:e.value,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),o.selectedWeatherCondition.length>0&&"enum"==o.selectedWeatherCondition[0].valType||""==o.ruleForm.id?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,prop:"deviceParam",class:"deviceParamSelect"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.deviceParam,"onUpdate:modelValue":t[2]||(t[2]=e=>o.ruleForm.deviceParam=e),style:{"margin-left":"16px",width:"calc(100% - 16px)"},disabled:""==o.ruleForm.id,"popper-class":"selectCustomAttrs",onChange:n.handleChangeCommandParam},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.equalList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","onChange"])])),_:1})):(0,l.createCommentVNode)("",!0),o.selectedWeatherCondition.length>0&&"int"==o.selectedWeatherCondition[0].valType?((0,l.openBlock)(),(0,l.createBlock)(u,{key:1,prop:"deviceInputParam",class:"deviceParamSelect"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",U,[(0,l.createVNode)(c,{modelValue:o.ruleForm.deviceInputParam,"onUpdate:modelValue":t[3]||(t[3]=e=>o.ruleForm.deviceInputParam=e),placeholder:o.dataPlaceHolder,disabled:""==o.ruleForm.id,onBlur:n.handleBlur},null,8,["modelValue","placeholder","disabled","onBlur"]),null!=o.equalList?((0,l.openBlock)(),(0,l.createElementBlock)("span",j,(0,l.toDisplayString)(o.equalList.unit),1)):(0,l.createCommentVNode)("",!0)])])),_:1})):(0,l.createCommentVNode)("",!0)])),_:1})]),(0,l.createVNode)(u,{label:"条件描述",style:{width:"100%"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{modelValue:o.ruleForm.desc,"onUpdate:modelValue":t[4]||(t[4]=e=>o.ruleForm.desc=e),type:"textarea",maxlength:"100",rows:2,class:(0,l.normalizeClass)({"input-focus":o.inputFocus}),"show-word-limit":"",placeholder:"请填写条件描述，最多100字符",onFocus:t[5]||(t[5]=e=>o.inputFocus=!0),onBlur:t[6]||(t[6]=e=>o.inputFocus=!1)},null,8,["modelValue","class"])])),_:1})])),_:1},8,["model","rules"])}var H={props:{singData:{type:Object,default(){return{}}}},data(){return{inputFocus:!1,ruleForm:{componentId:"",id:"",deviceParam:"",deviceInputParam:"",operationSign:"equal",desc:"",key:{desc:"",id:"",value:""},value:{desc:"",required:!0,value:""}},rules:{id:[{required:!0,message:"请选择设备命令",trigger:"change"}],deviceParam:[{required:!0,message:"命令参数数据格式不合法，请重新填写",trigger:"change"}],deviceInputParam:[{required:!0,validator:(e,t,a)=>{t?t<this.equalList.minValue||t>this.equalList.maxValue||t%this.equalList.step!==0?a(new Error("命令参数数据格式不合法，请重新填写")):a():a(new Error("数据不符合要求"))},trigger:"blur"}]},source:this.$route.query.source||"",deviceCommandList:[],selectedWeatherCondition:[],equalList:null,operationSignList:[{name:"equal",value:"等于"}],dataPlaceHolder:""}},watch:{"ruleForm.id":{handler(e){if(e){const t=this.deviceCommandList.filter((t=>t.id==e));this.ruleForm.key={desc:t[0].description,id:t[0].id,value:t[0].name},this.ruleForm.componentId=t[0].componentId,"enum"==t[0].valType&&(this.equalList=JSON.parse(t[0].variants),t[0].isLegal=!0,this.operationSignList=[{name:"equal",value:"等于"}],t[0].operationSign="equal",this.dataPlaceHolder=""),"int"==t[0].valType&&(this.equalList=JSON.parse(t[0].variants),t[0].isLegal=!0,this.operationSignList=[{name:"greaterThan",value:"高于"},{name:"lessThan",value:"低于"}],this.dataPlaceHolder="请输入"+this.equalList.minValue+"到"+this.equalList.maxValue+",步长为"+this.equalList.step),this.selectedWeatherCondition=t,this.ruleForm.operationSign=this.operationSignList[0].name}}}},mounted(){this.$refs.diffForm.clearValidate(),this.getDeivceCommand(),n(this.$emit,this.ruleForm)},methods:{getDeivceCommand(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/component/cmptPropList/WEATHER":"/developerportal/developer/component/cmptPropList/WEATHER",(0,B.U)("get",e).then((e=>{"00000"===e.retCode&&(this.deviceCommandList=e.data)})).then((()=>{if("{}"!==JSON.stringify(this.singData)){this.ruleForm={...this.singData},this.ruleForm.id=this.singData.key.id;const e=this.deviceCommandList.filter((e=>e.id==this.ruleForm.id));"enum"==e[0].valType&&"{}"!==JSON.stringify(this.singData)&&this.$set(this.ruleForm,"deviceParam",this.singData.value.value),"int"==e[0].valType&&"{}"!==JSON.stringify(this.singData)&&this.$set(this.ruleForm,"deviceInputParam",this.singData.value.value)}}))},handleDeviceCommand(){this.$refs.diffForm.clearValidate("deviceParam"),this.$refs.diffForm.clearValidate("deviceInputParam"),this.ruleForm.deviceInputParam="",this.ruleForm.deviceParam=""},handleBlur(e){this.ruleForm.value={desc:e.target.value+this.equalList.unit,required:!0,value:e.target.value}},handleChangeCommandParam(e){const t=this.equalList.filter((t=>t.stdValue==e));this.ruleForm.value={desc:t[0].description,required:!0,value:e}},resetFormData(){this.ruleForm={id:"",deviceParam:"",operationSign:"equal",desc:""},this.equalList=null,this.selectedWeatherCondition=[],this.$refs.diffForm.resetFields(),this.operationSignList=[{name:"equal",value:"等于"}]}}};const Z=(0,A.Z)(H,[["render",R]]);var Q=Z;function G(e,t,a,r,o,n){const i=(0,l.resolveComponent)("el-option"),s=(0,l.resolveComponent)("el-select"),u=(0,l.resolveComponent)("el-form-item"),c=(0,l.resolveComponent)("el-input"),d=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(d,{ref:"diffForm",model:o.ruleForm,rules:o.rules,class:"geography-condition common-form","label-width":"100px","label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{label:"设备命令",prop:"id"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.id,"onUpdate:modelValue":t[0]||(t[0]=e=>o.ruleForm.id=e),style:{width:"100%"},placeholder:"请选择设备命令","popper-class":"selectCustomAttrs",onChange:n.handleDeviceCommand},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.deviceCommandList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,l.createElementVNode)("div",null,[(0,l.createVNode)(u,{label:"命令参数",class:"deviceParam"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.operationSign,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ruleForm.operationSign=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",disabled:""==o.ruleForm.id},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.operationSignList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.name,label:e.value,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),o.selectedWeatherCondition.length>0&&"enum"==o.selectedWeatherCondition[0].valType||""==o.ruleForm.id?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,prop:"deviceParam",class:"deviceParamSelect"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.deviceParam,"onUpdate:modelValue":t[2]||(t[2]=e=>o.ruleForm.deviceParam=e),style:{"margin-left":"16px",width:"199%"},disabled:""==o.ruleForm.id,placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:n.handleChangeCommandParam},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.equalList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","onChange"])])),_:1})):(0,l.createCommentVNode)("",!0)])),_:1})]),(0,l.createVNode)(u,{label:"条件描述",style:{width:"100%"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{modelValue:o.ruleForm.desc,"onUpdate:modelValue":t[3]||(t[3]=e=>o.ruleForm.desc=e),type:"textarea",maxlength:"100",rows:2,class:(0,l.normalizeClass)({"input-focus":o.inputFocus}),"show-word-limit":"",placeholder:"请填写条件描述，最多100字符",onFocus:t[4]||(t[4]=e=>o.inputFocus=!0),onBlur:t[5]||(t[5]=e=>o.inputFocus=!1)},null,8,["modelValue","class"])])),_:1})])),_:1},8,["model","rules"])}var K={props:{singData:{type:Object,default(){return{}}}},data(){return{inputFocus:!1,ruleForm:{componentId:"",id:"",deviceParam:"",operationSign:"equal",desc:"",key:{desc:"",id:"",value:""},value:{desc:"",required:!0,value:""}},source:this.$route.query.source||"",rules:{id:[{required:!0,message:"请选择设备命令",trigger:"change"}],deviceParam:[{required:!0,message:"命令参数数据格式不合法，请重新填写",trigger:"change"}]},deviceCommandList:[],selectedWeatherCondition:[],equalList:null,operationSignList:[{name:"equal",value:"等于"}]}},watch:{"ruleForm.id":{handler(e){if(e){const t=this.deviceCommandList.filter((t=>t.id==e));this.ruleForm.key={desc:t[0].description,id:t[0].id,value:t[0].name},this.ruleForm.componentId=t[0].componentId,"enum"==t[0].valType&&(this.equalList=JSON.parse(t[0].variants),t[0].isLegal=!0,this.operationSignList=[{name:"equal",value:"等于"}],t[0].operationSign="equal"),this.selectedWeatherCondition=t,this.ruleForm.operationSign=this.operationSignList[0].name}}}},mounted(){this.$refs.diffForm.clearValidate(),this.getDeivceCommand()},methods:{getDeivceCommand(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/component/cmptPropList/GEOFENCE":"/developerportal/developer/component/cmptPropList/GEOFENCE",(0,B.U)("get",e).then((e=>{"00000"===e.retCode&&(this.deviceCommandList=e.data)})).then((()=>{"{}"!==JSON.stringify(this.singData)&&(this.ruleForm={...this.singData},this.$set(this.ruleForm,"deviceParam",this.singData.value.value),this.ruleForm.id=this.singData.key.id)}))},handleDeviceCommand(){this.$refs.diffForm.clearValidate("deviceParam")},handleChangeCommandParam(e){const t=this.equalList.filter((t=>t.stdValue==e));this.ruleForm.value={desc:t[0].description,required:!0,value:e}},resetFormData(){this.ruleForm={id:"",deviceParam:"",operationSign:"equal",desc:""},this.equalList=null,this.selectedWeatherCondition=[],this.$refs.diffForm.resetFields(),this.operationSignList=[{name:"equal",value:"等于"}]}}};const z=(0,A.Z)(K,[["render",G]]);var W=z;const Y=(0,l.createElementVNode)("span",null,"无",-1),X={key:2,class:"diff-param"},$={class:"command-param"},ee={class:"command-left"},te={key:0,class:"command-right"},ae={key:1,class:"command-right"},re={class:"input-style"},oe={key:2,class:"device-unit"},le={class:"device-unit"};function ne(e,t,a,r,o,n){const i=(0,l.resolveComponent)("el-option"),s=(0,l.resolveComponent)("el-select"),u=(0,l.resolveComponent)("el-form-item"),c=(0,l.resolveComponent)("el-input"),d=(0,l.resolveComponent)("el-checkbox"),p=(0,l.resolveComponent)("h-button"),m=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(m,{ref:"diffForm",class:"command-action common-form",model:o.ruleForm,rules:o.rules,"label-width":"120px","label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{label:"设备产品类型",prop:"componentId"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.componentId,"onUpdate:modelValue":t[0]||(t[0]=e=>o.ruleForm.componentId=e),"popper-class":"selectCustomAttrs",filterable:"",placeholder:"请选择设备产品类型"},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.deviceProductTypeList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.id,label:e.prodtypeName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(u,{label:"设备命令",prop:"deviceCommand"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.deviceCommand,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ruleForm.deviceCommand=e),"popper-class":"selectCustomAttrs",filterable:"",placeholder:"请选择设备命令",onChange:n.handleDeviceCommandList},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.deviceCommandList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),o.ruleForm.deviceSkillObject.length>0&&o.ruleForm.isDeviceSkill?((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,{key:0},(0,l.renderList)(o.ruleForm.deviceSkillObject,((e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:e.id,class:"diff-param"},[(0,l.createVNode)(u,{label:"参数名称"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(e.description),1)])),_:2},1024),"enum"===e.propValType||"bool"===e.propValType?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,label:"参数值",prop:"deviceSkillObject."+t+".param",rules:[{required:!0,message:"参数值不能为空",trigger:"change"}]},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:e=>n.handleSkillSelect(e,t,"select")},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.variantsList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])):((0,l.openBlock)(),(0,l.createBlock)(u,{key:1,label:"参数值",prop:"deviceSkillObject."+t+".param",rules:[{required:!0,message:"参数值不能为空",trigger:"blur"},{validator:(t,a,r)=>{n.getVariantsValue(e,a,r)}}]},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,style:{width:"100%"},placeholder:e.variantsList?""+("请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step):"请输入字符串值",onChange:e=>n.handleSkillSelect(e,t,"input")},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"])])),_:2},1032,["prop","rules"])),(0,l.createVNode)(u,{label:"用户编辑",prop:"deviceSkillObject."+t+".require",class:"checkbox-style"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{modelValue:e.require,"onUpdate:modelValue":t=>e.require=t,onChange:e=>n.handleSkillSelect(e,t,"check")},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("支持")])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])])))),128)):0===o.ruleForm.deviceSkillObject.length&&o.ruleForm.isDeviceSkill?((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,{key:1},[(0,l.createVNode)(u,{label:"命令参数",prop:"commandParam"},{default:(0,l.withCtx)((()=>[Y])),_:1}),(0,l.createVNode)(u,{label:"用户编辑",class:"checkbox-style"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{disabled:!0},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("支持")])),_:1})])),_:1})],64)):((0,l.openBlock)(),(0,l.createElementBlock)("div",X,[(0,l.createVNode)(u,{label:"命令参数",class:"my-select-input deviceParam"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",$,[(0,l.createElementVNode)("div",ee,[(0,l.createVNode)(p,{type:"third",disabled:"group"==o.ruleForm.propClass||o.ruleForm.isSkill},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("定量")])),_:1},8,["disabled"])]),""!==o.ruleForm.deviceCommand&&"group"!==o.ruleForm.propClass&&"skill"!==o.ruleForm.propClass?((0,l.openBlock)(),(0,l.createElementBlock)("div",te,[Array.isArray(o.ruleForm.variantsList)?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,prop:"commandParamSelect"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.commandParamSelect,"onUpdate:modelValue":t[2]||(t[2]=e=>o.ruleForm.commandParamSelect=e),style:{"max-width":"100%"},placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:n.handleChangeCommad},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.ruleForm.variantsList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):((0,l.openBlock)(),(0,l.createBlock)(u,{key:1,prop:"inputValue"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)("string"===o.ruleForm.variantsList.propValType?"input-string":"input-style")},[(0,l.createVNode)(c,{modelValue:o.ruleForm.inputValue,"onUpdate:modelValue":t[3]||(t[3]=e=>o.ruleForm.inputValue=e),type:"text",placeholder:o.inputPlaceHolder,onBlur:n.handleChangeInput},null,8,["modelValue","placeholder","onBlur"])],2)])),_:1}))])):(0,l.createCommentVNode)("",!0),"skill"===o.ruleForm.propClass&&o.ruleForm.variantsList.length>0?((0,l.openBlock)(),(0,l.createElementBlock)("div",ae,[Array.isArray(o.ruleForm.variantsList)?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,prop:"commandParamSelect"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.commandParamSelect,"onUpdate:modelValue":t[4]||(t[4]=e=>o.ruleForm.commandParamSelect=e),placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:n.handleSkillChangeCommad},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.ruleForm.variantsList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):((0,l.openBlock)(),(0,l.createBlock)(u,{key:1,prop:"inputValue"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",re,[(0,l.createVNode)(c,{modelValue:o.ruleForm.inputValue,"onUpdate:modelValue":t[5]||(t[5]=e=>o.ruleForm.inputValue=e),type:"text",placeholder:o.inputPlaceHolder,onBlur:n.handleChangeInput},null,8,["modelValue","placeholder","onBlur"])])])),_:1}))])):(0,l.createCommentVNode)("",!0),!Array.isArray(o.ruleForm.variantsList)&&o.ruleForm.variantsList&&o.ruleForm.variantsList.unit?((0,l.openBlock)(),(0,l.createElementBlock)("div",oe,[(0,l.createElementVNode)("span",le,(0,l.toDisplayString)(o.ruleForm.variantsList.unit),1)])):(0,l.createCommentVNode)("",!0)])])),_:1}),""!==o.ruleForm.commandParamSelect&&o.ruleForm.deviceSkillObject.length>0&&("enum"===o.ruleForm.deviceSkillObject[0].propValType||"bool"===o.ruleForm.deviceSkillObject[0].propValType)?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,prop:"paramSelectSet",label:"参数配置"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{modelValue:o.ruleForm.paramSelectSet,"onUpdate:modelValue":t[6]||(t[6]=e=>o.ruleForm.paramSelectSet=e),placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:n.handleChangeSelectParamSet},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.ruleForm.variantsParamList,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):(0,l.createCommentVNode)("",!0),""!==o.ruleForm.commandParamSelect&&o.ruleForm.deviceSkillObject.length>0&&("string"===o.ruleForm.deviceSkillObject[0].propValType||"int"===o.ruleForm.deviceSkillObject[0].propValType||"double"===o.ruleForm.deviceSkillObject[0].propValType)?((0,l.openBlock)(),(0,l.createBlock)(u,{key:1,prop:"paramInputSet",label:"参数配置"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{modelValue:o.ruleForm.paramInputSet,"onUpdate:modelValue":t[7]||(t[7]=e=>o.ruleForm.paramInputSet=e),style:{width:"100%"},onBlur:n.handleChangeParamSet},null,8,["modelValue","onBlur"])])),_:1})):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(u,{label:"用户编辑",class:"checkbox-style"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{modelValue:o.ruleForm.isRequired,"onUpdate:modelValue":t[8]||(t[8]=e=>o.ruleForm.isRequired=e),disabled:"group"==o.ruleForm.propClass||o.ruleForm.isSkill},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("支持")])),_:1},8,["modelValue","disabled"])])),_:1})])),(0,l.createVNode)(u,{label:"动作描述"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{modelValue:o.ruleForm.description,"onUpdate:modelValue":t[9]||(t[9]=e=>o.ruleForm.description=e),maxlength:"100",type:"textarea",class:(0,l.normalizeClass)({"input-focus":o.inputFocus}),"show-word-limit":"",placeholder:"请填写动作描述，最多100字符",onFocus:t[10]||(t[10]=e=>o.inputFocus=!0),onBlur:t[11]||(t[11]=e=>o.inputFocus=!1)},null,8,["modelValue","class"])])),_:1})])),_:1},8,["model","rules"])}var ie={props:{fragmentListData:{type:Object,default(){return{}}},singData:{type:Object,default(){return{}}}},data(){return{inputFocus:!1,ruleForm:{componentId:"",deviceCommand:"",stdDesc:"",isRequired:!1,description:"",deviceSkillObject:[{param:"",require:!1}],args:[],operation:{desc:"",id:"",value:""},variantsParamList:null,isDeviceSkill:!1,isSkill:!1,propClass:"",variantsList:null,inputValue:"",commandParamSelect:"",paramSelectSet:"",paramInputSet:""},source:this.$route.query.source||"",rules:{componentId:[{required:!0,message:"请选择设备产品类型",trigger:"change"}],deviceCommand:[{required:!0,message:"请选择设备命令",trigger:"change"}],commandParamSelect:[{required:!0,message:"请选择命令参数",trigger:"blur"}],paramSelectSet:[{required:!0,message:"请选择参数配置",trigger:"change"}],paramInputSet:[{required:!0,message:"请输入参数配置",trigger:"blur"}],inputValue:[{required:!0,message:"请输入命令参数",trigger:"blur"},{validator:(e,t,a)=>{console.log(e,t,a),console.log(this.ruleForm.variantsList,"---");const r={variantsList:this.ruleForm.variantsList,propValType:this.ruleForm.variantsList.propValType};this.getVariantsValue(r,t,a)},trigger:"blur"}]},deviceSkillObjectRules:{deviceSkillObjectId:[{required:!0,message:"jaaa",trigger:"blur"},{validator:(e,t,a)=>{console.log(e,t,a)}}],deviceSkillObjectDesc:[{required:!0,message:"jaaa",trigger:"blur"},{validator:(e,t,a)=>{console.log(e),console.log(t),console.log(a)}}]},deviceProductTypeList:[],deviceCommandList:[],sceneDeviceCondition:{sceneInfo:null,status:null,FragmentList:null,triggerType:null},inputPlaceHolder:"",editData:this.singData}},watch:{"ruleForm.componentId":{handler(e,t){if(e){t&&e!==t&&(this.editData={});const a=this.deviceProductTypeList.filter((t=>t.id===e));this.ruleForm.stdDesc=a[0].prodtypeName,this.handleDeviceCommand()}},immediate:!0,deep:!0}},mounted(){this.handleDeviceProductType()},methods:{handleDeviceProductType(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/prodtype/getAllProdtypeList":"/developerportal/developer/prodtype/getAllProdtypeList",(0,B.U)("post",e).then((e=>{if("00000"===e.retCode)return this.deviceProductTypeList=e.data,!0})).then((()=>{"{}"!==JSON.stringify(this.editData)&&(this.ruleForm.componentId=this.editData.control.componentId)}))},handleDeviceCommand(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/prodtypeFunction/getProdtypeActionFunctionList":"/developerportal/developer/prodtypeFunction/getProdtypeActionFunctionList",(0,B.U)("post",e,{prodtypeId:this.ruleForm.componentId}).then((e=>{if("00000"===e.retCode)return e.data.map((e=>{console.log(e.type,e.valType,"----"),"skill"==e.type&&(e.description="(语音)"+e.description),"deviceSkill"==e.type&&(e.description="(技)"+e.description)})),this.deviceCommandList=e.data,this.$nextTick((()=>{this.$refs.diffForm.clearValidate("deviceCommand"),this.ruleForm.isDeviceSkill=!1,this.ruleForm.isSkill=!1,this.ruleForm.deviceSkillObject=[],this.ruleForm.args=[],this.ruleForm.variantsParamList=null,this.ruleForm.variantsList=null,this.ruleForm.inputValue="",this.ruleForm.commandParamSelect="",this.ruleForm.paramSelectSet="",this.ruleForm.paramInputSet="",this.ruleForm.propClass="",this.ruleForm.operation={desc:"",id:"",value:""}})),this.ruleForm.deviceCommand="",!0})).then((()=>{"{}"!==JSON.stringify(this.editData)&&(this.editData.control.args&&!this.editData.control.operation?this.ruleForm.deviceCommand=this.editData.control.args[0].name.id:this.ruleForm.deviceCommand=this.editData.control.operation.id,this.handleDeviceCommandList(this.ruleForm.deviceCommand))}))},handleDeviceCommandList(e){console.log("选中的值",e),this.$refs.diffForm.clearValidate(),this.ruleForm.isDeviceSkill=!1,this.ruleForm.isSkill=!1,this.ruleForm.deviceSkillObject=[],this.ruleForm.args=[],this.ruleForm.variantsParamList=null,this.ruleForm.variantsList=null,this.ruleForm.isRequired=!1,this.ruleForm.inputValue="",this.ruleForm.paramSelectSet="",this.ruleForm.paramInputSet="",this.ruleForm.commandParamSelect="","{}"!==JSON.stringify(this.editData)&&(this.editData.control.args&&!this.editData.control.operation?e!==this.editData.control.args[0].name.id?(this.editData={},this.$set(this.ruleForm,"args",[])):this.$set(this.ruleForm,"args",this.editData.control.args):e!==this.editData.control.operation.id?(this.editData={},this.$set(this.ruleForm,"args",[])):this.$set(this.ruleForm,"args",this.editData.control.args));const t=this.deviceCommandList.filter((t=>t.id===e));if("{}"!==JSON.stringify(this.editData)&&this.$set(this.ruleForm,"description",this.editData.description),"property"===t[0].type){this.ruleForm.isDeviceSkill=!1,this.ruleForm.isSkill=!1,this.ruleForm.propClass="";const e={name:{desc:t[0].description,id:t[0].id,value:t[0].propName}};if("{}"===JSON.stringify(this.editData)&&this.ruleForm.args.push(e),"int"==t[0].valType){const e=JSON.parse(t[0].variants);this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType,"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required))}else if("bool"==t[0].valType||"enum"==t[0].valType){const e=JSON.parse(t[0].variants);e.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),this.ruleForm.variantsList=e,"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"commandParamSelect",this.editData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required)),console.log(this.ruleForm.variantsList,"pro")}else if("double"==t[0].valType){const e=JSON.parse(t[0].variants);this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType,"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required))}else if("string"==t[0].valType){if(console.log(t[0],"data------------"),t[0].variants){const e=JSON.parse(t[0].variants);e.minValue?(this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType):this.ruleForm.variantsList={propValType:t[0].valType}}else this.ruleForm.variantsList={propValType:"string"};"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required))}}"group"===t[0].type&&(console.log(222),this.ruleForm.isDeviceSkill=!1,this.ruleForm.isSkill=!1,this.ruleForm.propClass="group",this.ruleForm.operation={desc:t[0].stdDescription,id:t[0].id,value:t[0].name},console.log("group")),"skill"===t[0].type&&(this.ruleForm.isDeviceSkill=!1,this.ruleForm.propClass="skill",this.ruleForm.operation={desc:t[0].stdDescription,id:t[0].id,value:t[0].name},this.ruleForm.deviceSkillObject=t[0].prodtypeFunctionSubDtoList?t[0].prodtypeFunctionSubDtoList:[],this.ruleForm.variantsList=this.ruleForm.deviceSkillObject,this.ruleForm.deviceSkillObject.length>0?(this.ruleForm.isSkill=!1,this.ruleForm.deviceSkillObject.map((e=>{const t={name:{desc:e.description,id:e.id,required:!1,value:e.propName},value:{desc:"",required:!1,value:""}};"{}"===JSON.stringify(this.editData)&&this.ruleForm.args.push(t),e.variants&&(this.ruleForm.variantsParamList=this.isJSON_test(e.variants)?JSON.parse(e.variants):[]),console.log(this.ruleForm.variantsParamList,"this.ruleForm.variantsParamList"),"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"commandParamSelect",this.singData.control.args[0].name.id),this.$set(this.ruleForm,"paramSelectSet",this.singData.control.args[0].value.value),this.$set(this.ruleForm,"paramInputSet",this.singData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required))})),console.log(this.ruleForm.args,"---this.ruleForm.args")):(this.ruleForm.args=[],this.ruleForm.isSkill=!0)),"deviceSkill"===t[0].type&&(console.log(444),this.ruleForm.isSkill=!1,this.ruleForm.propClass="deviceSkill",this.ruleForm.operation={desc:t[0].stdDescription,id:t[0].id,value:t[0].name},this.ruleForm.isDeviceSkill=!0,this.ruleForm.deviceSkillObject=t[0].prodtypeFunctionSubDtoList?t[0].prodtypeFunctionSubDtoList:[],this.ruleForm.deviceSkillObject.length>0?this.ruleForm.deviceSkillObject.map(((e,t)=>{this.$set(e,"param","");const a={name:{desc:e.description,id:e.id,required:!1,value:e.propName},value:{desc:"",required:!1,value:""}};if(console.log(e,"item------"),e.variants){let t;"enum"==e.propValType||"bool"==e.propValType?(t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[],t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")}))):t=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.variantsList=t}"{}"===JSON.stringify(this.editData)&&this.ruleForm.args.push(a),"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.control.args[t].value.value),this.$set(e,"require",this.editData.control.args[t].value.required)):e.require=!1})):this.ruleForm.args=[]),console.log(t,"data------")},isJSON_test(e){if("string"==typeof e)try{var t=JSON.parse(e);return console.log("转换成功："+t),!0}catch(a){return!1}},getVariantsValue(e,t,a){if(e.variantsList&&t){if("double"===e.propValType&&(this.$vertifyMethods.isDouble(t,2)||a("数据不符合要求"),parseFloat(t)<parseFloat(e.variantsList.minValue)||parseFloat(t)>parseFloat(e.variantsList.maxValue)||parseFloat(t)%parseFloat(e.variantsList.step)!==0?a("参数值数据格式不合法，请重新填写"):a()),"int"===e.propValType){let r=/^[0-9]*$/;r.test(t)||a("数据不符合要求"),Number(t)<Number(e.variantsList.minValue)||Number(t)>Number(e.variantsList.maxValue)||Number(t)%Number(e.variantsList.step)!==0?a("参数值数据格式不合法，请重新填写"):a()}"string"===e.propValType&&a()}else a()},handleSkillSelect(e,t,a){console.log(e,t,a),"select"===a?this.ruleForm.deviceSkillObject[t].variantsList.filter((a=>{a.stdValue===e&&(this.ruleForm.args[t].value={desc:a.description,required:this.ruleForm.deviceSkillObject[t].require,value:e})})):"input"===a?this.ruleForm.args[t].value={desc:e,required:this.ruleForm.deviceSkillObject[t].require,value:e}:(this.$set(this.ruleForm.deviceSkillObject[t],"require",e),console.log(this.ruleForm.args,"this.ruleForm.args"),this.ruleForm.args[t].value.required=e,this.$forceUpdate())},resetFormData(){this.$refs.diffForm.resetFields()},handleChangeCommad(e){console.log(e,"e----"),e&&this.$refs.diffForm.clearValidate("commandParamSelect"),console.log(this.ruleForm.variantsList," this.ruleForm.variantsList");const t=this.ruleForm.variantsList.filter((t=>t.stdValue===e));this.ruleForm.args[0].value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleSkillChangeCommad(e){e&&this.$refs.diffForm.clearValidate("commandParamSelect"),console.log(this.ruleForm.variantsList," this.ruleForm.variantsList");const t=this.ruleForm.variantsList.filter((t=>t.id===e));this.ruleForm.args[0].value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleChangeSelectParamSet(e){const t=this.ruleForm.variantsParamList.filter((t=>t.stdValue===e));this.ruleForm.args[0].value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleChangeParamSet(e){let t;console.log(e,"eeeeee"),t=this.ruleForm.variantsList.unit?e.target.value+this.ruleForm.variantsList.unit:e.target.value,this.ruleForm.args[0].value={desc:t,value:e.target.value,required:this.ruleForm.isRequired},console.log(this.ruleForm.args[0].value,"this.ruleForm.args[0].value")},handleChangeInput(e){let t;this.ruleForm.variantsList.unit&&(t=e.target.value+this.ruleForm.variantsList.unit),this.ruleForm.args[0].value={desc:t||e.target.value,value:e.target.value,required:this.ruleForm.isRequired},console.log(this.ruleForm.args[0].value)}}};const se=(0,A.Z)(ie,[["render",ne]]);var ue=se,ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAMCAYAAACNzvbFAAAAAXNSR0IArs4c6QAAAcpJREFUOE+lkkFIFHEUxn9vdnZ0MqVL0SGCWg956OAhKOmSEBREgSVFRHWJpohMT0URXSoWKg9BLeEh2DoEIWwUVmCkdIiMIkjyohfr4CHCHdrZ2RnnxSi6u4m24YP/7f1/7/ve+6TZySsrKVVXxRhRtHci0/Q8RsmKoQuCRBW9OZ5pulwFtS0wpCxbFXoO1HE75+OVarEjGqH7q6D9F1eRWm9gmfC7CGcyHjtbEtx7WcIPaoGCIm8W2e/YbtKxI8mxXo9kAuJBB9MFrh2pY3W9zA6d/BnR1VdkT6vJqd0W8VEO3ypQ8AFVd1lorHj0biNbz7v0nbMZ/BKSHQoYuNrAjadFTrZbDH0NeTwcVDn5L+iD1yWGR2fIXrB58i5gYirixK4kbVtMDqULTE3PBUmaT0/nEWmc31il/b+V/nKV3EhA+rjN0TsFNq0zCCPlSmc9TsZj7Hs0B0057qCg7fPQlg0G8et/H5Iw4Oxei/sDJR522Xwan8FKwrfJiNyHkM42k41rDcZ+RLz4GJbDtdnJ7zOQZ6AVYVp86UfdNtm3Aa8+lz8vlYdZUMrJXxfk0nLgNQ3g+eD/m8mCulixIN2i0bbKHdeWzuquP8g4wunbkgduAAAAAElFTkSuQmCC";const de={class:"startTime"},pe=(0,l.createElementVNode)("span",{style:{margin:"0 5px"}},"时",-1),me=(0,l.createElementVNode)("span",{style:{"margin-left":"5px"}},"分",-1),he={class:"endTime"},ve=(0,l.createElementVNode)("span",{style:{margin:"0 5px"}},"时",-1),ge=(0,l.createElementVNode)("span",{style:{"margin-left":"5px"}},"分",-1),fe=(0,l.createElementVNode)("p",{class:"tip-title"},[(0,l.createElementVNode)("img",{src:ce,alt:"",class:"tip-image"}),(0,l.createElementVNode)("span",{class:"tip-name"},"注释")],-1),ye=(0,l.createElementVNode)("p",{class:"tip-content"}," 支持参数类型：${device.nickname} 设备昵称 支持编辑带参数的消息，消息内容如需要插入参数，直接将参数粘贴到消息内。例如：“您好！您的${device.nickname}检测到漏水，请及时处理” ",-1);function be(e,t,a,r,o,n){const i=(0,l.resolveComponent)("el-checkbox"),s=(0,l.resolveComponent)("el-option"),u=(0,l.resolveComponent)("el-select"),c=(0,l.resolveComponent)("el-form-item"),d=(0,l.resolveComponent)("el-input"),p=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(p,{ref:"diffForm",model:o.ruleForm,class:"common-form",rules:o.rules,"label-width":"100px","label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{label:"免打扰模式",prop:"terminalStartHour",class:"noDisturb"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(i,{modelValue:o.ruleForm.terminalTime,"onUpdate:modelValue":t[0]||(t[0]=e=>o.ruleForm.terminalTime=e),onChange:n.handleChangeTerminalTime},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("支持")])),_:1},8,["modelValue","onChange"]),(0,l.createElementVNode)("div",de,[(0,l.createVNode)(u,{modelValue:o.ruleForm.terminalStartHour,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ruleForm.terminalStartHour=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",placeholder:"",disabled:!o.ruleForm.terminalTime},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setHour,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),pe,(0,l.createVNode)(u,{modelValue:o.ruleForm.terminalStartMinutes,"onUpdate:modelValue":t[2]||(t[2]=e=>o.ruleForm.terminalStartMinutes=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",placeholder:"",disabled:!o.ruleForm.terminalTime},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setMinutes,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),me]),(0,l.createElementVNode)("div",he,[(0,l.createVNode)(u,{modelValue:o.ruleForm.terminalEndHour,"onUpdate:modelValue":t[3]||(t[3]=e=>o.ruleForm.terminalEndHour=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",placeholder:"",disabled:!o.ruleForm.terminalTime},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setHour,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),ve,(0,l.createVNode)(u,{modelValue:o.ruleForm.terminalEndMinutes,"onUpdate:modelValue":t[4]||(t[4]=e=>o.ruleForm.terminalEndMinutes=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",placeholder:"",disabled:!o.ruleForm.terminalTime},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setMinutes,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),ge])])),_:1}),(0,l.createVNode)(c,{label:"间隔时间",prop:"intervalHours",class:"noDisturb"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(i,{modelValue:o.ruleForm.intervalTime,"onUpdate:modelValue":t[5]||(t[5]=e=>o.ruleForm.intervalTime=e),onChange:n.handleChangeTntervalTime},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("支持")])),_:1},8,["modelValue","onChange"]),(0,l.createVNode)(u,{modelValue:o.ruleForm.intervalHours,"onUpdate:modelValue":t[6]||(t[6]=e=>o.ruleForm.intervalHours=e),class:"startTime",placeholder:"",style:{width:"100px"},"popper-class":"selectCustomAttrs",disabled:!o.ruleForm.intervalTime},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setIntervalHour,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),(0,l.createVNode)(u,{modelValue:o.ruleForm.intervalMinutes,"onUpdate:modelValue":t[7]||(t[7]=e=>o.ruleForm.intervalMinutes=e),placeholder:"",style:{width:"100px","margin-left":"15px"},"popper-class":"selectCustomAttrs",disabled:!o.ruleForm.intervalTime},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setIntervalMinutes,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),(0,l.createVNode)(c,{label:"终端类型",prop:"terminalType"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{modelValue:o.ruleForm.terminalType,"onUpdate:modelValue":t[8]||(t[8]=e=>o.ruleForm.terminalType=e),multiple:"",placeholder:"请选择终端类型","popper-class":"selectCustomAttrs",style:{width:"100%"}},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.terminalTypeList,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e.configCode,label:e.description,value:e.configCode},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{label:"弹窗类型",prop:"toastType"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{modelValue:o.ruleForm.toastType,"onUpdate:modelValue":t[9]||(t[9]=e=>o.ruleForm.toastType=e),placeholder:"请选择弹窗类型","popper-class":"selectCustomAttrs toast-maxwidth",style:{width:"100%"}},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.toastTypeList,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e.configCode,label:e.description,value:e.configCode},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{label:"消息优先级",prop:"messagePriority"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{modelValue:o.ruleForm.messagePriority,"onUpdate:modelValue":t[10]||(t[10]=e=>o.ruleForm.messagePriority=e),style:{width:"100%"},"popper-class":"selectCustomAttrs",placeholder:""},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.messagePriorityList,(e=>((0,l.openBlock)(),(0,l.createBlock)(s,{key:e.key,label:e.value,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{label:"消息标题",style:{width:"100%"},prop:"messageTitle"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{modelValue:o.ruleForm.messageTitle,"onUpdate:modelValue":t[11]||(t[11]=e=>o.ruleForm.messageTitle=e),placeholder:"请输入推送标题，最多20字符",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{label:"消息内容",style:{width:"100%"},prop:"messageContent"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{modelValue:o.ruleForm.messageContent,"onUpdate:modelValue":t[12]||(t[12]=e=>o.ruleForm.messageContent=e),placeholder:"请输入推送内容，最多20字符",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{class:"tag"},{default:(0,l.withCtx)((()=>[fe,ye])),_:1})])),_:1},8,["model","rules"])}var ke={props:{singData:{type:Object,default(){return{}}}},data(){return{ruleForm:{terminalTime:!1,terminalStartHour:"00",terminalStartMinutes:"00",terminalEndHour:"00",terminalEndMinutes:"00",intervalTime:!1,intervalHours:"0h",intervalMinutes:"10min",terminalType:[],toastType:"",messagePriority:"1",messageTitle:"",messageContent:""},source:this.$route.query.source||"",rules:{terminalStartHour:[{required:!0,message:"请选择免打扰模式",trigger:"change"}],intervalHours:[{required:!0,message:"请选择间隔时间",trigger:"change"}],terminalType:[{required:!0,message:"请选择终端类型",trigger:"change"}],toastType:[{required:!0,message:"请选择弹窗类型",trigger:"change"}],messageTitle:[{required:!0,message:"请输入消息标题",trigger:"blur"}],messageContent:[{required:!0,message:"请输入消息内容",trigger:"blur"}]},terminalTypeList:[],toastTypeList:[],messagePriorityList:[{key:"0",value:"紧急消息"},{key:"1",value:"一般消息"},{key:"2",value:"中级消息"},{key:"3",value:"低级消息"}],setHour:[],setMinutes:[],setIntervalHour:[],setIntervalMinutes:[]}},mounted(){if(console.log(1111),this.getTerminalType(),this.getToastType(),this.setHour=O.initHMS(24,!0),this.setMinutes=O.initHMS(60,!0),this.setIntervalHour=this.handleSetIntervalHour(),this.setIntervalMinutes=this.handleSetIntervalMinutes(60),"{}"!==JSON.stringify(this.singData)){const e=this.singData.pushMessage.msgStrategy;if(void 0===e.maxCount){console.log(this.singData.pushMessage.msgStrategy,"this.singData.pushMessage.msgStrategy");const e=this.singData.pushMessage.msgStrategy.notWorkTimeStart&&this.singData.pushMessage.msgStrategy.notWorkTimeStart.length>0?this.singData.pushMessage.msgStrategy.notWorkTimeStart.split(":"):"";this.ruleForm.terminalStartHour="object"==typeof e?e[0]:"00",this.ruleForm.terminalStartMinutes="object"==typeof e?e[1]:"00";const t=this.singData.pushMessage.msgStrategy.notWorkTimeEnd&&this.singData.pushMessage.msgStrategy.notWorkTimeEnd.length>0?this.singData.pushMessage.msgStrategy.notWorkTimeEnd.split(":"):"";this.ruleForm.terminalEndHour="object"==typeof t?t[0]:"00",this.ruleForm.terminalEndMinutes="object"==typeof t?t[1]:"00",this.singData.pushMessage.msgStrategy.notWorkTimeStart&&this.singData.pushMessage.msgStrategy.notWorkTimeStart.length>0||this.singData.pushMessage.msgStrategy.notWorkTimeEnd&&this.singData.pushMessage.msgStrategy.notWorkTimeEnd.length>0?this.ruleForm.terminalTime=!0:this.ruleForm.terminalTime=!1,this.handleDealTime(this.singData.pushMessage.msgStrategy.timeInterval)}else null==e.maxCount&&(this.ruleForm={terminalTime:!1,terminalStartHour:"00",terminalStartMinutes:"00",terminalEndHour:"00",terminalEndMinutes:"00",intervalTime:!1,intervalHours:"0h",intervalMinutes:"10min"});this.$set(this.ruleForm,"messageTitle",this.singData.pushMessage.pushContent.msgTitle),this.$set(this.ruleForm,"messageContent",this.singData.pushMessage.pushContent.msgContent),this.$set(this.ruleForm,"messagePriority",this.singData.pushMessage.priority.toString()),this.handleDealShowTypes(this.singData.pushMessage.showTypes)}},methods:{getTerminalType(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/config/getConfigType":"/developerportal/developer/config/getConfigType",(0,B.U)("post",e,{configParentCode:"pushTerminalType"}).then((e=>{"00000"==e.retCode&&(this.terminalTypeList=e.data)}))},getToastType(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/config/getConfigType":"/developerportal/developer/config/getConfigType",(0,B.U)("post",e,{configParentCode:"pushShowType"}).then((e=>{"00000"==e.retCode&&(this.toastTypeList=e.data)}))},resetFormData(){this.$refs.diffForm.resetFields()},handleSetIntervalHour(){const e=O.initHMS(24);return e.map((e=>e+"h"))},handleSetIntervalMinutes(e){const t=[];for(let a=0;a<e;a+=2)t.push(a.toString()+"min");return t},handleDealTime(e){if(null==e)return;const t=parseInt(e/60);this.ruleForm.intervalHours=parseInt(e/60).toString()+"h",this.ruleForm.intervalMinutes=parseInt(e-60*t).toString()+"min",this.ruleForm.intervalTime=null!==e},handleDealShowTypes(e){const t=[];for(let a in e)t.push(a),this.$set(this.ruleForm,"toastType",e[a]);this.$set(this.ruleForm,"terminalType",t)},handleChangeTerminalTime(e){e||(this.ruleForm.terminalStartHour="00",this.ruleForm.terminalStartMinutes="00",this.ruleForm.terminalEndHour="00",this.ruleForm.terminalEndMinutes="00")},handleChangeTntervalTime(e){e||(this.ruleForm.intervalHours="0h",this.ruleForm.intervalMinutes="10min")}}};const Ve=(0,A.Z)(ke,[["render",be]]);var Ce=Ve;const Ne={class:"startTime"},Se=(0,l.createElementVNode)("span",{style:{margin:"0 10px"}},"小时",-1),xe=(0,l.createElementVNode)("span",{style:{margin:"0 10px"}},"分钟",-1),Fe=(0,l.createElementVNode)("span",{style:{"margin-left":"10px"}},"秒",-1);function we(e,t,a,r,o,n){const i=(0,l.resolveComponent)("el-option"),s=(0,l.resolveComponent)("el-select"),u=(0,l.resolveComponent)("el-form-item"),c=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(c,{ref:"ruleForm",model:o.ruleForm,class:"common-form","label-width":"100px","label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{label:"延时设置",class:"delaySet"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",Ne,[(0,l.createVNode)(s,{modelValue:o.ruleForm.delayStartHour,"onUpdate:modelValue":t[0]||(t[0]=e=>o.ruleForm.delayStartHour=e),"popper-class":"selectCustomAttrs",style:{width:"80px"},placeholder:""},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setHour,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),Se,(0,l.createVNode)(s,{modelValue:o.ruleForm.delayStartMinutes,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ruleForm.delayStartMinutes=e),"popper-class":"selectCustomAttrs",style:{width:"80px"},placeholder:""},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setMinutes,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),xe,(0,l.createVNode)(s,{modelValue:o.ruleForm.delayStartSecond,"onUpdate:modelValue":t[2]||(t[2]=e=>o.ruleForm.delayStartSecond=e),"popper-class":"selectCustomAttrs",style:{width:"80px"},placeholder:""},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.setSeconds,(e=>((0,l.openBlock)(),(0,l.createBlock)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),Fe])])),_:1}),o.ruleForm.isShow?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,style:{color:"red"}},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("请选择延时时间！")])),_:1})):(0,l.createCommentVNode)("",!0)])),_:1},8,["model"])}var Be={props:{singData:{type:Object,default(){return{}}}},data(){return{ruleForm:{delayStartHour:"0",delayStartMinutes:"0",delayStartSecond:"0",isShow:!1},source:this.$route.query.source||"",setHour:[],setMinutes:[],setSeconds:[],delayData:{}}},mounted(){this.setHour=O.initHMS(24),this.setMinutes=O.initHMS(60),this.setSeconds=O.initHMS(60),this.getDelayData(),"{}"!==JSON.stringify(this.singData)&&this.handleDealHMS(this.singData.delayControl.args[0].value.value)},methods:{getDelayData(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/component/cmptPropList/DELAY":"/developerportal/developer/component/cmptPropList/DELAY",(0,B.U)("get",e).then((e=>{"00000"==e.retCode&&(this.delayData=e.data[0])}))},resetFormData(){this.ruleForm={delayStartHour:"0",delayStartMinutes:"0",delayStartSecond:"0",isShow:!1}},handleDealHMS(e){this.ruleForm.delayStartHour=parseInt(e/3600).toString(),this.ruleForm.delayStartMinutes=parseInt((e-3600*this.ruleForm.delayStartHour)/60).toString(),this.ruleForm.delayStartSecond=parseInt((e-3600*this.ruleForm.delayStartHour)%60).toString()}}};const De=(0,A.Z)(Be,[["render",we]]);var Ae,Le=De,Ee=(Ae={},Ae[o.hP]=E,Ae[o.fg]=J,Ae[o.HT]=Q,Ae[o.hI]=W,Ae[o.Hd]=ue,Ae[o._0]=Ce,Ae[o.m8]=Le,Ae),Te=(0,r.pi)((0,r.pi)({},Ee),v),Pe=function(e){var t=e.template;return console.log(t),Te[t]}},6941:function(e,t,a){a.d(t,{j:function(){return P}});var r=a(5991),o=a(8116),l=a(655),n=a(3634),i="checkSamePort",s="checkPortType",u="checkOrPort",c="checkConditionPort";function d(e){var t=e.sourcePort,a=e.targetPort;return!t||!a||t!==a}var p,m=a(3997);function h(e){var t=e.sourcePortType,a=e.targetPortType;if(m.jH.indexOf(t)>=0&&m.$g.indexOf(a)>=0)return!0}function v(e,t,a){return t!==m.fw||!e.getIncomingEdges(a)}function g(e,t,a){return t!==m.FJ||!e.getIncomingEdges(a)}function f(e,t,a){return t!==m.cS||!e.getIncomingEdges(a)&&!e.getOutgoingEdges(a)}function y(e,t){var a=e.targetCell,r=e.sourcePortName,o=e.sourcePortType,l=e.targetPortName,n=e.targetPortType;return console.log(l,a),r!==m.Kc&&l!==m.Kc||!!v(t,n,a)&&(!!g(t,n,a)&&!!f(t,o,a))}function b(e,t){var a=e.targetCell,r=e.sourcePortName,o=e.targetPortName,l=e.targetPortType;return r!==m.r_&&o!==m.r_||(l!==m.fw||!t.getIncomingEdges(a))}var k=(p={},p[i]=d,p[s]=h,p[u]=y,p[c]=b,p),V=k;function C(e,t,a){return function(){var r=e.length,o=!0;if(t.sourcePort&&t.targetPort){var n=t.sourcePort.split("-"),i=n[0],s=n[1],u=t.targetPort.split("-"),c=u[0],d=u[1];console.log(t.targetPort);for(var p=0;p<r;p++)if(!V[e[p]]((0,l.pi)((0,l.pi)({},t),{sourcePortName:i,sourcePortType:s,targetPortName:c,targetPortType:d}),a)){o=!1;break}return o}return!1}}var N=[i,s,u,c];function S(e){return C(N,e,this)()}var x,F={validateConnection:S,snap:{radius:20},allowBlank:!1,allowMulti:!1,allowLoop:!1,allowNode:!1,allowEdge:!0,allowPort:!0,highlight:!0,connector:{name:"rounded",args:{radius:8}},connectionPoint:"anchor",anchor:"center",router:{name:"manhattan",args:{padding:1}},createEdge:function(){return new n.bn.kS({router:"manhattan",attrs:{line:{}},zIndex:-1})}},w="basicEdge",B={autoResize:!0,grid:{type:"mesh",size:20,visible:!0,args:{color:"#eeeeee",thickness:2}},background:!1,panning:{enabled:!0,modifiers:["alt","meta"],eventTypes:["leftMouseDown"]},mousewheel:{enabled:!0,modifiers:"ctrl",factor:1.1,maxScale:1.5,minScale:.5},highlighting:{magnetAvailable:{name:"stroke",args:{attrs:{fill:"#fff",stroke:"#31d0c6",strokeWidth:4}}}},connecting:{snap:!0,allowBlank:!1,allowMulti:!0,allowLoop:!1,allowNode:!1,allowEdge:!0,allowPort:!0,highlight:!0,connector:w,connectionPoint:"anchor",edgeAnchor:"ratio",anchor:"center",router:"normal",edgeMovable:!0,vertexDeletable:!0,validateMagnet:function(){return!0},createEdge:function(){return new n.bn.kS({attrs:{line:{stroke:"#000",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:1})}}},D=B,A=(0,l.pi)((0,l.pi)({},D),{connecting:F}),L=A,E=(x={},x[o.ef]=L,x),T=E;function P(e){var t=e.templateName,a=e.container,o=e.config,l={container:a};return t?Object.assign(l,T[t]):o&&Object.assign(l,D,o.options||{},{}),(0,r.B)(l)}},8116:function(e,t,a){a.d(t,{ef:function(){return r}});var r="mainPageGraph"},3927:function(e,t,a){a.d(t,{Z:function(){return le}});var r=a(655),o=a(3634),l=a(2681),n=a(8222),i={class:"basic-node"},s={class:"basic-node__desc"},u=["src"],c={class:"node-name"},d=(0,n.defineComponent)({__name:"BasicNode",setup:function(e){var t=(0,n.inject)("getNode"),a=(0,n.ref)(),r=(0,n.ref)({attrData:[]}),o=(0,n.ref)({});return(0,n.onMounted)((function(){t&&(a.value=t(),r.value=a.value.data,o.value=r.value.attrData||{},console.log(r.value),a.value.on("change:data",(function(e){var t=e.current;r.value=t,o.value=r.value.attrData||{}})))})),function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",i,[(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("img",{class:"basic-node__icon",src:r.value.icon,alt:""},null,8,u),(0,n.createElementVNode)("div",c,(0,n.toDisplayString)(r.value.description),1)])])}}}),p=a(3744);const m=(0,p.Z)(d,[["__scopeId","data-v-6e1c6eac"]]);var h=m,v={class:"basic-node"},g={class:"node-name"},f=(0,n.defineComponent)({__name:"BasicOrNode",setup:function(e){var t=(0,n.inject)("getNode"),a=(0,n.ref)(),r=(0,n.ref)({attrData:[]}),o=(0,n.ref)({});return(0,n.onMounted)((function(){t&&(a.value=t(),r.value=a.value.data,o.value=r.value.attrData||{},console.log(r.value),a.value.on("change:data",(function(e){var t=e.current;r.value=t,o.value=r.value.attrData||{}})))})),function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",v,[(0,n.createElementVNode)("div",g,(0,n.toDisplayString)(r.value.description),1)])}}});const y=(0,p.Z)(f,[["__scopeId","data-v-2d08b82d"]]);var b=y,k={class:"basic-node"},V=["src"],C={class:"node-name"},N=(0,n.defineComponent)({__name:"BasicDescisionNode",setup:function(e){var t=(0,n.inject)("getNode"),a=(0,n.ref)(),r=(0,n.ref)({attrData:[]}),o=(0,n.ref)({});return(0,n.onMounted)((function(){t&&(a.value=t(),r.value=a.value.data,o.value=r.value.attrData||{},a.value.on("change:data",(function(e){var t=e.current;r.value=t,o.value=r.value.attrData||{}})))})),function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",k,[(0,n.createElementVNode)("img",{class:"basic-node__icon",src:r.value.icon,alt:""},null,8,V),(0,n.createElementVNode)("div",C,(0,n.toDisplayString)(o.value.descision||r.value.description),1)])}}});const S=(0,p.Z)(N,[["__scopeId","data-v-d7ea66ee"]]);var x=S,F={class:"basic-node"},w={class:"node-name"},B=(0,n.defineComponent)({__name:"BasicLogicNode",setup:function(e){var t=(0,n.inject)("getNode"),a=(0,n.ref)(),r=(0,n.ref)({attrData:[]});return(0,n.onMounted)((function(){t&&(a.value=t(),r.value=a.value.data,a.value.on("change:data",(function(e){var t=e.current;r.value=t})))})),function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",F,[(0,n.createElementVNode)("div",w,(0,n.toDisplayString)(r.value.description),1)])}}});const D=(0,p.Z)(B,[["__scopeId","data-v-e4eb4f70"]]);var A=D,L=function(e){return(0,n.pushScopeId)("data-v-2b3100ca"),e=e(),(0,n.popScopeId)(),e},E={class:"container"},T=L((function(){return(0,n.createElementVNode)("div",{class:"block"},null,-1)})),P={class:"content"},I=(0,n.defineComponent)({__name:"GatewayNode",setup:function(e){var t=(0,n.inject)("getNode"),a=(0,n.ref)(),r=(0,n.ref)();return(0,n.onMounted)((function(){t&&(a.value=t(),r.value=a.value.data.id)})),function(e,t){var a=(0,n.resolveComponent)("Close"),o=(0,n.resolveComponent)("el-icon"),l=(0,n.resolveComponent)("Plus");return(0,n.openBlock)(),(0,n.createElementBlock)("div",E,[T,(0,n.createElementVNode)("div",P,["Exclusive"===r.value?((0,n.openBlock)(),(0,n.createBlock)(o,{key:0},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(a)]})),_:1})):(0,n.createCommentVNode)("",!0),"Parallel"===r.value?((0,n.openBlock)(),(0,n.createBlock)(o,{key:1},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(l)]})),_:1})):(0,n.createCommentVNode)("",!0)])])}}});const q=(0,p.Z)(I,[["__scopeId","data-v-2b3100ca"]]);var O=q,M={class:"container"},_={class:"block"},J=(0,n.defineComponent)({__name:"TaskNode",setup:function(e){var t=(0,n.inject)("getNode"),a=(0,n.ref)(),r=(0,n.ref)(),o={User:"UserFilled"};return(0,n.onMounted)((function(){t&&(a.value=t(),r.value=o[a.value.data.id])})),function(e,t){var a=(0,n.resolveComponent)("el-icon");return(0,n.openBlock)(),(0,n.createElementBlock)("div",M,[(0,n.createElementVNode)("div",_,[(0,n.createVNode)(a,null,{default:(0,n.withCtx)((function(){return[((0,n.openBlock)(),(0,n.createBlock)((0,n.resolveDynamicComponent)(r.value)))]})),_:1})])])}}});const U=(0,p.Z)(J,[["__scopeId","data-v-59eba4b4"]]);var j,R=U,H=a(6303),Z=a(3997),Q=a(692),G=function(e){(0,l.z2)((0,r.pi)({shape:e.name,width:200,height:50,component:h},e))},K=function(e){(0,l.z2)((0,r.pi)({shape:e.name,width:80,height:80,component:A},e))},z=function(e){(0,l.z2)((0,r.pi)({shape:e.name,width:100,height:100,component:b},e))},W=function(e){(0,l.z2)((0,r.pi)({shape:Q.Bu,width:200,height:50,component:x},e))},Y=!1,X=function(){Y||(Y=!0,o.kJ.registerNode(Q.xf,{inherit:"polygon",width:100,height:100,label:"决策组",attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"#FFF",refPoints:"0,10 10,0 20,10 10,20"},text:{fontSize:12,fill:"#262626"}},ports:(0,H.E)({portTemplates:[Z.QX,Z.gF]})}))},$=function(e){(0,l.z2)((0,r.pi)({shape:Q.gn,width:60,height:60,component:O},e))},ee=function(e){(0,l.z2)((0,r.pi)({shape:Q.Xn,width:200,height:100,component:R},e))},te=(j={},j[Q.Iu]=G,j[Q.WH]=K,j[Q.hh]=z,j[Q.Bu]=W,j[Q.xf]=X,j[Q.gn]=$,j[Q.Xn]=ee,j),ae=(0,r.pi)({},te),re=function(e){e.forEach((function(e){ae[e.template](e.options)}))},oe=re;function le(e){e.forEach((function(e){var t,a={};a.ports=(0,H.E)({portTemplates:(null===(t=e.port)||void 0===t?void 0:t.templates)||[]}),a.name=e.name;var r=e.shape;oe([{template:r.template,options:a}])}))}},692:function(e,t,a){a.d(t,{Bu:function(){return n},Iu:function(){return r},WH:function(){return o},Xn:function(){return u},gn:function(){return s},hh:function(){return l},xf:function(){return i}});var r="basic-node",o="basic-logic-node",l="basic_or_node",n="basic_descision_node",i="basic_descision_group",s="gateway_node",u="task_node"},3997:function(e,t,a){a.d(t,{$g:function(){return i},BJ:function(){return d},DM:function(){return v},FJ:function(){return r},Hh:function(){return f},KP:function(){return p},Kc:function(){return h},QX:function(){return c},_F:function(){return g},cS:function(){return l},fw:function(){return o},gF:function(){return u},jH:function(){return n},jo:function(){return m},r_:function(){return s}});var r="output",o="input",l="condition",n=[r,l],i=[o],s="conditionPort",u="conditionOutPort",c="conditionInPort",d="actionPort",p="actionOutPort",m="actionInPort",h="basicOrPort",v="basicOrInPort",g="basicOrOutPort",f="basicOrConditionPort"},6303:function(e,t,a){a.d(t,{E:function(){return y}});var r,o,l,n,i,s,u=a(3997),c={circle:{r:4,magnet:!0,stroke:"#C2C8D5",strokeWidth:1,fill:"#fff"}},d=a(5934),p={groups:(r={},r[u.gF]={position:"right",attrs:c},r),items:[{group:u.gF,id:"".concat(u.r_,"-").concat(u.FJ,"-").concat((0,d.Z)())}]},m={groups:(o={},o[u.QX]={position:"left",attrs:c},o),items:[{group:u.QX,id:"".concat(u.r_,"-").concat(u.fw,"-").concat((0,d.Z)())}]},h={groups:(l={},l[u.KP]={position:"right",attrs:c},l),items:[{group:u.KP,id:"".concat(u.BJ,"-").concat(u.fw,"-").concat((0,d.Z)())}]},v={groups:(n={},n[u.jo]={position:"left",attrs:c},n),items:[{group:u.jo,id:"".concat(u.BJ,"-").concat(u.fw,"-").concat((0,d.Z)())}]},g={groups:(i={},i[u.DM]={position:"left",attrs:c},i[u._F]={position:"right",attrs:c},i[u.Hh]={position:"bottom",attrs:c},i),items:[{group:u.DM,id:"".concat(u.Kc,"-").concat(u.fw,"-").concat((0,d.Z)())},{group:u._F,id:"".concat(u.Kc,"-").concat(u.FJ,"-").concat((0,d.Z)())},{group:u.Hh,id:"".concat(u.Kc,"-").concat(u.cS,"-").concat((0,d.Z)())}]},f=(s={},s[u.gF]=p,s[u.QX]=m,s[u.Kc]=g,s[u.KP]=h,s[u.jo]=v,s),y=function(e){var t=e.portTemplates,a={groups:{},items:[]};return t&&t.forEach((function(e){a.items=Array.prototype.concat(a.items,f[e].items),a.groups=Object.assign({},a.groups,f[e].groups||{})})),a}},7489:function(e,t,a){a.d(t,{Z:function(){return w}});var r=a(8222);function o(e,t,a,o,l,n){const i=(0,r.resolveComponent)("ZoomIn"),s=(0,r.resolveComponent)("el-icon"),u=(0,r.resolveComponent)("el-tooltip"),c=(0,r.resolveComponent)("ZoomOut");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(u,{class:"item",effect:"dark",content:"放大",placement:"bottom"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{onClick:t[0]||(t[0]=e=>n.zoomFn(.2))},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(i)])),_:1})])),_:1}),(0,r.createVNode)(u,{class:"item",effect:"dark",content:"缩小",placement:"bottom"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{onClick:t[1]||(t[1]=e=>n.zoomFn(-.2))},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c)])),_:1})])),_:1})])}var l=a(3634),n={props:{graph:l.kJ},methods:{zoomFn(e){this.graph&&this.graph.zoom(e)}}},i=a(3744);const s=(0,i.Z)(n,[["render",o]]);var u=s;function c(e,t,a,o,l,n){const i=(0,r.resolveComponent)("FullScreen"),s=(0,r.resolveComponent)("el-icon"),u=(0,r.resolveComponent)("el-tooltip");return(0,r.openBlock)(),(0,r.createBlock)(u,{class:"item",effect:"dark",content:"适应屏幕",placement:"bottom"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{onClick:n.centerFn},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(i)])),_:1},8,["onClick"])])),_:1})}var d={props:{graph:l.kJ},methods:{centerFn(){if(this.graph){const e=1-this.graph.zoom();e>1?this.graph.zoom(-1*e):this.graph.zoom(e),this.graph.centerContent()}}}};const p=(0,i.Z)(d,[["render",c]]);var m=p,h=(0,r.defineComponent)({__name:"toolSave",props:{graph:null},emits:["saveData"],setup:function(e,t){var a=t.emit,o=e,l=function(){o.graph&&a("saveData",o.graph.toJSON({diff:!0}))};return function(e,t){var a=(0,r.resolveComponent)("UploadFilled"),o=(0,r.resolveComponent)("el-icon"),n=(0,r.resolveComponent)("el-tooltip");return(0,r.openBlock)(),(0,r.createBlock)(n,{class:"item",effect:"dark",content:"保存",placement:"bottom"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(o,{onClick:l},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(a)]})),_:1})]})),_:1})}}});const v=h;var g=v;function f(e,t,a,o,l,n){const i=(0,r.resolveComponent)("Lock"),s=(0,r.resolveComponent)("el-icon"),u=(0,r.resolveComponent)("Unlock"),c=(0,r.resolveComponent)("el-tooltip");return(0,r.openBlock)(),(0,r.createBlock)(c,{class:"item",effect:"dark",content:"是否禁用",placement:"bottom"},{default:(0,r.withCtx)((()=>[l.isLock?((0,r.openBlock)(),(0,r.createBlock)(s,{key:1,onClick:n.lockFn},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u)])),_:1},8,["onClick"])):((0,r.openBlock)(),(0,r.createBlock)(s,{key:0,onClick:n.lockFn},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(i)])),_:1},8,["onClick"]))])),_:1})}var y={props:{graph:l.kJ},data(){return{isLock:!1}},methods:{lockFn:function(){this.isLock=!this.isLock,this.isLock&&this.graph?(this.graph.enablePanning(),this.graph.enableKeyboard()):this.graph&&(this.graph.disablePanning(),this.graph.disableKeyboard())}}};const b=(0,i.Z)(y,[["render",f]]);var k,V=b,C=a(719),N=(k={},k[C.kq]=u,k[C.nk]=m,k[C.K3]=g,k[C.yo]=V,k),S={class:"graph-tools__block"},x=(0,r.defineComponent)({__name:"index",props:{tools:null},setup:function(e){return function(t,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",S,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.tools,(function(e){return(0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)((0,r.unref)(N)[e]),(0,r.mergeProps)({class:"graph-tools__item"},t.$attrs,{key:e}),null,16)})),128))])}}});const F=(0,i.Z)(x,[["__scopeId","data-v-42c48e2a"]]);var w=F},8358:function(e,t,a){a.r(t),a.d(t,{default:function(){return de}});var r=a(655),o=a(8222),l=a(8917),n=a(5991),i=a(8116),s=a(6941);function u(){var e=(0,o.ref)(),t=(0,o.ref)();return(0,o.onMounted)((function(){e.value=(0,s.j)({templateName:i.ef,container:document.getElementById("container")}),t.value=(0,l.m)(e.value),(0,n.U)(e.value,["copy","paste","cut","undo","redo","delete"])})),{graph:e,dnd:t}}const c=e=>((0,o.pushScopeId)("data-v-420c16b9"),e=e(),(0,o.popScopeId)(),e),d=c((()=>(0,o.createElementVNode)("div",null,null,-1))),p={class:"class-fold"},m=c((()=>(0,o.createElementVNode)("i",{class:"el-icon-arrow-up"},null,-1))),h=[m],v={key:0,class:"fold-content"};function g(e,t,a,r,l,n){return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[d,(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",{class:"fold-title",onClick:t[0]||(t[0]=e=>l.foldShow=!l.foldShow)},[(0,o.createTextVNode)((0,o.toDisplayString)(a.name)+" ",1),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["icon-fold",{"fold-show":!l.foldShow}])},h,2)]),l.foldShow?((0,o.openBlock)(),(0,o.createElementBlock)("div",v,[(0,o.renderSlot)(e.$slots,"default",{},void 0,!0)])):(0,o.createCommentVNode)("",!0)])],64)}var f={name:"ClassFold",props:{name:{type:String,required:!0,default:""},fold:{type:Boolean,required:!1,default:!1}},data(){return{foldShow:!1}},created(){this.foldShow=this.fold}},y=a(3744);const b=(0,y.Z)(f,[["render",g],["__scopeId","data-v-420c16b9"]]);var k=b,V={class:"menu-item"},C={class:"element-list"},N=["onMousedown"],S=["src"],x=(0,o.defineComponent)({__name:"MenuItem",props:{menuList:null,dnd:null},setup:function(e){var t=e,a=(0,o.inject)("graph",(0,o.ref)(void 0)),n=function(e,o){a.value&&t.dnd&&(0,l.d)({graph:a.value,dnd:t.dnd,event:e,options:{shape:o.name},data:(0,r.pi)({},o)})};return function(t,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",V,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.menuList,(function(e,t){return(0,o.openBlock)(),(0,o.createBlock)(k,{key:e.classCode+t,name:e.className,fold:!0},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",C,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.children,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e.id,class:"element-item",draggable:"true",onMousedown:function(t){return n(t,e)}},[(0,o.createElementVNode)("img",{src:e.icon},null,8,S),(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(e.description),1)],40,N)})),128))])]})),_:2},1032,["name"])})),128))])}}});const F=(0,y.Z)(x,[["__scopeId","data-v-0a1cba7a"]]);var w=F,B=a(1868),D=function(){return(0,B.U)("get","/developerportal/developer/component/cmptPropList/TIMER",{})},A=function(){return(0,B.U)("get","/developerportal/developer/component/cmptPropList/WEATHER",{})},L=function(){return(0,B.U)("get","/developerportal/developer/component/cmptPropList/GEOFENCE",{})},E=function(){return(0,B.U)("get","/developerportal/developer/component/cmptPropList/DELAY",{})},T=a(692),P=a(8503),I=a(6454),q=a(3927),O=a(3997),M=a(2201),_=a(6303);function J(e,t){var a=t.query.id,r=t.query.name,o=t.name;if("createDescisionNode"===o){var l=JSON.parse(localStorage.getItem("descisionNode")||"{}")[a];l&&e.fromJSON(l)}if("createDescisionGroup"===o){var n=JSON.parse(localStorage.getItem("descisionGroup")||"{}")[a];n&&e.fromJSON(n)}if("rulesDetail"===o&&a){var i=JSON.parse(localStorage.getItem("graphData")||"{}");e.fromJSON(i[a])}if("createFlow"===o){i=JSON.parse(localStorage.getItem("flow")||"{}");i[a]?e.fromJSON(i[a]):e.addNode({shape:"rect",x:100,y:40,width:100,height:40,attrs:{text:{text:r}},ports:(0,_.E)({portTemplates:[O.gF]})})}}function U(e){var t=(0,M.yj)(),a=(0,o.ref)(I.Jl),l=(0,o.ref)(I.RR),n=(0,o.ref)(I.Kg),i=(0,o.ref)(I.O),s=(0,o.ref)([]),u=JSON.parse(localStorage.getItem("config")||"[]");u.length&&a.value.push({className:"自定义组件",classCode:"self",children:u});var c=(0,o.ref)([]);return Promise.all([D(),A(),L(),E()]).then((function(u){var c=u[0],d=u[1],p=u[2],m=u[3];c&&c.data&&(a.value[1].children=c.data.map((function(e){return(0,r.pi)((0,r.pi)({},e),{shape:{template:T.Iu},attr:{template:P.fg}})}))),d&&d.data&&(a.value[2].children=d.data.map((function(e){return(0,r.pi)((0,r.pi)({},e),{shape:{template:T.Iu},attr:{template:P.HT}})}))),p&&p.data&&(a.value[3].children=p.data.map((function(e){return(0,r.pi)((0,r.pi)({},e),{shape:{template:T.Iu},attr:{template:P.hI}})}))),m&&m.data&&(n.value[2].children=m.data.map((function(e){return(0,r.pi)((0,r.pi)({},e),{shape:{template:T.Iu},port:{templates:[O.gF,O.QX]},attr:{template:P.m8}})}))),(0,r.ev)((0,r.ev)((0,r.ev)((0,r.ev)([],a.value,!0),l.value,!0),n.value,!0),i.value,!0).forEach((function(e){var t;(t=s.value).push.apply(t,e.children)})),(0,q.Z)(s.value),(0,o.watch)(e,(function(e){e&&J(e,t)}),{immediate:!0})})),"createDescisionNode"===t.name?c.value=(0,r.ev)([],a.value,!0):"createFlow"===t.name?c.value=(0,r.ev)((0,r.ev)([],n.value,!0),i.value,!0):"createDescisionGroup"===t.name&&(c.value=l.value),{renderList:c}}var j={class:"material-content"},R=(0,o.defineComponent)({__name:"index",setup:function(e){var t=(0,o.inject)("graph"),a=U(t),r=a.renderList,l=(0,o.ref)(["condition","action","logic"]),n=function(){console.log("world")};return function(e,t){var a=(0,o.resolveComponent)("el-collapse-item"),i=(0,o.resolveComponent)("el-collapse");return(0,o.openBlock)(),(0,o.createElementBlock)("div",j,[(0,o.createVNode)(i,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.value=e}),onChange:n},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(a,{title:"决策组件",name:"condition"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(w,(0,o.mergeProps)(e.$attrs,{"menu-list":(0,o.unref)(r)}),null,16,["menu-list"])]})),_:1})]})),_:1},8,["modelValue"])])}}});const H=(0,y.Z)(R,[["__scopeId","data-v-95806a10"]]);var Z=H,Q=a(7489),G=a(719),K=a(1803),z={class:"attribute-block"},W={class:"attribute-title"},Y=["src"],X=(0,o.defineComponent)({__name:"index",props:{node:null},setup:function(e){var t=e,a=(0,o.computed)((function(){return r.value.attr?(0,K.E)(r.value.attr):null})),r=(0,o.computed)((function(){return t.node&&t.node.data||{}}));return function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("div",z,[(0,o.createElementVNode)("div",W,[(0,o.createElementVNode)("img",{src:(0,o.unref)(r).icon,alt:""},null,8,Y),(0,o.createElementVNode)("h4",null,(0,o.toDisplayString)((0,o.unref)(r).description),1)]),(0,o.unref)(a)?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)((0,o.unref)(a)),(0,o.normalizeProps)((0,o.mergeProps)({key:0},e.$attrs)),null,16)):(0,o.createCommentVNode)("",!0)])}}});const $=(0,y.Z)(X,[["__scopeId","data-v-af3eae30"]]);var ee=$,te=a(1348);function ae(e,t){var a=t.name,r=t.query.id,o=!1;if("createDescisionNode"===a){var l=JSON.parse(localStorage.getItem("descisionNode")||"{}");l[r]=e,localStorage.setItem("descisionNode",JSON.stringify(l)),o=!0}if("createDescisionGroup"===a){var n=JSON.parse(localStorage.getItem("descisionGroup")||"{}");n[r]=e,console.log("当前决策组内容是",e),localStorage.setItem("descisionGroup",JSON.stringify(n)),o=!0}if("createFlow"===a){var i=JSON.parse(localStorage.getItem("flow")||"{}");i[r]=e,localStorage.setItem("flow",JSON.stringify(i)),o=!0}o&&(0,te.z8)({message:"保存成功",type:"success"})}var re=function(e){return(0,o.pushScopeId)("data-v-ae655140"),e=e(),(0,o.popScopeId)(),e},oe={class:"home"},le={class:"menu-bar"},ne={class:"canvas-card"},ie=re((function(){return(0,o.createElementVNode)("div",{id:"container"},null,-1)})),se={class:"attrs-bar"},ue=(0,o.defineComponent)({__name:"index",setup:function(e){var t=(0,M.yj)(),a=u(),l=a.graph,n=a.dnd;(0,o.provide)("graph",l);var i=(0,o.ref)(),s=(0,o.ref)(),c=function(){l.value&&l.value.removeNode(i.value),i.value=void 0},d=function(e){if(i.value)if(i.value.shape===T.xf)i.value.attr("text/text",e.descision);else{var t=i.value.getData();i.value.setData((0,r.pi)((0,r.pi)({},t),{attrData:e}))}},p=function(e){console.log("保存的数据是",e),ae(e,t,l.value)},m=[G.kq,G.nk,G.K3,G.yo],h=function(e,t){for(var a=0,r=e.length;a<r;a+=1)e[a].style.visibility=t?"visible":"hidden"};return(0,o.onMounted)((function(){l.value&&n.value&&(l.value.on("node:click",(function(e){var t=e.view,a=e.node;s.value&&s.value.classList.remove("active"),s.value=t.container.querySelector(".basic-node")||void 0,s.value&&s.value.classList.add("active"),i.value?i.value!==a?i.value=a:i.value=void 0:i.value=a})),l.value.on("blank:click",(function(){i.value=void 0,s.value&&s.value.classList.remove("active")})),l.value.on("node:mouseenter",(function(){var e=document.getElementById("container"),t=e.querySelectorAll(".x6-port-body");h(t,!0)})),l.value.on("node:mouseleave",(function(){var e=document.getElementById("container"),t=e.querySelectorAll(".x6-port-body");h(t,!1)})))})),function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("div",oe,[(0,o.createElementVNode)("div",le,[(0,o.createVNode)(Z,{dnd:(0,o.unref)(n)},null,8,["dnd"])]),(0,o.createElementVNode)("div",ne,[(0,o.createElementVNode)("header",null,[(0,o.createVNode)(Q.Z,{tools:m,graph:(0,o.unref)(l),onSaveData:p},null,8,["graph"])]),ie]),(0,o.withDirectives)((0,o.createElementVNode)("div",se,[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(ee,{key:(0,o.unref)(i)&&(0,o.unref)(i).id,node:(0,o.unref)(i),onSyncData:d,onDelNode:c},null,8,["node"])),[[o.vShow,(0,o.unref)(i)]])],512),[[o.vShow,(0,o.unref)(i)]])])}}});const ce=(0,y.Z)(ue,[["__scopeId","data-v-ae655140"]]);var de=ce}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=e,function(){var e=[];a.O=function(t,r,o,l){if(!r){var n=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],l=e[c][2];for(var i=!0,s=0;s<r.length;s++)(!1&l||n>=l)&&Object.keys(a.O).every((function(e){return a.O[e](r[s])}))?r.splice(s--,1):(i=!1,l<n&&(n=l));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[r,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))}}(),function(){a.u=function(e){return"assets/js/flow.46286c3c.js"}}(),function(){a.miniCssF=function(e){return"assets/css/flow.7891bde2.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="scenes:";a.l=function(r,o,l,n){if(e[r])e[r].push(o);else{var i,s;if(void 0!==l)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+l){i=d;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+l),i.src=r),e[r]=[o];var p=function(t,a){i.onerror=i.onload=null,clearTimeout(m);var o=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/scenes/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,r,o){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css";var n=function(a){if(l.onerror=l.onload=null,"load"===a.type)r();else{var n=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=n,s.request=i,l.parentNode.removeChild(l),o(s)}};return l.onerror=l.onload=n,l.href=t,a?a.parentNode.insertBefore(l,a.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var o=a[r],l=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(l===e||l===t))return o}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){o=n[r],l=o.getAttribute("data-href");if(l===e||l===t)return o}},r=function(r){return new Promise((function(o,l){var n=a.miniCssF(r),i=a.p+n;if(t(n,i))return o();e(r,i,null,o,l)}))},o={143:0};a.f.miniCss=function(e,t){var a={239:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=r(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,r){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var l=new Promise((function(a,r){o=e[t]=[a,r]}));r.push(o[2]=l);var n=a.p+a.u(t),i=new Error,s=function(r){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var l=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+l+": "+n+")",i.name="ChunkLoadError",i.type=l,i.request=n,o[1](i)}};a.l(n,s,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,l,n=r[0],i=r[1],s=r[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(s)var c=s(a)}for(t&&t(r);u<n.length;u++)l=n[u],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},r=self["webpackChunkscenes"]=self["webpackChunkscenes"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(14)}));r=a.O(r)})();
//# sourceMappingURL=app.ae789ff5.js.map