(function(){"use strict";var e={1324:function(e,t,a){var r=a(8222);function o(e,t){const a=(0,r.resolveComponent)("router-view");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(a)])}var l=a(3744);const i={},n=(0,l.Z)(i,[["render",o]]);var s=n,c=a(655),u=a(2201),d=a(5781),p=function(e){return(0,r.pushScopeId)("data-v-2f96ffc7"),e=e(),(0,r.popScopeId)(),e},m={class:"common-block"},h=p((function(){return(0,r.createElementVNode)("h5",{class:"mb-2"},"haigeek",-1)})),v=p((function(){return(0,r.createElementVNode)("span",null,"场景流程",-1)})),g=p((function(){return(0,r.createElementVNode)("span",null,"决策组",-1)})),f=p((function(){return(0,r.createElementVNode)("span",null,"决策点",-1)})),y=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,u.tv)(),a=(0,u.yj)(),o=function(e,t){console.log(e,t)},l=function(e,t){console.log(e,t)},i=function(e){t.push(e)};return function(e,t){var n=(0,r.resolveComponent)("el-icon"),s=(0,r.resolveComponent)("el-menu-item"),c=(0,r.resolveComponent)("document"),u=(0,r.resolveComponent)("el-menu"),p=(0,r.resolveComponent)("el-col"),y=(0,r.resolveComponent)("el-row"),b=(0,r.resolveComponent)("router-view");return(0,r.openBlock)(),(0,r.createElementBlock)("div",m,[(0,r.withDirectives)((0,r.createVNode)(y,{class:"tac"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{span:24},{default:(0,r.withCtx)((function(){return[h,(0,r.createVNode)(u,{"default-active":"2",class:"el-menu-vertical-demo",onOpen:o,onClose:l,onSelect:i},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{index:"flow-list"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(n,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)((0,r.unref)(d.Menu))]})),_:1}),v]})),_:1}),(0,r.createVNode)(s,{index:"descision-group-list"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(n,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c)]})),_:1}),g]})),_:1}),(0,r.createVNode)(s,{index:"descision-node-list"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(n,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)((0,r.unref)(d.Location))]})),_:1}),f]})),_:1})]})),_:1})]})),_:1})]})),_:1},512),[[r.vShow,!(0,r.unref)(a).meta.hideMenu]]),(0,r.createVNode)(b)])}}});const b=(0,l.Z)(y,[["__scopeId","data-v-2f96ffc7"]]);var k=b,V=["src"],C=(0,r.createElementVNode)("p",{style:{"font-size":"16px",margin:"-5px 0 15px"}},"链接桩配置",-1),N=(0,r.createElementVNode)("p",{style:{"font-size":"16px",margin:"-5px 0 15px"}},"属性配置",-1),S=(0,r.defineComponent)({__name:"configComponent",setup:function(e){var t=this,a=(0,r.ref)("default"),o=(0,r.ref)(),l=(0,r.reactive)({name:"",description:"",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:"",region:"",count:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),i=(0,r.reactive)({name:[{required:!0,message:"Please input 组件名称",trigger:"blur"}],shape:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}]}),n=function(e){return(0,c.mG)(t,void 0,void 0,(function(){return(0,c.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,e.validate((function(e,t){if(console.log(l),e){console.log("submit!");var a={name:l.name,icon:l.icon,description:l.name,shape:{template:l.shape},port:{templates:l.type}},r=JSON.parse(localStorage.getItem("config")||"[]");r.push(a),localStorage.setItem("config",JSON.stringify(r))}else console.log("error submit!",t)}))]:[2];case 1:return t.sent(),[2]}}))}))},s=function(e){e&&e.resetFields()};return function(e,t){var c=(0,r.resolveComponent)("el-input"),u=(0,r.resolveComponent)("el-form-item"),d=(0,r.resolveComponent)("el-option"),p=(0,r.resolveComponent)("el-select"),m=(0,r.resolveComponent)("el-divider"),h=(0,r.resolveComponent)("el-switch"),v=(0,r.resolveComponent)("el-checkbox"),g=(0,r.resolveComponent)("el-checkbox-group"),f=(0,r.resolveComponent)("el-button"),y=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(y,{ref_key:"ruleFormRef",ref:o,model:l,rules:i,"label-width":"120px",class:"demo-ruleForm",size:a.value,"status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"组件名称",prop:"description"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{modelValue:l.description,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.description=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"组件标识",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.name=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"组件图标",prop:"icon"},{default:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("img",{src:l.icon,alt:""},null,8,V)]})),_:1}),(0,r.createVNode)(u,{label:"UI容器",prop:"region"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:l.shape,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.shape=e}),placeholder:"Activity zone"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{label:"基础模板",value:"basic-node"}),(0,r.createVNode)(d,{label:"Zone two",value:"beijing"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(m),C,(0,r.createVNode)(u,{label:"使用模板",prop:"delivery"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(h,{modelValue:l.delivery,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.delivery=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"链接桩模板",prop:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(g,{modelValue:l.type,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(v,{label:"conditionInPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 条件输入节点 ")]})),_:1}),(0,r.createVNode)(v,{label:"conditionOutPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 条件输出节点 ")]})),_:1}),(0,r.createVNode)(v,{label:"actionInPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 动作输入节点 ")]})),_:1}),(0,r.createVNode)(v,{label:"actionOutPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 动作输出节点 ")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),N,(0,r.createVNode)(u,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(f,{type:"primary",onClick:t[5]||(t[5]=function(e){return n(o.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 创建 ")]})),_:1}),(0,r.createVNode)(f,{onClick:t[6]||(t[6]=function(e){return s(o.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Reset")]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])}}});const x=S;var w=x,F=(0,r.createElementVNode)("p",{style:{"font-size":"16px",margin:"-5px 0 15px"}},"连接桩规则配置",-1),B=(0,r.defineComponent)({__name:"portComponent",setup:function(e){var t=this,a=(0,r.ref)("default"),o=(0,r.ref)(),l=(0,r.reactive)({name:"",description:"",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:"",region:"",count:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),i=(0,r.reactive)({name:[{required:!0,message:"Please input 组件名称",trigger:"blur"}],shape:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}]}),n=function(e){return(0,c.mG)(t,void 0,void 0,(function(){return(0,c.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,e.validate((function(e,t){if(console.log(l),e){console.log("submit!");var a={name:l.name,icon:l.icon,description:l.name,shape:{template:l.shape},port:{templates:l.type}},r=JSON.parse(localStorage.getItem("config")||"[]");r.push(a),localStorage.setItem("config",JSON.stringify(r))}else console.log("error submit!",t)}))]:[2];case 1:return t.sent(),[2]}}))}))},s=function(e){e&&e.resetFields()};return function(e,t){var c=(0,r.resolveComponent)("el-input"),u=(0,r.resolveComponent)("el-form-item"),d=(0,r.resolveComponent)("el-option"),p=(0,r.resolveComponent)("el-select"),m=(0,r.resolveComponent)("el-divider"),h=(0,r.resolveComponent)("el-checkbox"),v=(0,r.resolveComponent)("el-checkbox-group"),g=(0,r.resolveComponent)("el-button"),f=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(f,{ref_key:"ruleFormRef",ref:o,model:l,rules:i,"label-width":"120px",class:"demo-ruleForm",size:a.value,"status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"连接桩名称",prop:"description"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{modelValue:l.description,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.description=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"连接桩标识",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.name=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"连接桩位置",prop:"region"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:l.shape,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.shape=e}),placeholder:"Activity zone"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{label:"上",value:"top"}),(0,r.createVNode)(d,{label:"下",value:"bottom"}),(0,r.createVNode)(d,{label:"左",value:"left"}),(0,r.createVNode)(d,{label:"右",value:"right"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,{label:"连接桩样式配置",prop:"icon"}),(0,r.createVNode)(m),F,(0,r.createVNode)(u,{label:"链接桩模板",prop:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(v,{modelValue:l.type,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(h,{label:"conditionInPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 条件输入节点 ")]})),_:1}),(0,r.createVNode)(h,{label:"conditionOutPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 条件输出节点 ")]})),_:1}),(0,r.createVNode)(h,{label:"actionInPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 动作输入节点 ")]})),_:1}),(0,r.createVNode)(h,{label:"actionOutPort",name:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 动作输出节点 ")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(u,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(g,{type:"primary",onClick:t[4]||(t[4]=function(e){return n(o.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 创建 ")]})),_:1}),(0,r.createVNode)(g,{onClick:t[5]||(t[5]=function(e){return s(o.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Reset")]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])}}});const D=B;var A=D,L=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,r.ref)("first"),a=function(e,t){console.log(e,t)};return function(e,o){var l=(0,r.resolveComponent)("el-tab-pane"),i=(0,r.resolveComponent)("el-tabs");return(0,r.openBlock)(),(0,r.createBlock)(i,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=function(e){return t.value=e}),type:"card",class:"demo-tabs",onTabClick:a},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(l,{label:"添加组件",name:"first"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(w)]})),_:1}),(0,r.createVNode)(l,{label:"添加连接桩",name:"second"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(A)]})),_:1}),(0,r.createVNode)(l,{label:"Role",name:"third"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Role")]})),_:1}),(0,r.createVNode)(l,{label:"Task",name:"fourth"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Task")]})),_:1})]})),_:1},8,["modelValue"])}}});const E=L;var T=E,P=a(4082),I=function(e){var t=new P.q({target:e});return t},q=function(e){var t=e.graph,a=e.dnd,r=e.event,o=e.options,l=e.data,i=t.createNode(o);return i.setData(l),a.start(i,r),i},O=a(3634),M=a(3230),_=a(1186),J=a(3645),R=function(e){e.bindKey(["meta+c","ctrl+c"],(function(){var t=e.getSelectedCells();return t.length&&e.copy(t),!1}))},U=function(e){e.bindKey(["meta+v","ctrl+v"],(function(){if(!e.isClipboardEmpty()){var t=e.paste({offset:32});e.cleanSelection(),e.select(t)}return!1}))},j=function(e){e.bindKey(["meta+x","ctrl+x"],(function(){var t=e.getSelectedCells();return t.length&&e.cut(t),!1}))},H=function(e){e.bindKey(["meta+z","ctrl+z"],(function(){return e.canUndo()&&e.undo(),!1}))},Z=function(e){e.bindKey(["meta+shift+z","ctrl+shift+z"],(function(){return e.canRedo()&&e.redo(),!1}))},Q=function(e){e.bindKey(["backspace","delete"],(function(){var t=e.getSelectedCells();t.length&&e.removeCells(t)}))},G=a(8711),z=a(4023),W=a(5959),K=function(e){var t=new O.kJ(e);return t.use(new M.H({enabled:!0})),t.use(new G.Y({enabled:!0,multiple:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0})),t.use(new z.T({enabled:!0})),t.use(new J.N({enabled:!0})),t.use(new W.A({enabled:!0})),t.use(new _.D),t},Y=function(e,t){t.forEach((function(t){switch(t){case"copy":R(e);break;case"paste":U(e);break;case"cut":j(e);break;case"undo":H(e);break;case"redo":Z(e);break;case"delete":Q(e);break;default:break}}))},X="mainPageGraph",$="checkSamePort",ee="checkPortType",te="checkOrPort",ae="checkConditionPort";function re(e){var t=e.sourcePort,a=e.targetPort;return!t||!a||t!==a}var oe,le="output",ie="input",ne="condition",se=[le,ne],ce=[ie],ue="conditionPort",de="conditionOutPort",pe="conditionInPort",me="actionPort",he="actionOutPort",ve="actionInPort",ge="basicOrPort",fe="basicOrInPort",ye="basicOrOutPort",be="basicOrConditionPort";function ke(e){var t=e.sourcePortType,a=e.targetPortType;if(se.indexOf(t)>=0&&ce.indexOf(a)>=0)return!0}function Ve(e,t,a){return t!==ie||!e.getIncomingEdges(a)}function Ce(e,t,a){return t!==le||!e.getIncomingEdges(a)}function Ne(e,t,a){return t!==ne||!e.getIncomingEdges(a)&&!e.getOutgoingEdges(a)}function Se(e,t){var a=e.targetCell,r=e.sourcePortName,o=e.sourcePortType,l=e.targetPortName,i=e.targetPortType;return console.log(l,a),r!==ge&&l!==ge||!!Ve(t,i,a)&&(!!Ce(t,i,a)&&!!Ne(t,o,a))}function xe(e,t){var a=e.targetCell,r=e.sourcePortName,o=e.targetPortName,l=e.targetPortType;return r!==ue&&o!==ue||(l!==ie||!t.getIncomingEdges(a))}var we=(oe={},oe[$]=re,oe[ee]=ke,oe[te]=Se,oe[ae]=xe,oe),Fe=we;function Be(e,t,a){return function(){var r=e.length,o=!0;if(t.sourcePort&&t.targetPort){var l=t.sourcePort.split("-"),i=l[0],n=l[1],s=t.targetPort.split("-"),u=s[0],d=s[1];console.log(t.targetPort);for(var p=0;p<r;p++)if(!Fe[e[p]]((0,c.pi)((0,c.pi)({},t),{sourcePortName:i,sourcePortType:n,targetPortName:u,targetPortType:d}),a)){o=!1;break}return o}return!1}}var De=[$,ee,te,ae];function Ae(e){return Be(De,e,this)()}var Le,Ee={validateConnection:Ae,snap:{radius:20},allowBlank:!1,allowMulti:!1,allowLoop:!1,allowNode:!1,allowEdge:!0,allowPort:!0,highlight:!0,connector:{name:"rounded",args:{radius:8}},connectionPoint:"anchor",anchor:"center",router:{name:"manhattan",args:{padding:1}},createEdge:function(){return new O.bn.kS({router:"manhattan",attrs:{line:{}},zIndex:-1})}},Te="basicEdge",Pe={autoResize:!0,grid:{type:"mesh",size:20,visible:!0,args:{color:"#eeeeee",thickness:2}},background:!1,panning:{enabled:!0,modifiers:["alt","meta"],eventTypes:["leftMouseDown"]},mousewheel:{enabled:!0,modifiers:"ctrl",factor:1.1,maxScale:1.5,minScale:.5},highlighting:{magnetAvailable:{name:"stroke",args:{attrs:{fill:"#fff",stroke:"#31d0c6",strokeWidth:4}}}},connecting:{snap:!0,allowBlank:!1,allowMulti:!0,allowLoop:!1,allowNode:!1,allowEdge:!0,allowPort:!0,highlight:!0,connector:Te,connectionPoint:"anchor",edgeAnchor:"ratio",anchor:"center",router:"normal",edgeMovable:!0,vertexDeletable:!0,validateMagnet:function(){return!0},createEdge:function(){return new O.bn.kS({attrs:{line:{stroke:"#000",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:1})}}},Ie=Pe,qe=(0,c.pi)((0,c.pi)({},Ie),{connecting:Ee}),Oe=qe,Me=(Le={},Le[X]=Oe,Le),_e=Me;function Je(e){var t=e.templateName,a=e.container,r=e.config,o={container:a};return t?Object.assign(o,_e[t]):r&&Object.assign(o,Ie,r.options||{},{}),K(o)}function Re(){var e=(0,r.ref)(),t=(0,r.ref)();return(0,r.onMounted)((function(){e.value=Je({templateName:X,container:document.getElementById("container")}),t.value=I(e.value),Y(e.value,["copy","paste","cut","undo","redo","delete"])})),{graph:e,dnd:t}}var Ue=a(2681),je={class:"basic-node"},He={class:"basic-node__desc"},Ze=["src"],Qe={class:"node-name"},Ge=(0,r.defineComponent)({__name:"BasicNode",setup:function(e){var t=(0,r.inject)("getNode"),a=(0,r.ref)(),o=(0,r.ref)({attrData:[]}),l=(0,r.ref)({});return(0,r.onMounted)((function(){t&&(a.value=t(),o.value=a.value.data,l.value=o.value.attrData||{},console.log(o.value),a.value.on("change:data",(function(e){var t=e.current;o.value=t,l.value=o.value.attrData||{}})))})),function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",je,[(0,r.createElementVNode)("div",He,[(0,r.createElementVNode)("img",{class:"basic-node__icon",src:o.value.icon,alt:""},null,8,Ze),(0,r.createElementVNode)("div",Qe,(0,r.toDisplayString)(o.value.description),1)])])}}});const ze=(0,l.Z)(Ge,[["__scopeId","data-v-6e1c6eac"]]);var We=ze,Ke={class:"basic-node"},Ye={class:"node-name"},Xe=(0,r.defineComponent)({__name:"BasicOrNode",setup:function(e){var t=(0,r.inject)("getNode"),a=(0,r.ref)(),o=(0,r.ref)({attrData:[]}),l=(0,r.ref)({});return(0,r.onMounted)((function(){t&&(a.value=t(),o.value=a.value.data,l.value=o.value.attrData||{},console.log(o.value),a.value.on("change:data",(function(e){var t=e.current;o.value=t,l.value=o.value.attrData||{}})))})),function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Ke,[(0,r.createElementVNode)("div",Ye,(0,r.toDisplayString)(o.value.description),1)])}}});const $e=(0,l.Z)(Xe,[["__scopeId","data-v-2d08b82d"]]);var et=$e,tt={class:"basic-node"},at=["src"],rt={class:"node-name"},ot=(0,r.defineComponent)({__name:"BasicDescisionNode",setup:function(e){var t=(0,r.inject)("getNode"),a=(0,r.ref)(),o=(0,r.ref)({attrData:[]}),l=(0,r.ref)({});return(0,r.onMounted)((function(){t&&(a.value=t(),o.value=a.value.data,l.value=o.value.attrData||{},a.value.on("change:data",(function(e){var t=e.current;o.value=t,l.value=o.value.attrData||{}})))})),function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",tt,[(0,r.createElementVNode)("img",{class:"basic-node__icon",src:o.value.icon,alt:""},null,8,at),(0,r.createElementVNode)("div",rt,(0,r.toDisplayString)(l.value.descision||o.value.description),1)])}}});const lt=(0,l.Z)(ot,[["__scopeId","data-v-d7ea66ee"]]);var it=lt,nt={class:"basic-node"},st={class:"node-name"},ct=(0,r.defineComponent)({__name:"BasicLogicNode",setup:function(e){var t=(0,r.inject)("getNode"),a=(0,r.ref)(),o=(0,r.ref)({attrData:[]});return(0,r.onMounted)((function(){t&&(a.value=t(),o.value=a.value.data,a.value.on("change:data",(function(e){var t=e.current;o.value=t})))})),function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",nt,[(0,r.createElementVNode)("div",st,(0,r.toDisplayString)(o.value.description),1)])}}});const ut=(0,l.Z)(ct,[["__scopeId","data-v-e4eb4f70"]]);var dt=ut,pt=function(e){return(0,r.pushScopeId)("data-v-2b3100ca"),e=e(),(0,r.popScopeId)(),e},mt={class:"container"},ht=pt((function(){return(0,r.createElementVNode)("div",{class:"block"},null,-1)})),vt={class:"content"},gt=(0,r.defineComponent)({__name:"GatewayNode",setup:function(e){var t=(0,r.inject)("getNode"),a=(0,r.ref)(),o=(0,r.ref)();return(0,r.onMounted)((function(){t&&(a.value=t(),o.value=a.value.data.id)})),function(e,t){var a=(0,r.resolveComponent)("Close"),l=(0,r.resolveComponent)("el-icon"),i=(0,r.resolveComponent)("Plus");return(0,r.openBlock)(),(0,r.createElementBlock)("div",mt,[ht,(0,r.createElementVNode)("div",vt,["Exclusive"===o.value?((0,r.openBlock)(),(0,r.createBlock)(l,{key:0},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(a)]})),_:1})):(0,r.createCommentVNode)("",!0),"Parallel"===o.value?((0,r.openBlock)(),(0,r.createBlock)(l,{key:1},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i)]})),_:1})):(0,r.createCommentVNode)("",!0)])])}}});const ft=(0,l.Z)(gt,[["__scopeId","data-v-2b3100ca"]]);var yt=ft,bt={class:"container"},kt={class:"block"},Vt=(0,r.defineComponent)({__name:"TaskNode",setup:function(e){var t=(0,r.inject)("getNode"),a=(0,r.ref)(),o=(0,r.ref)(),l={User:"UserFilled"};return(0,r.onMounted)((function(){t&&(a.value=t(),o.value=l[a.value.data.id])})),function(e,t){var a=(0,r.resolveComponent)("el-icon");return(0,r.openBlock)(),(0,r.createElementBlock)("div",bt,[(0,r.createElementVNode)("div",kt,[(0,r.createVNode)(a,null,{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(o.value)))]})),_:1})])])}}});const Ct=(0,l.Z)(Vt,[["__scopeId","data-v-59eba4b4"]]);var Nt,St,xt,wt,Ft,Bt,Dt,At=Ct,Lt={circle:{r:4,magnet:!0,stroke:"#C2C8D5",strokeWidth:1,fill:"#fff"}},Et=a(5934),Tt={groups:(Nt={},Nt[de]={position:"right",attrs:Lt},Nt),items:[{group:de,id:"".concat(ue,"-").concat(le,"-").concat((0,Et.Z)())}]},Pt={groups:(St={},St[pe]={position:"left",attrs:Lt},St),items:[{group:pe,id:"".concat(ue,"-").concat(ie,"-").concat((0,Et.Z)())}]},It={groups:(xt={},xt[he]={position:"right",attrs:Lt},xt),items:[{group:he,id:"".concat(me,"-").concat(ie,"-").concat((0,Et.Z)())}]},qt={groups:(wt={},wt[ve]={position:"left",attrs:Lt},wt),items:[{group:ve,id:"".concat(me,"-").concat(ie,"-").concat((0,Et.Z)())}]},Ot={groups:(Ft={},Ft[fe]={position:"left",attrs:Lt},Ft[ye]={position:"right",attrs:Lt},Ft[be]={position:"bottom",attrs:Lt},Ft),items:[{group:fe,id:"".concat(ge,"-").concat(ie,"-").concat((0,Et.Z)())},{group:ye,id:"".concat(ge,"-").concat(le,"-").concat((0,Et.Z)())},{group:be,id:"".concat(ge,"-").concat(ne,"-").concat((0,Et.Z)())}]},Mt=(Bt={},Bt[de]=Tt,Bt[pe]=Pt,Bt[ge]=Ot,Bt[he]=It,Bt[ve]=qt,Bt),_t=function(e){var t=e.portTemplates,a={groups:{},items:[]};return t&&t.forEach((function(e){a.items=Array.prototype.concat(a.items,Mt[e].items),a.groups=Object.assign({},a.groups,Mt[e].groups||{})})),a},Jt="basic-node",Rt="basic-logic-node",Ut="basic_or_node",jt="basic_descision_node",Ht="basic_descision_group",Zt="gateway_node",Qt="task_node",Gt=function(e){(0,Ue.z2)((0,c.pi)({shape:e.name,width:200,height:50,component:We},e))},zt=function(e){(0,Ue.z2)((0,c.pi)({shape:e.name,width:80,height:80,component:dt},e))},Wt=function(e){(0,Ue.z2)((0,c.pi)({shape:e.name,width:100,height:100,component:et},e))},Kt=function(e){(0,Ue.z2)((0,c.pi)({shape:jt,width:200,height:50,component:it},e))},Yt=!1,Xt=function(){Yt||(Yt=!0,O.kJ.registerNode(Ht,{inherit:"polygon",width:100,height:100,label:"决策组",attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"#FFF",refPoints:"0,10 10,0 20,10 10,20"},text:{fontSize:12,fill:"#262626"}},ports:_t({portTemplates:[pe,de]})}))},$t=function(e){(0,Ue.z2)((0,c.pi)({shape:Zt,width:60,height:60,component:yt},e))},ea=function(e){(0,Ue.z2)((0,c.pi)({shape:Qt,width:200,height:100,component:At},e))},ta=(Dt={},Dt[Jt]=Gt,Dt[Rt]=zt,Dt[Ut]=Wt,Dt[jt]=Kt,Dt[Ht]=Xt,Dt[Zt]=$t,Dt[Qt]=ea,Dt),aa=(0,c.pi)({},ta),ra=function(e){e.forEach((function(e){aa[e.template](e.options)}))},oa=ra;function la(e){e.forEach((function(e){var t,a={};a.ports=_t({portTemplates:(null===(t=e.port)||void 0===t?void 0:t.templates)||[]}),a.name=e.name;var r=e.shape;oa([{template:r.template,options:a}])}))}var ia="descision",na="descisionGroup",sa="equipmentAttr",ca="time",ua="weather",da="FENCE",pa="equipmentActionAttr",ma="messageActionAttr",ha="messageActionAttr",va=[{className:"设备条件",classCode:"equipment",children:[{description:"设备条件",name:"equipment",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Jt},port:{templates:[de,pe]},attr:{template:sa}}]},{className:"定时条件",classCode:"time",children:[]},{className:"天气条件",classCode:"weather",children:[]},{className:"地理围栏条件",classCode:"geofence",children:[]}],ga=[{className:"决策点",classCode:"descision",children:[{id:"descision",name:jt,description:"决策节点",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:jt},port:{templates:[de,pe]},attr:{template:ia}}]},{className:"逻辑关系",classCode:"relation",children:[{id:"andId",name:"or",description:"并行节点",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Rt},port:{templates:[ge]}},{id:"andId",name:"and",description:"会签节点",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Rt},port:{templates:[ge]}},{id:"serialId",name:"serial",description:"串行节点",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Rt},port:{templates:[ge]}}]}],fa=[{className:"决策组",classCode:"descisionGroup",children:[{id:"descisionGroup",name:Ht,description:"决策组",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Ht},attr:{template:na}}]}],ya=[{className:"设备动作",classCode:"equipmentActioin",children:[{id:"prodTypeActionId",name:"prodTypeAction",description:"设备执行",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Jt},port:{templates:[ve]},attr:{template:pa}}]},{className:"消息动作",classCode:"messageGroup",children:[{id:"messageId",name:"messagePush",description:"消息通知",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Jt},port:{templates:[ve]},attr:{template:ma}}]},{className:"延时动作",classCode:"delayGroup",children:[]}],ba={className:"网关",classCode:"gateway",children:[{id:"Exclusive",name:Zt,description:"互斥网关",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Zt},attr:{template:pa}},{id:"Parallel",name:Zt,description:"并行网关",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Zt}}]},ka={className:"任务",classCode:"gateway",children:[{id:"User",name:Qt,description:"人工任务",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Qt}},{id:"Service",name:Qt,description:"服务任务",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Qt}},{id:"Receive",name:Qt,description:"接受任务",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Qt}},{id:"Service",name:Qt,description:"调用活动",icon:"https://resource.haigeek.com/download/resource/selfService/portal/img/41899b4c118d410687b0c199375cc39b.png",shape:{template:Qt}}]},Va={class:"material-content"},Ca=["onMousedown"],Na=["src"],Sa=(0,r.defineComponent)({__name:"materialComponent",props:{graph:null,dnd:null},setup:function(e){var t=e,a=[ba,ka],o=[];a.forEach((function(e){o.push.apply(o,e.children)})),la(o);var l=function(e,a){t.graph&&t.dnd&&q({graph:t.graph,dnd:t.dnd,event:e,options:{shape:a.name},data:(0,c.pi)({},a)})},i=(0,r.ref)(["gateway","task"]),n=function(){console.log("world")};return function(e,t){var o=(0,r.resolveComponent)("el-collapse-item"),s=(0,r.resolveComponent)("el-collapse");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Va,[(0,r.createVNode)(s,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.value=e}),onChange:n},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a,(function(e){return(0,r.createVNode)(o,{title:e.className,name:e.classCode,key:e.classCode},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.children,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"menu-item",key:e.id,onMousedown:function(t){return l(t,e)}},[(0,r.createElementVNode)("img",{src:e.icon},null,8,Na),(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.description),1)],40,Ca)})),128))]})),_:2},1032,["title","name"])})),64))]})),_:1},8,["modelValue"])])}}});const xa=(0,l.Z)(Sa,[["__scopeId","data-v-1ec282a1"]]);var wa=xa;function Fa(e,t,a,o,l,i){const n=(0,r.resolveComponent)("ZoomIn"),s=(0,r.resolveComponent)("el-icon"),c=(0,r.resolveComponent)("el-tooltip"),u=(0,r.resolveComponent)("ZoomOut");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(c,{class:"item",effect:"dark",content:"放大",placement:"bottom"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{onClick:t[0]||(t[0]=e=>i.zoomFn(.2))},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n)])),_:1})])),_:1}),(0,r.createVNode)(c,{class:"item",effect:"dark",content:"缩小",placement:"bottom"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{onClick:t[1]||(t[1]=e=>i.zoomFn(-.2))},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u)])),_:1})])),_:1})])}var Ba={props:{graph:O.kJ},methods:{zoomFn(e){this.graph&&this.graph.zoom(e)}}};const Da=(0,l.Z)(Ba,[["render",Fa]]);var Aa=Da;function La(e,t,a,o,l,i){const n=(0,r.resolveComponent)("FullScreen"),s=(0,r.resolveComponent)("el-icon"),c=(0,r.resolveComponent)("el-tooltip");return(0,r.openBlock)(),(0,r.createBlock)(c,{class:"item",effect:"dark",content:"适应屏幕",placement:"bottom"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{onClick:i.centerFn},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n)])),_:1},8,["onClick"])])),_:1})}var Ea={props:{graph:O.kJ},methods:{centerFn(){if(this.graph){const e=1-this.graph.zoom();e>1?this.graph.zoom(-1*e):this.graph.zoom(e),this.graph.centerContent()}}}};const Ta=(0,l.Z)(Ea,[["render",La]]);var Pa=Ta,Ia=(0,r.defineComponent)({__name:"toolSave",props:{graph:null},emits:["saveData"],setup:function(e,t){var a=t.emit,o=e,l=function(){o.graph&&a("saveData",o.graph.toJSON({diff:!0}))};return function(e,t){var a=(0,r.resolveComponent)("UploadFilled"),o=(0,r.resolveComponent)("el-icon"),i=(0,r.resolveComponent)("el-tooltip");return(0,r.openBlock)(),(0,r.createBlock)(i,{class:"item",effect:"dark",content:"保存",placement:"bottom"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(o,{onClick:l},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(a)]})),_:1})]})),_:1})}}});const qa=Ia;var Oa=qa;function Ma(e,t,a,o,l,i){const n=(0,r.resolveComponent)("Lock"),s=(0,r.resolveComponent)("el-icon"),c=(0,r.resolveComponent)("Unlock"),u=(0,r.resolveComponent)("el-tooltip");return(0,r.openBlock)(),(0,r.createBlock)(u,{class:"item",effect:"dark",content:"是否禁用",placement:"bottom"},{default:(0,r.withCtx)((()=>[l.isLock?((0,r.openBlock)(),(0,r.createBlock)(s,{key:1,onClick:i.lockFn},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c)])),_:1},8,["onClick"])):((0,r.openBlock)(),(0,r.createBlock)(s,{key:0,onClick:i.lockFn},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n)])),_:1},8,["onClick"]))])),_:1})}var _a={props:{graph:O.kJ},data(){return{isLock:!1}},methods:{lockFn:function(){this.isLock=!this.isLock,this.isLock&&this.graph?(this.graph.enablePanning(),this.graph.enableKeyboard()):this.graph&&(this.graph.disablePanning(),this.graph.disableKeyboard())}}};const Ja=(0,l.Z)(_a,[["render",Ma]]);var Ra,Ua=Ja,ja="zoom",Ha="fullScreen",Za="save",Qa="disabled",Ga=(Ra={},Ra[ja]=Aa,Ra[Ha]=Pa,Ra[Za]=Oa,Ra[Qa]=Ua,Ra),za={class:"graph-tools__block"},Wa=(0,r.defineComponent)({__name:"index",props:{tools:null},setup:function(e){return function(t,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",za,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.tools,(function(e){return(0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)((0,r.unref)(Ga)[e]),(0,r.mergeProps)({class:"graph-tools__item"},t.$attrs,{key:e}),null,16)})),128))])}}});const Ka=(0,l.Z)(Wa,[["__scopeId","data-v-42c48e2a"]]);var Ya=Ka;function Xa(e,t){(0,r.watch)(t,(function(){console.log("sdfe"),e("syncData",t)}),{deep:!0})}var $a=a(6486),er=(0,r.defineComponent)({__name:"attrDescision",emits:["syncData"],setup:function(e,t){var a=this,o=t.emit,l=function(e){console.log(e);var t=(0,$a.find)(i,(function(t){return t.id===e}));u.descision=t.name},i=JSON.parse(localStorage.getItem("descisionNodeList")||"[]");console.log(i),(0,r.onMounted)((function(){Xa(o,u)}));var n=(0,r.ref)("default"),s=(0,r.ref)(),u=(0,r.reactive)({name:"Hello",descisionId:"",descision:"",count:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),d=(0,r.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],descisionId:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]}),p=function(e){return(0,c.mG)(a,void 0,void 0,(function(){return(0,c.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,e.validate((function(e,t){e?console.log("submit!"):console.log("error submit!",t)}))]:[2];case 1:return t.sent(),[2]}}))}))},m=function(e){e&&e.resetFields()};return function(e,t){var a=(0,r.resolveComponent)("el-option"),o=(0,r.resolveComponent)("el-select"),c=(0,r.resolveComponent)("el-form-item"),h=(0,r.resolveComponent)("el-checkbox"),v=(0,r.resolveComponent)("el-checkbox-group"),g=(0,r.resolveComponent)("el-button"),f=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(f,{ref_key:"ruleFormRef",ref:s,model:u,rules:d,"label-width":"120px",class:"demo-ruleForm",size:n.value,"status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"决策点",prop:"descision"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(o,{modelValue:u.descisionId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.descisionId=e}),placeholder:"请选择决策点",onChange:l},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(i),(function(e){return(0,r.openBlock)(),(0,r.createBlock)(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"决策方式",prop:"type"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(v,{modelValue:u.type,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(h,{label:"正确",name:"type"}),(0,r.createVNode)(h,{label:"错误",name:"type"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(g,{type:"primary",onClick:t[2]||(t[2]=function(e){return p(s.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" Create ")]})),_:1}),(0,r.createVNode)(g,{onClick:t[3]||(t[3]=function(e){return m(s.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Reset")]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])}}});const tr=er;var ar=tr,rr=(0,r.defineComponent)({__name:"attrDescisionGroup",emits:["syncData"],setup:function(e,t){var a=this,o=t.emit,l=function(e){console.log(e);var t=(0,$a.find)(i,(function(t){return t.id===e}));u.descision=t.name},i=JSON.parse(localStorage.getItem("descisionGroupList")||"[]");(0,r.onMounted)((function(){Xa(o,u)}));var n=(0,r.ref)("default"),s=(0,r.ref)(),u=(0,r.reactive)({name:"Hello",descisionId:"",descision:"",count:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),d=(0,r.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],descisionId:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]}),p=function(e){return(0,c.mG)(a,void 0,void 0,(function(){return(0,c.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,e.validate((function(e,t){e?console.log("submit!"):console.log("error submit!",t)}))]:[2];case 1:return t.sent(),[2]}}))}))},m=function(e){e&&e.resetFields()};return function(e,t){var a=(0,r.resolveComponent)("el-option"),o=(0,r.resolveComponent)("el-select"),c=(0,r.resolveComponent)("el-form-item"),h=(0,r.resolveComponent)("el-button"),v=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(v,{ref_key:"ruleFormRef",ref:s,model:u,rules:d,"label-width":"120px",class:"demo-ruleForm",size:n.value,"status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"决策组",prop:"descision"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(o,{modelValue:u.descisionId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.descisionId=e}),placeholder:"请选择决策组",onChange:l},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(i),(function(e){return(0,r.openBlock)(),(0,r.createBlock)(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(h,{type:"primary",onClick:t[1]||(t[1]=function(e){return p(s.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" Create ")]})),_:1}),(0,r.createVNode)(h,{onClick:t[2]||(t[2]=function(e){return m(s.value)})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Reset")]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])}}});const or=rr;var lr,ir=or,nr=(lr={},lr[ia]=ar,lr[na]=ir,lr);const sr={class:"command-param"},cr={class:"command-left"},ur={class:"command-right"},dr=(0,r.createElementVNode)("span",null,"无",-1),pr={key:2,class:"diff-param"},mr={class:"command-param"},hr={class:"command-left"},vr={key:0,class:"command-right"},gr={class:"input-style"},fr={key:1,class:"device-unit"},yr={class:"device-unit"};function br(e,t,a,o,l,i){const n=(0,r.resolveComponent)("el-option"),s=(0,r.resolveComponent)("el-select"),c=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-input"),d=(0,r.resolveComponent)("el-checkbox"),p=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(p,{ref:"diffForm",class:"device-condition common-form",model:l.ruleForm,rules:l.rules,"label-width":"120px","label-position":"top"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{label:"设备产品类型",prop:"componentId"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.componentId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.ruleForm.componentId=e),filterable:"",placeholder:"请选择设备产品类型","popper-class":"selectCustomAttrs"},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.deviceProductTypeList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.id,label:e.prodtypeName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.createVNode)(c,{label:"设备命令",prop:"deviceCommand"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.deviceCommand,"onUpdate:modelValue":t[1]||(t[1]=e=>l.ruleForm.deviceCommand=e),filterable:"",placeholder:"请选择设备命令","popper-class":"selectCustomAttrs",onChange:i.handleDeviceCommandList},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.deviceCommandList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),l.ruleForm.deviceSkillObject.length>0&&(l.ruleForm.isDeviceSkill||l.ruleForm.noMessage)?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(l.ruleForm.deviceSkillObject,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"diff-param"},[(0,r.createVNode)(c,{label:"事件属性",class:"deviceParam"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.description)+" "+(0,r.toDisplayString)(e.propName),1)])),_:2},1024),(0,r.createVNode)(c,{label:"命令参数",class:"my-select-input deviceParam"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",sr,[(0,r.createElementVNode)("div",cr,[(0,r.createVNode)(s,{modelValue:e.operationSign,"onUpdate:modelValue":t=>e.operationSign=t,"popper-class":"selectCustomAttrs",onChange:e=>i.handleDeviceParamSelect(e,t)},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.operationSignList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.key,label:e.value,value:e.key},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),(0,r.createElementVNode)("div",ur,["enum"===e.propValType||"bool"===e.propValType||"int"===e.propValType&&"1"===e.exchangeType?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,prop:"deviceSkillObject."+t+".param",rules:[{required:!0,message:"参数值不能为空",trigger:"change"}]},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,style:{width:"100%"},placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:e=>i.handleSkillSelect(e,t,"select")},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.variantsList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])):((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,prop:"deviceSkillObject."+t+".param",class:"my-select-input deviceParam",rules:[{required:!0,message:"参数值不能为空",trigger:"blur"},{validator:(t,a,r)=>{i.getVariantsValue(e,a,r)}}]},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,style:{width:"100%"},maxlength:"string"===e.propValType?500:null,placeholder:e.variantsList?""+("请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step):"请输入字符串值",onChange:e=>i.handleSkillSelect(e,t,"input")},null,8,["modelValue","onUpdate:modelValue","maxlength","placeholder","onChange"])])),_:2},1032,["prop","rules"]))])])])),_:2},1024),(0,r.createVNode)(c,{label:"用户编辑",prop:"deviceSkillObject."+t+".require",class:"checkbox-style"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{modelValue:e.require,"onUpdate:modelValue":t=>e.require=t,onChange:e=>i.handleSkillSelect(e,t,"check")},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("支持")])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])])))),128)):0===l.ruleForm.deviceSkillObject.length&&l.ruleForm.isDeviceSkill?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createVNode)(c,{label:"命令参数",prop:"commandParam"},{default:(0,r.withCtx)((()=>[dr])),_:1}),(0,r.createVNode)(c,{label:"用户编辑",class:"checkbox-style"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{disabled:!0},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("支持")])),_:1})])),_:1})],64)):((0,r.openBlock)(),(0,r.createElementBlock)("div",pr,[l.ruleForm.noMessage?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,label:"命令参数",class:"my-select-input deviceParam"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",mr,[(0,r.createElementVNode)("div",hr,[(0,r.createVNode)(s,{modelValue:l.ruleForm.operationSign,"onUpdate:modelValue":t[2]||(t[2]=e=>l.ruleForm.operationSign=e),disabled:l.ruleForm.noAlarm,"popper-class":"selectCustomAttrs",class:(0,r.normalizeClass)(l.ruleForm.noAlarm?"setMaxWidth":"")},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.ruleForm.operationSignList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.key,label:e.value,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","class"])]),l.ruleForm.noAlarm?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",vr,[Array.isArray(l.ruleForm.variantsList)||""===l.ruleForm.deviceCommand?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,prop:"commandParamSelect"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.commandParamSelect,"onUpdate:modelValue":t[3]||(t[3]=e=>l.ruleForm.commandParamSelect=e),style:{width:"100%"},placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:i.handleChangeCommad},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.ruleForm.variantsList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,prop:"inputValue"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",gr,[(0,r.createVNode)(u,{modelValue:l.ruleForm.inputValue,"onUpdate:modelValue":t[4]||(t[4]=e=>l.ruleForm.inputValue=e),type:"text",maxlength:l.ruleForm.variantsList&&l.ruleForm.variantsList.propValType&&"string"==l.ruleForm.variantsList.propValType?500:null,class:(0,r.normalizeClass)(l.ruleForm.variantsList&&l.ruleForm.variantsList.propValType&&"string"==l.ruleForm.variantsList.propValType?"string-width":""),placeholder:l.inputPlaceHolder,onBlur:i.handleChangeInput},null,8,["modelValue","maxlength","class","placeholder","onBlur"])])])),_:1}))])),!Array.isArray(l.ruleForm.variantsList)&&l.ruleForm.variantsList&&l.ruleForm.variantsList.unit&&!l.ruleForm.noAlarm?((0,r.openBlock)(),(0,r.createElementBlock)("div",fr,[(0,r.createElementVNode)("span",yr,(0,r.toDisplayString)(l.ruleForm.variantsList.unit),1)])):(0,r.createCommentVNode)("",!0)])])),_:1})),(0,r.createVNode)(c,{label:"用户编辑",class:"checkbox-style"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{modelValue:l.ruleForm.isRequired,"onUpdate:modelValue":t[5]||(t[5]=e=>l.ruleForm.isRequired=e),disabled:l.ruleForm.noAlarm,onChange:i.handleUuterSupport},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("支持")])),_:1},8,["modelValue","disabled","onChange"])])),_:1})])),(0,r.createVNode)(c,{label:"条件描述",style:{width:"100%"}},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{modelValue:l.ruleForm.desc,"onUpdate:modelValue":t[6]||(t[6]=e=>l.ruleForm.desc=e),maxlength:"100",type:"textarea",class:(0,r.normalizeClass)({"input-focus":l.inputFocus}),"show-word-limit":"",placeholder:"请填写条件描述，最多100字符",onFocus:t[7]||(t[7]=e=>l.inputFocus=!0),onBlur:t[8]||(t[8]=e=>l.inputFocus=!1)},null,8,["modelValue","class"])])),_:1})])),_:1},8,["model","rules"])}var kr=a(4291),Vr="production",Cr="prod",Nr={dev:{api:"",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},test:{api:"",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},prod:{api:"",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},apikaifa:"https://stp.haier.net/mock/290"};"development"===Vr&&(Nr={dev:{api:"/apidev",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},test:{api:"/apitest",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},prod:{api:"/apiprod",web:"https://www.haigeek.com/developercenter/static/develop.html#/"},apikaifa:"https://stp.haier.net/mock/290"});Nr[Cr];var Sr=function(e,t,a,r){return"get"===e.toLowerCase()?kr.iotAxios.get(Nr[Cr].api+t,{params:a},r).catch((function(e){e.status})):kr.iotAxios.post(Nr[Cr].api+t,a,r).catch((function(e){e.status}))},xr={props:{fragmentListData:{type:Object,default(){return{}}},singData:{type:Object,default(){return{}}}},data(){return{inputFocus:!1,ruleForm:{componentId:"",deviceCommand:"",stdDesc:"",isRequired:!1,noMessage:!1,noAlarm:!1,desc:"",operationSign:"equal",operationSignList:[{key:"equal",value:"等于"}],deviceSkillObject:[],key:{desc:"",value:"",id:""},value:{value:"",desc:"",required:!1},params:[],variantsParamList:null,isDeviceSkill:!1,variantsList:null,inputValue:"",commandParamSelect:""},source:this.$route.query.source||"",rules:{componentId:[{required:!0,message:"请选择设备产品类型",trigger:"change"}],deviceCommand:[{required:!0,message:"请选择设备命令",trigger:"change"}],commandParamSelect:[{required:!0,message:"请选择命令参数",trigger:"blur"}],inputValue:[{required:!0,message:"请输入命令参数",trigger:"blur"},{validator:(e,t,a)=>{const r={variantsList:this.ruleForm.variantsList,propValType:this.ruleForm.variantsList.propValType};this.getVariantsValue(r,t,a)},trigger:"blur"}]},deviceProductTypeList:[],deviceCommandList:[],inputPlaceHolder:"",editData:this.singData}},watch:{"ruleForm.componentId":{handler(e,t){if(console.log(e,"val---"),e){t&&e!==t&&(this.editData={});const a=this.deviceProductTypeList.filter((t=>t.id===e));this.ruleForm.stdDesc=a[0].prodtypeName,this.ruleForm.prodtypeName=a[0].prodtypeName,this.ruleForm.prodtypeCode=a[0].prodtypeCode,this.handleDeviceCommand()}},immediate:!0,deep:!0}},mounted(){this.handleDeviceProductType(),Xa(this.$emit,this.ruleForm)},methods:{handleUuterSupport(e){this.ruleForm.value.required=e},handleDeviceParamSelect(e,t){this.ruleForm.params[t].operationSign=e,this.$forceUpdate()},handleDeviceProductType(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/prodtype/getAllProdtypeList":"/developerportal/developer/prodtype/getAllProdtypeList",Sr("post",e).then((e=>{if("00000"===e.retCode)return this.deviceProductTypeList=e.data,!0})).then((()=>{"{}"!==JSON.stringify(this.editData)&&(this.ruleForm.componentId=this.editData.componentId)}))},handleDeviceCommand(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/prodtypeFunction/getProdtypeConditionFunctionList":"/developerportal/developer/prodtypeFunction/getProdtypeConditionFunctionList",Sr("post",e,{prodtypeId:this.ruleForm.componentId}).then((e=>{if("00000"===e.retCode)return e.data.map((e=>{console.log(e.type),"skill"==e.type&&(e.description="(语音)"+e.description),"deviceSkill"==e.type&&(e.description="(技)"+e.description)})),this.deviceCommandList=e.data,this.$nextTick((()=>{this.$refs.diffForm.clearValidate("deviceCommand"),this.ruleForm.isDeviceSkill=!1,this.ruleForm.noMessage=!1,this.ruleForm.deviceSkillObject=[],this.ruleForm.params=[],this.ruleForm.variantsParamList=null,this.ruleForm.variantsList=null,this.ruleForm.inputValue="",this.ruleForm.commandParamSelect="",this.ruleForm.operationSignList=[{key:"equal",value:"等于"}]})),this.ruleForm.deviceCommand="",!0})).then((()=>{"{}"!==JSON.stringify(this.editData)&&(this.ruleForm.deviceCommand=this.editData.key.id,this.handleDeviceCommandList(this.ruleForm.deviceCommand))}))},handleDeviceCommandList(e){console.log("选中的值",e),this.$refs.diffForm.clearValidate(),"{}"!==JSON.stringify(this.editData)&&e!==this.editData.key.id&&(this.editData={}),this.ruleForm.deviceSkillObject=[],this.ruleForm.isDeviceSkill=!1,this.ruleForm.operationSign="equal",this.ruleForm.operationSignList=[{key:"equal",value:"等于"}],this.ruleForm.variantsParamList=null,this.ruleForm.variantsList=null,this.ruleForm.inputValue="",this.ruleForm.commandParamSelect="",this.ruleForm.isRequired=!1,this.ruleForm.params=[];const t=this.deviceCommandList.filter((t=>t.id===e));if("property"===t[0].type)if(this.ruleForm.isDeviceSkill=!1,this.ruleForm.params=[],this.noAlarm=!1,this.noMessage=!1,this.ruleForm.key={desc:t[0].description,value:t[0].name,id:t[0].id},"{}"!==JSON.stringify(this.editData)&&this.$set(this.ruleForm,"desc",this.editData.desc),"int"==t[0].valType){const e=JSON.parse(t[0].variants);this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType,this.ruleForm.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.value.value),this.$set(this.ruleForm,"value",this.editData.value),this.$set(this.ruleForm,"operationSign",this.editData.operationSign),this.$set(this.ruleForm,"isRequired",this.editData.value.required))}else if("bool"==t[0].valType||"enum"==t[0].valType){const e=JSON.parse(t[0].variants);e.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue.toString())})),this.ruleForm.variantsList=e,"bool"==t[0].valType&&(this.ruleForm.operationSignList=[{key:"equal",value:"等于"}]),"enum"==t[0].valType&&(this.ruleForm.operationSignList=[{key:"equal",value:"等于"},{key:"unequal",value:"不等于"}]),"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"commandParamSelect",this.editData.value.value),this.$set(this.ruleForm,"value",this.editData.value),this.$set(this.ruleForm,"operationSign",this.editData.operationSign),this.$set(this.ruleForm,"isRequired",this.editData.value.required))}else if("double"==t[0].valType){const e=JSON.parse(t[0].variants);this.ruleForm.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType,"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.value.value),this.$set(this.ruleForm,"operationSign",this.editData.operationSign),this.$set(this.ruleForm,"value",this.editData.value),this.$set(this.ruleForm,"isRequired",this.editData.value.required))}else"string"==t[0].valType&&(void 0===t[0].variants?this.ruleForm.variantsList={}:this.ruleForm.variantsList=JSON.parse(t[0].variants),this.ruleForm.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"},{key:"greaterThanEqual",value:"高于或等于"},{key:"unequal",value:"不等于"},{key:"lessThanEqual",value:"低于或等于"}],this.inputPlaceHolder="",this.ruleForm.variantsList.propValType="string","{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.value.value),this.$set(this.ruleForm,"value",this.editData.value),this.$set(this.ruleForm,"operationSign",this.editData.operationSign),this.$set(this.ruleForm,"isRequired",this.editData.value.required)));"deviceSkill"===t[0].type?(this.ruleForm.key={desc:t[0].stdDescription,value:t[0].name,id:t[0].id,type:"deviceSkill"},"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"desc",this.editData.desc),this.$set(this.ruleForm,"params",this.editData.params)),this.ruleForm.isDeviceSkill=!0,this.ruleForm.deviceSkillObject=t[0].prodtypeFunctionSubDtoList?t[0].prodtypeFunctionSubDtoList:[],this.ruleForm.deviceSkillObject.length>0?this.ruleForm.deviceSkillObject.map(((e,t)=>{this.$set(e,"param","");const a={desc:e.description,key:{desc:e.description,id:e.id,type:"deviceSkill",value:e.propName},logicalSign:"AND",operationSign:"equal",value:{desc:"",required:!1,value:""}};if("{}"===JSON.stringify(this.editData)&&this.ruleForm.params.push(a),"enum"==e.propValType){if(e.variants){const t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"},{key:"unequal",value:"不等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else if("string"==e.propValType)e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入字符串",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"},{key:"greaterThanEqual",value:"高于或等于"},{key:"unequal",value:"不等于"},{key:"lessThanEqual",value:"低于或等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1);else if("bool"==e.propValType){if(e.variants){const t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else e.propValType,e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",Number(this.editData.params[t].value.value)),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)})):this.ruleForm.params=[]):this.ruleForm.isDeviceSkill=!1,"message"==t[0].type?(this.ruleForm.noMessage=!0,this.ruleForm.key={desc:t[0].stdDescription,value:t[0].name,id:t[0].id,type:"message"},"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"desc",this.editData.desc),this.$set(this.ruleForm,"params",this.editData.params)),this.ruleForm.deviceSkillObject=t[0].prodtypeFunctionSubDtoList?t[0].prodtypeFunctionSubDtoList:[],this.ruleForm.deviceSkillObject.length>0?this.ruleForm.deviceSkillObject.map(((e,t)=>{this.$set(e,"param","");const a={desc:e.description,key:{desc:e.description,id:e.id,type:"message",value:e.propName},logicalSign:"AND",operationSign:"equal",value:{desc:"",required:!1,value:""}};if("{}"===JSON.stringify(this.editData)&&this.ruleForm.params.push(a),"enum"==e.propValType){if(e.variants){const t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"},{key:"unequal",value:"不等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else if("string"==e.propValType)e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入字符串",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"},{key:"greaterThanEqual",value:"高于或等于"},{key:"unequal",value:"不等于"},{key:"lessThanEqual",value:"低于或等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1);else if("bool"==e.propValType){if(e.variants){const t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else if("int"==e.propValType)if("1"===e.exchangeType){if(e.exchangeVariants){const t=this.isJSON_test(e.exchangeVariants)?JSON.parse(e.exchangeVariants):[];t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),e.variantsList=t}e.placeholder="请选择参数",e.operationSignList=[{key:"equal",value:"等于"},{key:"unequal",value:"不等于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.params[t].value.value),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)}else e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",Number(this.editData.params[t].value.value)),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1);else e.variants?(e.variantsList=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.placeholder="请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step,e.unit=e.variantsList.unit?e.variantsList.unit:""):e.placeholder="请输入",e.operationSignList=[{key:"greaterThan",value:"高于"},{key:"equal",value:"等于"},{key:"lessThan",value:"低于"}],"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",Number(this.editData.params[t].value.value)),this.$set(e,"operationSign",this.editData.params[t].operationSign),this.$set(e,"require",this.editData.params[t].value.required),this.$set(e,"value",this.editData.value),this.$set(e,"params",this.editData.params)):(e.operationSign="equal",e.require=!1)})):this.ruleForm.params=[]):this.ruleForm.noMessage=!1,"alarm"==t[0].type?(this.ruleForm.noAlarm=!0,this.ruleForm.params=[],this.ruleForm.key={desc:t[0].description,value:t[0].name,id:t[0].id},this.ruleForm.value={desc:"",required:!1,value:""},"{}"!==JSON.stringify(this.editData)&&this.$set(this.ruleForm,"desc",this.editData.desc)):this.ruleForm.noAlarm=!1},isJSON_test(e){if("string"==typeof e)try{var t=JSON.parse(e);return console.log(t),!0}catch(a){return!1}},getVariantsValue(e,t,a){if(e.variantsList&&t){if("double"===e.propValType&&(this.$vertifyMethods.isDouble(t,2)||a("数据不符合要求"),parseFloat(t)<parseFloat(e.variantsList.minValue)||parseFloat(t)>parseFloat(e.variantsList.maxValue)||parseFloat(t)%parseFloat(e.variantsList.step)!==0?a("参数值数据格式不合法，请重新填写"):a()),"int"===e.propValType){let r=/^[0-9]*$/;r.test(t)||a("数据不符合要求"),console.log(Number(t),Number(e.variantsList.minValue)),Number(t)<Number(e.variantsList.minValue)||Number(t)>Number(e.variantsList.maxValue)||Number(t)%Number(e.variantsList.step)!==0?a("参数值数据格式不合法，请重新填写"):a()}"string"===e.propValType&&a()}else a()},handleSkillSelect(e,t,a){"select"===a?this.ruleForm.deviceSkillObject[t].variantsList.filter((a=>{a.stdValue===e&&(this.ruleForm.params[t].value={desc:a.description,required:this.ruleForm.deviceSkillObject[t].require,value:e})})):"input"===a?this.ruleForm.params[t].value={desc:e,required:this.ruleForm.deviceSkillObject[t].require,value:e}:(this.$set(this.ruleForm.deviceSkillObject[t],"require",e),this.ruleForm.params[t].value.required=e,this.$forceUpdate())},resetFormData(){this.$refs.diffForm.resetFields()},handleChangeCommad(e){e&&this.$refs.diffForm.clearValidate("commandParamSelect");const t=this.ruleForm.variantsList.filter((t=>t.stdValue===e));this.ruleForm.value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleChangeSelectParamSet(e){const t=this.ruleForm.variantsParamList.filter((t=>t.stdValue===e));this.ruleForm.args[0].value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleChangeParamSet(e){let t;this.ruleForm.variantsList.unit&&(t=e.target.value+this.ruleForm.variantsList.unit),this.ruleForm.args[0].value={desc:t,value:e.target.value,required:this.ruleForm.isRequired}},handleChangeInput(e){let t;t=this.ruleForm.variantsList.unit?e.target.value+this.ruleForm.variantsList.unit:e.target.value,this.ruleForm.value={desc:t,value:e.target.value,required:this.ruleForm.isRequired}}}};const wr=(0,l.Z)(xr,[["render",br]]);var Fr=wr;const Br=(0,r.createElementVNode)("span",{style:{margin:"0 6px"}},"时",-1),Dr=(0,r.createElementVNode)("span",{style:{"margin-left":"6px"}},"分",-1);function Ar(e,t,a,o,l,i){const n=(0,r.resolveComponent)("el-option"),s=(0,r.resolveComponent)("el-select"),c=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-checkbox"),d=(0,r.resolveComponent)("el-checkbox-group"),p=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(p,{ref:"diffForm",model:l.value,class:"common-form","label-width":"100px","label-position":"top"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",null,[(0,r.createVNode)(c,{label:"时间设置",class:"item-required"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.value.hours,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value.hours=e),style:{width:"122px"},"popper-class":"selectCustomAttrs",placeholder:""},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setHour,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),Br,(0,r.createVNode)(s,{modelValue:l.value.minutes,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.minutes=e),style:{width:"122px"},"popper-class":"selectCustomAttrs",placeholder:""},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setMinutes,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),Dr])),_:1})]),(0,r.createVNode)(c,{label:"重复设置",class:"item-required"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.value.repeatType,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value.repeatType=e),style:{width:"100%"},"popper-class":"selectCustomAttrs",onChange:i.handleRepeatSet},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.repeatTypeMap,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,r.createVNode)(c,null,{default:(0,r.withCtx)((()=>[4==l.value.repeatType?((0,r.openBlock)(),(0,r.createBlock)(d,{key:0,modelValue:l.value.repeatTypeArr,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.repeatTypeArr=e),onChange:i.changeBox},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.customSetList,(e=>((0,r.openBlock)(),(0,r.createBlock)(u,{key:e.id,label:e.id},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.description),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","onChange"])):(0,r.createCommentVNode)("",!0)])),_:1})])),_:1},8,["model"])}var Lr=function(e,t){"undefined"===typeof t&&(t=!1);for(var a=new Array(e),r=0;r<e;r++)a[r]=t&&r<10?"0"+r.toString():r.toString();return a},Er={initHMS:Lr},Tr={props:{singData:{type:Object,default(){return{}}}},data(){return{value:{desc:"",required:!0,value:"",minutes:"00",hours:"00",repeatType:1,repeatTypeArr:[]},ruleForm:{componentId:"",key:{id:"",value:"",desc:""},logicalSign:"OR",operationSign:"equal"},source:this.$route.query.source||"",setHour:null,setMinutes:null,repeatTypeMap:[{description:"每天",id:1},{description:"工作日(周一至周五)",id:2},{description:"休息日(周六至周日)",id:3},{description:"自定义",id:4}],customSetList:[{description:"星期日",id:1},{description:"星期一",id:2},{description:"星期二",id:3},{description:"星期三",id:4},{description:"星期四",id:5,checked:!1},{description:"星期五",id:6,checked:!1},{description:"星期六",id:7,checked:!1}]}},mounted(){if(this.setHour=Er.initHMS(24,!0),this.setMinutes=Er.initHMS(60,!0),this.getTimer(),"{}"!==JSON.stringify(this.singData)){const e=this.singData.value.value.split("?");this.value.hours=e[0].split(" ")[1],this.value.minutes=e[0].split(" ")[2];const t=e[1].split("*")[1].split(" ")[1];if("1,2,3,4,5,6,7"==t)this.value.repeatType=1;else if("2,3,4,5,6"===t)this.value.repeatType=2;else if("1,7"===t)this.value.repeatType=3;else{this.value.repeatType=4;const t=e[1].split(" ")[2].split(",");t.map((e=>{this.value.repeatTypeArr.push(Number(e))}))}}Xa(this.$emit,this.value)},methods:{getTimer(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/component/cmptPropList/TIMER":"/developerportal/developer/component/cmptPropList/TIMER",Sr("get",e).then((e=>{"00000"===e.retCode&&(this.ruleForm={componentId:e.data[0].componentId,key:{id:e.data[0].id,value:e.data[0].name,desc:e.data[0].description}})}))},handleRepeatSet(){this.value.repeatTypeArr=[]},resetFormData(){this.value={minutes:"00",hours:"00",repeatType:1,repeatTypeArr:[]}},changeBox(e){console.log(e)}}};const Pr=(0,l.Z)(Tr,[["render",Ar]]);var Ir=Pr;const qr={class:"typeinput"},Or={key:0,class:"unit"};function Mr(e,t,a,o,l,i){const n=(0,r.resolveComponent)("el-option"),s=(0,r.resolveComponent)("el-select"),c=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-input"),d=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(d,{ref:"diffForm",model:l.ruleForm,class:"weather-condition common-form",rules:l.rules,"label-width":"100px","label-position":"top"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{label:"设备命令",prop:"id"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.ruleForm.id=e),style:{width:"100%"},placeholder:"请选择设备命令","popper-class":"selectCustomAttrs",onChange:i.handleDeviceCommand},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.deviceCommandList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,r.createElementVNode)("div",null,[(0,r.createVNode)(c,{label:"命令参数",class:"deviceParam"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.operationSign,"onUpdate:modelValue":t[1]||(t[1]=e=>l.ruleForm.operationSign=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",disabled:""==l.ruleForm.id},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.operationSignList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.name,label:e.value,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),l.selectedWeatherCondition.length>0&&"enum"==l.selectedWeatherCondition[0].valType||""==l.ruleForm.id?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,prop:"deviceParam",class:"deviceParamSelect"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.deviceParam,"onUpdate:modelValue":t[2]||(t[2]=e=>l.ruleForm.deviceParam=e),style:{"margin-left":"16px",width:"calc(100% - 16px)"},disabled:""==l.ruleForm.id,"popper-class":"selectCustomAttrs",onChange:i.handleChangeCommandParam},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.equalList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","onChange"])])),_:1})):(0,r.createCommentVNode)("",!0),l.selectedWeatherCondition.length>0&&"int"==l.selectedWeatherCondition[0].valType?((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,prop:"deviceInputParam",class:"deviceParamSelect"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",qr,[(0,r.createVNode)(u,{modelValue:l.ruleForm.deviceInputParam,"onUpdate:modelValue":t[3]||(t[3]=e=>l.ruleForm.deviceInputParam=e),placeholder:l.dataPlaceHolder,disabled:""==l.ruleForm.id,onBlur:i.handleBlur},null,8,["modelValue","placeholder","disabled","onBlur"]),null!=l.equalList?((0,r.openBlock)(),(0,r.createElementBlock)("span",Or,(0,r.toDisplayString)(l.equalList.unit),1)):(0,r.createCommentVNode)("",!0)])])),_:1})):(0,r.createCommentVNode)("",!0)])),_:1})]),(0,r.createVNode)(c,{label:"条件描述",style:{width:"100%"}},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{modelValue:l.ruleForm.desc,"onUpdate:modelValue":t[4]||(t[4]=e=>l.ruleForm.desc=e),type:"textarea",maxlength:"100",rows:2,class:(0,r.normalizeClass)({"input-focus":l.inputFocus}),"show-word-limit":"",placeholder:"请填写条件描述，最多100字符",onFocus:t[5]||(t[5]=e=>l.inputFocus=!0),onBlur:t[6]||(t[6]=e=>l.inputFocus=!1)},null,8,["modelValue","class"])])),_:1})])),_:1},8,["model","rules"])}var _r={props:{singData:{type:Object,default(){return{}}}},data(){return{inputFocus:!1,ruleForm:{componentId:"",id:"",deviceParam:"",deviceInputParam:"",operationSign:"equal",desc:"",key:{desc:"",id:"",value:""},value:{desc:"",required:!0,value:""}},rules:{id:[{required:!0,message:"请选择设备命令",trigger:"change"}],deviceParam:[{required:!0,message:"命令参数数据格式不合法，请重新填写",trigger:"change"}],deviceInputParam:[{required:!0,validator:(e,t,a)=>{t?t<this.equalList.minValue||t>this.equalList.maxValue||t%this.equalList.step!==0?a(new Error("命令参数数据格式不合法，请重新填写")):a():a(new Error("数据不符合要求"))},trigger:"blur"}]},source:this.$route.query.source||"",deviceCommandList:[],selectedWeatherCondition:[],equalList:null,operationSignList:[{name:"equal",value:"等于"}],dataPlaceHolder:""}},watch:{"ruleForm.id":{handler(e){if(e){const t=this.deviceCommandList.filter((t=>t.id==e));this.ruleForm.key={desc:t[0].description,id:t[0].id,value:t[0].name},this.ruleForm.componentId=t[0].componentId,"enum"==t[0].valType&&(this.equalList=JSON.parse(t[0].variants),t[0].isLegal=!0,this.operationSignList=[{name:"equal",value:"等于"}],t[0].operationSign="equal",this.dataPlaceHolder=""),"int"==t[0].valType&&(this.equalList=JSON.parse(t[0].variants),t[0].isLegal=!0,this.operationSignList=[{name:"greaterThan",value:"高于"},{name:"lessThan",value:"低于"}],this.dataPlaceHolder="请输入"+this.equalList.minValue+"到"+this.equalList.maxValue+",步长为"+this.equalList.step),this.selectedWeatherCondition=t,this.ruleForm.operationSign=this.operationSignList[0].name}}}},mounted(){this.$refs.diffForm.clearValidate(),this.getDeivceCommand(),Xa(this.$emit,this.ruleForm)},methods:{getDeivceCommand(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/component/cmptPropList/WEATHER":"/developerportal/developer/component/cmptPropList/WEATHER",Sr("get",e).then((e=>{"00000"===e.retCode&&(this.deviceCommandList=e.data)})).then((()=>{if("{}"!==JSON.stringify(this.singData)){this.ruleForm={...this.singData},this.ruleForm.id=this.singData.key.id;const e=this.deviceCommandList.filter((e=>e.id==this.ruleForm.id));"enum"==e[0].valType&&"{}"!==JSON.stringify(this.singData)&&this.$set(this.ruleForm,"deviceParam",this.singData.value.value),"int"==e[0].valType&&"{}"!==JSON.stringify(this.singData)&&this.$set(this.ruleForm,"deviceInputParam",this.singData.value.value)}}))},handleDeviceCommand(){this.$refs.diffForm.clearValidate("deviceParam"),this.$refs.diffForm.clearValidate("deviceInputParam"),this.ruleForm.deviceInputParam="",this.ruleForm.deviceParam=""},handleBlur(e){this.ruleForm.value={desc:e.target.value+this.equalList.unit,required:!0,value:e.target.value}},handleChangeCommandParam(e){const t=this.equalList.filter((t=>t.stdValue==e));this.ruleForm.value={desc:t[0].description,required:!0,value:e}},resetFormData(){this.ruleForm={id:"",deviceParam:"",operationSign:"equal",desc:""},this.equalList=null,this.selectedWeatherCondition=[],this.$refs.diffForm.resetFields(),this.operationSignList=[{name:"equal",value:"等于"}]}}};const Jr=(0,l.Z)(_r,[["render",Mr]]);var Rr=Jr;function Ur(e,t,a,o,l,i){const n=(0,r.resolveComponent)("el-option"),s=(0,r.resolveComponent)("el-select"),c=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-input"),d=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(d,{ref:"diffForm",model:l.ruleForm,rules:l.rules,class:"geography-condition common-form","label-width":"100px","label-position":"top"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{label:"设备命令",prop:"id"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.id,"onUpdate:modelValue":t[0]||(t[0]=e=>l.ruleForm.id=e),style:{width:"100%"},placeholder:"请选择设备命令","popper-class":"selectCustomAttrs",onChange:i.handleDeviceCommand},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.deviceCommandList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,r.createElementVNode)("div",null,[(0,r.createVNode)(c,{label:"命令参数",class:"deviceParam"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.operationSign,"onUpdate:modelValue":t[1]||(t[1]=e=>l.ruleForm.operationSign=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",disabled:""==l.ruleForm.id},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.operationSignList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.name,label:e.value,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),l.selectedWeatherCondition.length>0&&"enum"==l.selectedWeatherCondition[0].valType||""==l.ruleForm.id?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,prop:"deviceParam",class:"deviceParamSelect"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.deviceParam,"onUpdate:modelValue":t[2]||(t[2]=e=>l.ruleForm.deviceParam=e),style:{"margin-left":"16px",width:"199%"},disabled:""==l.ruleForm.id,placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:i.handleChangeCommandParam},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.equalList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","onChange"])])),_:1})):(0,r.createCommentVNode)("",!0)])),_:1})]),(0,r.createVNode)(c,{label:"条件描述",style:{width:"100%"}},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{modelValue:l.ruleForm.desc,"onUpdate:modelValue":t[3]||(t[3]=e=>l.ruleForm.desc=e),type:"textarea",maxlength:"100",rows:2,class:(0,r.normalizeClass)({"input-focus":l.inputFocus}),"show-word-limit":"",placeholder:"请填写条件描述，最多100字符",onFocus:t[4]||(t[4]=e=>l.inputFocus=!0),onBlur:t[5]||(t[5]=e=>l.inputFocus=!1)},null,8,["modelValue","class"])])),_:1})])),_:1},8,["model","rules"])}var jr={props:{singData:{type:Object,default(){return{}}}},data(){return{inputFocus:!1,ruleForm:{componentId:"",id:"",deviceParam:"",operationSign:"equal",desc:"",key:{desc:"",id:"",value:""},value:{desc:"",required:!0,value:""}},source:this.$route.query.source||"",rules:{id:[{required:!0,message:"请选择设备命令",trigger:"change"}],deviceParam:[{required:!0,message:"命令参数数据格式不合法，请重新填写",trigger:"change"}]},deviceCommandList:[],selectedWeatherCondition:[],equalList:null,operationSignList:[{name:"equal",value:"等于"}]}},watch:{"ruleForm.id":{handler(e){if(e){const t=this.deviceCommandList.filter((t=>t.id==e));this.ruleForm.key={desc:t[0].description,id:t[0].id,value:t[0].name},this.ruleForm.componentId=t[0].componentId,"enum"==t[0].valType&&(this.equalList=JSON.parse(t[0].variants),t[0].isLegal=!0,this.operationSignList=[{name:"equal",value:"等于"}],t[0].operationSign="equal"),this.selectedWeatherCondition=t,this.ruleForm.operationSign=this.operationSignList[0].name}}}},mounted(){this.$refs.diffForm.clearValidate(),this.getDeivceCommand()},methods:{getDeivceCommand(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/component/cmptPropList/GEOFENCE":"/developerportal/developer/component/cmptPropList/GEOFENCE",Sr("get",e).then((e=>{"00000"===e.retCode&&(this.deviceCommandList=e.data)})).then((()=>{"{}"!==JSON.stringify(this.singData)&&(this.ruleForm={...this.singData},this.$set(this.ruleForm,"deviceParam",this.singData.value.value),this.ruleForm.id=this.singData.key.id)}))},handleDeviceCommand(){this.$refs.diffForm.clearValidate("deviceParam")},handleChangeCommandParam(e){const t=this.equalList.filter((t=>t.stdValue==e));this.ruleForm.value={desc:t[0].description,required:!0,value:e}},resetFormData(){this.ruleForm={id:"",deviceParam:"",operationSign:"equal",desc:""},this.equalList=null,this.selectedWeatherCondition=[],this.$refs.diffForm.resetFields(),this.operationSignList=[{name:"equal",value:"等于"}]}}};const Hr=(0,l.Z)(jr,[["render",Ur]]);var Zr=Hr;const Qr=(0,r.createElementVNode)("span",null,"无",-1),Gr={key:2,class:"diff-param"},zr={class:"command-param"},Wr={class:"command-left"},Kr={key:0,class:"command-right"},Yr={key:1,class:"command-right"},Xr={class:"input-style"},$r={key:2,class:"device-unit"},eo={class:"device-unit"};function to(e,t,a,o,l,i){const n=(0,r.resolveComponent)("el-option"),s=(0,r.resolveComponent)("el-select"),c=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-input"),d=(0,r.resolveComponent)("el-checkbox"),p=(0,r.resolveComponent)("h-button"),m=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(m,{ref:"diffForm",class:"command-action common-form",model:l.ruleForm,rules:l.rules,"label-width":"120px","label-position":"top"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{label:"设备产品类型",prop:"componentId"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.componentId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.ruleForm.componentId=e),"popper-class":"selectCustomAttrs",filterable:"",placeholder:"请选择设备产品类型"},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.deviceProductTypeList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.id,label:e.prodtypeName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.createVNode)(c,{label:"设备命令",prop:"deviceCommand"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.deviceCommand,"onUpdate:modelValue":t[1]||(t[1]=e=>l.ruleForm.deviceCommand=e),"popper-class":"selectCustomAttrs",filterable:"",placeholder:"请选择设备命令",onChange:i.handleDeviceCommandList},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.deviceCommandList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),l.ruleForm.deviceSkillObject.length>0&&l.ruleForm.isDeviceSkill?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(l.ruleForm.deviceSkillObject,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"diff-param"},[(0,r.createVNode)(c,{label:"参数名称"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.description),1)])),_:2},1024),"enum"===e.propValType||"bool"===e.propValType?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,label:"参数值",prop:"deviceSkillObject."+t+".param",rules:[{required:!0,message:"参数值不能为空",trigger:"change"}]},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:e=>i.handleSkillSelect(e,t,"select")},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.variantsList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])):((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,label:"参数值",prop:"deviceSkillObject."+t+".param",rules:[{required:!0,message:"参数值不能为空",trigger:"blur"},{validator:(t,a,r)=>{i.getVariantsValue(e,a,r)}}]},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,style:{width:"100%"},placeholder:e.variantsList?""+("请输入"+e.variantsList.minValue+"到"+e.variantsList.maxValue+",步长:"+e.variantsList.step):"请输入字符串值",onChange:e=>i.handleSkillSelect(e,t,"input")},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"])])),_:2},1032,["prop","rules"])),(0,r.createVNode)(c,{label:"用户编辑",prop:"deviceSkillObject."+t+".require",class:"checkbox-style"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{modelValue:e.require,"onUpdate:modelValue":t=>e.require=t,onChange:e=>i.handleSkillSelect(e,t,"check")},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("支持")])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])])))),128)):0===l.ruleForm.deviceSkillObject.length&&l.ruleForm.isDeviceSkill?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createVNode)(c,{label:"命令参数",prop:"commandParam"},{default:(0,r.withCtx)((()=>[Qr])),_:1}),(0,r.createVNode)(c,{label:"用户编辑",class:"checkbox-style"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{disabled:!0},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("支持")])),_:1})])),_:1})],64)):((0,r.openBlock)(),(0,r.createElementBlock)("div",Gr,[(0,r.createVNode)(c,{label:"命令参数",class:"my-select-input deviceParam"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",zr,[(0,r.createElementVNode)("div",Wr,[(0,r.createVNode)(p,{type:"third",disabled:"group"==l.ruleForm.propClass||l.ruleForm.isSkill},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("定量")])),_:1},8,["disabled"])]),""!==l.ruleForm.deviceCommand&&"group"!==l.ruleForm.propClass&&"skill"!==l.ruleForm.propClass?((0,r.openBlock)(),(0,r.createElementBlock)("div",Kr,[Array.isArray(l.ruleForm.variantsList)?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,prop:"commandParamSelect"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.commandParamSelect,"onUpdate:modelValue":t[2]||(t[2]=e=>l.ruleForm.commandParamSelect=e),style:{"max-width":"100%"},placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:i.handleChangeCommad},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.ruleForm.variantsList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,prop:"inputValue"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)("string"===l.ruleForm.variantsList.propValType?"input-string":"input-style")},[(0,r.createVNode)(u,{modelValue:l.ruleForm.inputValue,"onUpdate:modelValue":t[3]||(t[3]=e=>l.ruleForm.inputValue=e),type:"text",placeholder:l.inputPlaceHolder,onBlur:i.handleChangeInput},null,8,["modelValue","placeholder","onBlur"])],2)])),_:1}))])):(0,r.createCommentVNode)("",!0),"skill"===l.ruleForm.propClass&&l.ruleForm.variantsList.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",Yr,[Array.isArray(l.ruleForm.variantsList)?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,prop:"commandParamSelect"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.commandParamSelect,"onUpdate:modelValue":t[4]||(t[4]=e=>l.ruleForm.commandParamSelect=e),placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:i.handleSkillChangeCommad},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.ruleForm.variantsList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.id,label:e.description,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,prop:"inputValue"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",Xr,[(0,r.createVNode)(u,{modelValue:l.ruleForm.inputValue,"onUpdate:modelValue":t[5]||(t[5]=e=>l.ruleForm.inputValue=e),type:"text",placeholder:l.inputPlaceHolder,onBlur:i.handleChangeInput},null,8,["modelValue","placeholder","onBlur"])])])),_:1}))])):(0,r.createCommentVNode)("",!0),!Array.isArray(l.ruleForm.variantsList)&&l.ruleForm.variantsList&&l.ruleForm.variantsList.unit?((0,r.openBlock)(),(0,r.createElementBlock)("div",$r,[(0,r.createElementVNode)("span",eo,(0,r.toDisplayString)(l.ruleForm.variantsList.unit),1)])):(0,r.createCommentVNode)("",!0)])])),_:1}),""!==l.ruleForm.commandParamSelect&&l.ruleForm.deviceSkillObject.length>0&&("enum"===l.ruleForm.deviceSkillObject[0].propValType||"bool"===l.ruleForm.deviceSkillObject[0].propValType)?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,prop:"paramSelectSet",label:"参数配置"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(s,{modelValue:l.ruleForm.paramSelectSet,"onUpdate:modelValue":t[6]||(t[6]=e=>l.ruleForm.paramSelectSet=e),placeholder:"请选择参数","popper-class":"selectCustomAttrs",onChange:i.handleChangeSelectParamSet},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.ruleForm.variantsParamList,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e.stdValue,label:e.description,value:e.stdValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):(0,r.createCommentVNode)("",!0),""!==l.ruleForm.commandParamSelect&&l.ruleForm.deviceSkillObject.length>0&&("string"===l.ruleForm.deviceSkillObject[0].propValType||"int"===l.ruleForm.deviceSkillObject[0].propValType||"double"===l.ruleForm.deviceSkillObject[0].propValType)?((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,prop:"paramInputSet",label:"参数配置"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{modelValue:l.ruleForm.paramInputSet,"onUpdate:modelValue":t[7]||(t[7]=e=>l.ruleForm.paramInputSet=e),style:{width:"100%"},onBlur:i.handleChangeParamSet},null,8,["modelValue","onBlur"])])),_:1})):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(c,{label:"用户编辑",class:"checkbox-style"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{modelValue:l.ruleForm.isRequired,"onUpdate:modelValue":t[8]||(t[8]=e=>l.ruleForm.isRequired=e),disabled:"group"==l.ruleForm.propClass||l.ruleForm.isSkill},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("支持")])),_:1},8,["modelValue","disabled"])])),_:1})])),(0,r.createVNode)(c,{label:"动作描述"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{modelValue:l.ruleForm.description,"onUpdate:modelValue":t[9]||(t[9]=e=>l.ruleForm.description=e),maxlength:"100",type:"textarea",class:(0,r.normalizeClass)({"input-focus":l.inputFocus}),"show-word-limit":"",placeholder:"请填写动作描述，最多100字符",onFocus:t[10]||(t[10]=e=>l.inputFocus=!0),onBlur:t[11]||(t[11]=e=>l.inputFocus=!1)},null,8,["modelValue","class"])])),_:1})])),_:1},8,["model","rules"])}var ao={props:{fragmentListData:{type:Object,default(){return{}}},singData:{type:Object,default(){return{}}}},data(){return{inputFocus:!1,ruleForm:{componentId:"",deviceCommand:"",stdDesc:"",isRequired:!1,description:"",deviceSkillObject:[{param:"",require:!1}],args:[],operation:{desc:"",id:"",value:""},variantsParamList:null,isDeviceSkill:!1,isSkill:!1,propClass:"",variantsList:null,inputValue:"",commandParamSelect:"",paramSelectSet:"",paramInputSet:""},source:this.$route.query.source||"",rules:{componentId:[{required:!0,message:"请选择设备产品类型",trigger:"change"}],deviceCommand:[{required:!0,message:"请选择设备命令",trigger:"change"}],commandParamSelect:[{required:!0,message:"请选择命令参数",trigger:"blur"}],paramSelectSet:[{required:!0,message:"请选择参数配置",trigger:"change"}],paramInputSet:[{required:!0,message:"请输入参数配置",trigger:"blur"}],inputValue:[{required:!0,message:"请输入命令参数",trigger:"blur"},{validator:(e,t,a)=>{console.log(e,t,a),console.log(this.ruleForm.variantsList,"---");const r={variantsList:this.ruleForm.variantsList,propValType:this.ruleForm.variantsList.propValType};this.getVariantsValue(r,t,a)},trigger:"blur"}]},deviceSkillObjectRules:{deviceSkillObjectId:[{required:!0,message:"jaaa",trigger:"blur"},{validator:(e,t,a)=>{console.log(e,t,a)}}],deviceSkillObjectDesc:[{required:!0,message:"jaaa",trigger:"blur"},{validator:(e,t,a)=>{console.log(e),console.log(t),console.log(a)}}]},deviceProductTypeList:[],deviceCommandList:[],sceneDeviceCondition:{sceneInfo:null,status:null,FragmentList:null,triggerType:null},inputPlaceHolder:"",editData:this.singData}},watch:{"ruleForm.componentId":{handler(e,t){if(e){t&&e!==t&&(this.editData={});const a=this.deviceProductTypeList.filter((t=>t.id===e));this.ruleForm.stdDesc=a[0].prodtypeName,this.handleDeviceCommand()}},immediate:!0,deep:!0}},mounted(){this.handleDeviceProductType()},methods:{handleDeviceProductType(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/prodtype/getAllProdtypeList":"/developerportal/developer/prodtype/getAllProdtypeList",Sr("post",e).then((e=>{if("00000"===e.retCode)return this.deviceProductTypeList=e.data,!0})).then((()=>{"{}"!==JSON.stringify(this.editData)&&(this.ruleForm.componentId=this.editData.control.componentId)}))},handleDeviceCommand(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/prodtypeFunction/getProdtypeActionFunctionList":"/developerportal/developer/prodtypeFunction/getProdtypeActionFunctionList",Sr("post",e,{prodtypeId:this.ruleForm.componentId}).then((e=>{if("00000"===e.retCode)return e.data.map((e=>{console.log(e.type,e.valType,"----"),"skill"==e.type&&(e.description="(语音)"+e.description),"deviceSkill"==e.type&&(e.description="(技)"+e.description)})),this.deviceCommandList=e.data,this.$nextTick((()=>{this.$refs.diffForm.clearValidate("deviceCommand"),this.ruleForm.isDeviceSkill=!1,this.ruleForm.isSkill=!1,this.ruleForm.deviceSkillObject=[],this.ruleForm.args=[],this.ruleForm.variantsParamList=null,this.ruleForm.variantsList=null,this.ruleForm.inputValue="",this.ruleForm.commandParamSelect="",this.ruleForm.paramSelectSet="",this.ruleForm.paramInputSet="",this.ruleForm.propClass="",this.ruleForm.operation={desc:"",id:"",value:""}})),this.ruleForm.deviceCommand="",!0})).then((()=>{"{}"!==JSON.stringify(this.editData)&&(this.editData.control.args&&!this.editData.control.operation?this.ruleForm.deviceCommand=this.editData.control.args[0].name.id:this.ruleForm.deviceCommand=this.editData.control.operation.id,this.handleDeviceCommandList(this.ruleForm.deviceCommand))}))},handleDeviceCommandList(e){console.log("选中的值",e),this.$refs.diffForm.clearValidate(),this.ruleForm.isDeviceSkill=!1,this.ruleForm.isSkill=!1,this.ruleForm.deviceSkillObject=[],this.ruleForm.args=[],this.ruleForm.variantsParamList=null,this.ruleForm.variantsList=null,this.ruleForm.isRequired=!1,this.ruleForm.inputValue="",this.ruleForm.paramSelectSet="",this.ruleForm.paramInputSet="",this.ruleForm.commandParamSelect="","{}"!==JSON.stringify(this.editData)&&(this.editData.control.args&&!this.editData.control.operation?e!==this.editData.control.args[0].name.id?(this.editData={},this.$set(this.ruleForm,"args",[])):this.$set(this.ruleForm,"args",this.editData.control.args):e!==this.editData.control.operation.id?(this.editData={},this.$set(this.ruleForm,"args",[])):this.$set(this.ruleForm,"args",this.editData.control.args));const t=this.deviceCommandList.filter((t=>t.id===e));if("{}"!==JSON.stringify(this.editData)&&this.$set(this.ruleForm,"description",this.editData.description),"property"===t[0].type){this.ruleForm.isDeviceSkill=!1,this.ruleForm.isSkill=!1,this.ruleForm.propClass="";const e={name:{desc:t[0].description,id:t[0].id,value:t[0].propName}};if("{}"===JSON.stringify(this.editData)&&this.ruleForm.args.push(e),"int"==t[0].valType){const e=JSON.parse(t[0].variants);this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType,"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required))}else if("bool"==t[0].valType||"enum"==t[0].valType){const e=JSON.parse(t[0].variants);e.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")})),this.ruleForm.variantsList=e,"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"commandParamSelect",this.editData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required)),console.log(this.ruleForm.variantsList,"pro")}else if("double"==t[0].valType){const e=JSON.parse(t[0].variants);this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType,"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required))}else if("string"==t[0].valType){if(console.log(t[0],"data------------"),t[0].variants){const e=JSON.parse(t[0].variants);e.minValue?(this.inputPlaceHolder="请输入"+e.minValue+"到"+e.maxValue+",步长:"+e.step,this.ruleForm.variantsList=e,this.ruleForm.variantsList.propValType=t[0].valType):this.ruleForm.variantsList={propValType:t[0].valType}}else this.ruleForm.variantsList={propValType:"string"};"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"inputValue",this.editData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required))}}"group"===t[0].type&&(console.log(222),this.ruleForm.isDeviceSkill=!1,this.ruleForm.isSkill=!1,this.ruleForm.propClass="group",this.ruleForm.operation={desc:t[0].stdDescription,id:t[0].id,value:t[0].name},console.log("group")),"skill"===t[0].type&&(this.ruleForm.isDeviceSkill=!1,this.ruleForm.propClass="skill",this.ruleForm.operation={desc:t[0].stdDescription,id:t[0].id,value:t[0].name},this.ruleForm.deviceSkillObject=t[0].prodtypeFunctionSubDtoList?t[0].prodtypeFunctionSubDtoList:[],this.ruleForm.variantsList=this.ruleForm.deviceSkillObject,this.ruleForm.deviceSkillObject.length>0?(this.ruleForm.isSkill=!1,this.ruleForm.deviceSkillObject.map((e=>{const t={name:{desc:e.description,id:e.id,required:!1,value:e.propName},value:{desc:"",required:!1,value:""}};"{}"===JSON.stringify(this.editData)&&this.ruleForm.args.push(t),e.variants&&(this.ruleForm.variantsParamList=this.isJSON_test(e.variants)?JSON.parse(e.variants):[]),console.log(this.ruleForm.variantsParamList,"this.ruleForm.variantsParamList"),"{}"!==JSON.stringify(this.editData)&&(this.$set(this.ruleForm,"commandParamSelect",this.singData.control.args[0].name.id),this.$set(this.ruleForm,"paramSelectSet",this.singData.control.args[0].value.value),this.$set(this.ruleForm,"paramInputSet",this.singData.control.args[0].value.value),this.$set(this.ruleForm,"isRequired",this.editData.control.args[0].value.required))})),console.log(this.ruleForm.args,"---this.ruleForm.args")):(this.ruleForm.args=[],this.ruleForm.isSkill=!0)),"deviceSkill"===t[0].type&&(console.log(444),this.ruleForm.isSkill=!1,this.ruleForm.propClass="deviceSkill",this.ruleForm.operation={desc:t[0].stdDescription,id:t[0].id,value:t[0].name},this.ruleForm.isDeviceSkill=!0,this.ruleForm.deviceSkillObject=t[0].prodtypeFunctionSubDtoList?t[0].prodtypeFunctionSubDtoList:[],this.ruleForm.deviceSkillObject.length>0?this.ruleForm.deviceSkillObject.map(((e,t)=>{this.$set(e,"param","");const a={name:{desc:e.description,id:e.id,required:!1,value:e.propName},value:{desc:"",required:!1,value:""}};if(console.log(e,"item------"),e.variants){let t;"enum"==e.propValType||"bool"==e.propValType?(t=this.isJSON_test(e.variants)?JSON.parse(e.variants):[],t.map((e=>{"string"!==typeof e.stdValue&&(e.stdValue=e.stdValue+"")}))):t=this.isJSON_test(e.variants)?JSON.parse(e.variants):"",e.variantsList=t}"{}"===JSON.stringify(this.editData)&&this.ruleForm.args.push(a),"{}"!==JSON.stringify(this.editData)?(this.$set(e,"param",this.editData.control.args[t].value.value),this.$set(e,"require",this.editData.control.args[t].value.required)):e.require=!1})):this.ruleForm.args=[]),console.log(t,"data------")},isJSON_test(e){if("string"==typeof e)try{var t=JSON.parse(e);return console.log("转换成功："+t),!0}catch(a){return!1}},getVariantsValue(e,t,a){if(e.variantsList&&t){if("double"===e.propValType&&(this.$vertifyMethods.isDouble(t,2)||a("数据不符合要求"),parseFloat(t)<parseFloat(e.variantsList.minValue)||parseFloat(t)>parseFloat(e.variantsList.maxValue)||parseFloat(t)%parseFloat(e.variantsList.step)!==0?a("参数值数据格式不合法，请重新填写"):a()),"int"===e.propValType){let r=/^[0-9]*$/;r.test(t)||a("数据不符合要求"),Number(t)<Number(e.variantsList.minValue)||Number(t)>Number(e.variantsList.maxValue)||Number(t)%Number(e.variantsList.step)!==0?a("参数值数据格式不合法，请重新填写"):a()}"string"===e.propValType&&a()}else a()},handleSkillSelect(e,t,a){console.log(e,t,a),"select"===a?this.ruleForm.deviceSkillObject[t].variantsList.filter((a=>{a.stdValue===e&&(this.ruleForm.args[t].value={desc:a.description,required:this.ruleForm.deviceSkillObject[t].require,value:e})})):"input"===a?this.ruleForm.args[t].value={desc:e,required:this.ruleForm.deviceSkillObject[t].require,value:e}:(this.$set(this.ruleForm.deviceSkillObject[t],"require",e),console.log(this.ruleForm.args,"this.ruleForm.args"),this.ruleForm.args[t].value.required=e,this.$forceUpdate())},resetFormData(){this.$refs.diffForm.resetFields()},handleChangeCommad(e){console.log(e,"e----"),e&&this.$refs.diffForm.clearValidate("commandParamSelect"),console.log(this.ruleForm.variantsList," this.ruleForm.variantsList");const t=this.ruleForm.variantsList.filter((t=>t.stdValue===e));this.ruleForm.args[0].value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleSkillChangeCommad(e){e&&this.$refs.diffForm.clearValidate("commandParamSelect"),console.log(this.ruleForm.variantsList," this.ruleForm.variantsList");const t=this.ruleForm.variantsList.filter((t=>t.id===e));this.ruleForm.args[0].value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleChangeSelectParamSet(e){const t=this.ruleForm.variantsParamList.filter((t=>t.stdValue===e));this.ruleForm.args[0].value={desc:t[0].description,value:e,required:this.ruleForm.isRequired}},handleChangeParamSet(e){let t;console.log(e,"eeeeee"),t=this.ruleForm.variantsList.unit?e.target.value+this.ruleForm.variantsList.unit:e.target.value,this.ruleForm.args[0].value={desc:t,value:e.target.value,required:this.ruleForm.isRequired},console.log(this.ruleForm.args[0].value,"this.ruleForm.args[0].value")},handleChangeInput(e){let t;this.ruleForm.variantsList.unit&&(t=e.target.value+this.ruleForm.variantsList.unit),this.ruleForm.args[0].value={desc:t||e.target.value,value:e.target.value,required:this.ruleForm.isRequired},console.log(this.ruleForm.args[0].value)}}};const ro=(0,l.Z)(ao,[["render",to]]);var oo=ro,lo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAMCAYAAACNzvbFAAAAAXNSR0IArs4c6QAAAcpJREFUOE+lkkFIFHEUxn9vdnZ0MqVL0SGCWg956OAhKOmSEBREgSVFRHWJpohMT0URXSoWKg9BLeEh2DoEIWwUVmCkdIiMIkjyohfr4CHCHdrZ2RnnxSi6u4m24YP/7f1/7/ve+6TZySsrKVVXxRhRtHci0/Q8RsmKoQuCRBW9OZ5pulwFtS0wpCxbFXoO1HE75+OVarEjGqH7q6D9F1eRWm9gmfC7CGcyHjtbEtx7WcIPaoGCIm8W2e/YbtKxI8mxXo9kAuJBB9MFrh2pY3W9zA6d/BnR1VdkT6vJqd0W8VEO3ypQ8AFVd1lorHj0biNbz7v0nbMZ/BKSHQoYuNrAjadFTrZbDH0NeTwcVDn5L+iD1yWGR2fIXrB58i5gYirixK4kbVtMDqULTE3PBUmaT0/nEWmc31il/b+V/nKV3EhA+rjN0TsFNq0zCCPlSmc9TsZj7Hs0B0057qCg7fPQlg0G8et/H5Iw4Oxei/sDJR522Xwan8FKwrfJiNyHkM42k41rDcZ+RLz4GJbDtdnJ7zOQZ6AVYVp86UfdNtm3Aa8+lz8vlYdZUMrJXxfk0nLgNQ3g+eD/m8mCulixIN2i0bbKHdeWzuquP8g4wunbkgduAAAAAElFTkSuQmCC";const io={class:"startTime"},no=(0,r.createElementVNode)("span",{style:{margin:"0 5px"}},"时",-1),so=(0,r.createElementVNode)("span",{style:{"margin-left":"5px"}},"分",-1),co={class:"endTime"},uo=(0,r.createElementVNode)("span",{style:{margin:"0 5px"}},"时",-1),po=(0,r.createElementVNode)("span",{style:{"margin-left":"5px"}},"分",-1),mo=(0,r.createElementVNode)("p",{class:"tip-title"},[(0,r.createElementVNode)("img",{src:lo,alt:"",class:"tip-image"}),(0,r.createElementVNode)("span",{class:"tip-name"},"注释")],-1),ho=(0,r.createElementVNode)("p",{class:"tip-content"}," 支持参数类型：${device.nickname} 设备昵称 支持编辑带参数的消息，消息内容如需要插入参数，直接将参数粘贴到消息内。例如：“您好！您的${device.nickname}检测到漏水，请及时处理” ",-1);function vo(e,t,a,o,l,i){const n=(0,r.resolveComponent)("el-checkbox"),s=(0,r.resolveComponent)("el-option"),c=(0,r.resolveComponent)("el-select"),u=(0,r.resolveComponent)("el-form-item"),d=(0,r.resolveComponent)("el-input"),p=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(p,{ref:"diffForm",model:l.ruleForm,class:"common-form",rules:l.rules,"label-width":"100px","label-position":"top"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{label:"免打扰模式",prop:"terminalStartHour",class:"noDisturb"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{modelValue:l.ruleForm.terminalTime,"onUpdate:modelValue":t[0]||(t[0]=e=>l.ruleForm.terminalTime=e),onChange:i.handleChangeTerminalTime},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("支持")])),_:1},8,["modelValue","onChange"]),(0,r.createElementVNode)("div",io,[(0,r.createVNode)(c,{modelValue:l.ruleForm.terminalStartHour,"onUpdate:modelValue":t[1]||(t[1]=e=>l.ruleForm.terminalStartHour=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",placeholder:"",disabled:!l.ruleForm.terminalTime},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setHour,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),no,(0,r.createVNode)(c,{modelValue:l.ruleForm.terminalStartMinutes,"onUpdate:modelValue":t[2]||(t[2]=e=>l.ruleForm.terminalStartMinutes=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",placeholder:"",disabled:!l.ruleForm.terminalTime},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setMinutes,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),so]),(0,r.createElementVNode)("div",co,[(0,r.createVNode)(c,{modelValue:l.ruleForm.terminalEndHour,"onUpdate:modelValue":t[3]||(t[3]=e=>l.ruleForm.terminalEndHour=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",placeholder:"",disabled:!l.ruleForm.terminalTime},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setHour,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),uo,(0,r.createVNode)(c,{modelValue:l.ruleForm.terminalEndMinutes,"onUpdate:modelValue":t[4]||(t[4]=e=>l.ruleForm.terminalEndMinutes=e),style:{width:"80px"},"popper-class":"selectCustomAttrs",placeholder:"",disabled:!l.ruleForm.terminalTime},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setMinutes,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),po])])),_:1}),(0,r.createVNode)(u,{label:"间隔时间",prop:"intervalHours",class:"noDisturb"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{modelValue:l.ruleForm.intervalTime,"onUpdate:modelValue":t[5]||(t[5]=e=>l.ruleForm.intervalTime=e),onChange:i.handleChangeTntervalTime},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("支持")])),_:1},8,["modelValue","onChange"]),(0,r.createVNode)(c,{modelValue:l.ruleForm.intervalHours,"onUpdate:modelValue":t[6]||(t[6]=e=>l.ruleForm.intervalHours=e),class:"startTime",placeholder:"",style:{width:"100px"},"popper-class":"selectCustomAttrs",disabled:!l.ruleForm.intervalTime},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setIntervalHour,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),(0,r.createVNode)(c,{modelValue:l.ruleForm.intervalMinutes,"onUpdate:modelValue":t[7]||(t[7]=e=>l.ruleForm.intervalMinutes=e),placeholder:"",style:{width:"100px","margin-left":"15px"},"popper-class":"selectCustomAttrs",disabled:!l.ruleForm.intervalTime},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setIntervalMinutes,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),(0,r.createVNode)(u,{label:"终端类型",prop:"terminalType"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{modelValue:l.ruleForm.terminalType,"onUpdate:modelValue":t[8]||(t[8]=e=>l.ruleForm.terminalType=e),multiple:"",placeholder:"请选择终端类型","popper-class":"selectCustomAttrs",style:{width:"100%"}},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.terminalTypeList,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e.configCode,label:e.description,value:e.configCode},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.createVNode)(u,{label:"弹窗类型",prop:"toastType"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{modelValue:l.ruleForm.toastType,"onUpdate:modelValue":t[9]||(t[9]=e=>l.ruleForm.toastType=e),placeholder:"请选择弹窗类型","popper-class":"selectCustomAttrs toast-maxwidth",style:{width:"100%"}},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.toastTypeList,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e.configCode,label:e.description,value:e.configCode},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.createVNode)(u,{label:"消息优先级",prop:"messagePriority"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{modelValue:l.ruleForm.messagePriority,"onUpdate:modelValue":t[10]||(t[10]=e=>l.ruleForm.messagePriority=e),style:{width:"100%"},"popper-class":"selectCustomAttrs",placeholder:""},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.messagePriorityList,(e=>((0,r.openBlock)(),(0,r.createBlock)(s,{key:e.key,label:e.value,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.createVNode)(u,{label:"消息标题",style:{width:"100%"},prop:"messageTitle"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{modelValue:l.ruleForm.messageTitle,"onUpdate:modelValue":t[11]||(t[11]=e=>l.ruleForm.messageTitle=e),placeholder:"请输入推送标题，最多20字符",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,r.createVNode)(u,{label:"消息内容",style:{width:"100%"},prop:"messageContent"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{modelValue:l.ruleForm.messageContent,"onUpdate:modelValue":t[12]||(t[12]=e=>l.ruleForm.messageContent=e),placeholder:"请输入推送内容，最多20字符",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,r.createVNode)(u,{class:"tag"},{default:(0,r.withCtx)((()=>[mo,ho])),_:1})])),_:1},8,["model","rules"])}var go={props:{singData:{type:Object,default(){return{}}}},data(){return{ruleForm:{terminalTime:!1,terminalStartHour:"00",terminalStartMinutes:"00",terminalEndHour:"00",terminalEndMinutes:"00",intervalTime:!1,intervalHours:"0h",intervalMinutes:"10min",terminalType:[],toastType:"",messagePriority:"1",messageTitle:"",messageContent:""},source:this.$route.query.source||"",rules:{terminalStartHour:[{required:!0,message:"请选择免打扰模式",trigger:"change"}],intervalHours:[{required:!0,message:"请选择间隔时间",trigger:"change"}],terminalType:[{required:!0,message:"请选择终端类型",trigger:"change"}],toastType:[{required:!0,message:"请选择弹窗类型",trigger:"change"}],messageTitle:[{required:!0,message:"请输入消息标题",trigger:"blur"}],messageContent:[{required:!0,message:"请输入消息内容",trigger:"blur"}]},terminalTypeList:[],toastTypeList:[],messagePriorityList:[{key:"0",value:"紧急消息"},{key:"1",value:"一般消息"},{key:"2",value:"中级消息"},{key:"3",value:"低级消息"}],setHour:[],setMinutes:[],setIntervalHour:[],setIntervalMinutes:[]}},mounted(){if(console.log(1111),this.getTerminalType(),this.getToastType(),this.setHour=Er.initHMS(24,!0),this.setMinutes=Er.initHMS(60,!0),this.setIntervalHour=this.handleSetIntervalHour(),this.setIntervalMinutes=this.handleSetIntervalMinutes(60),"{}"!==JSON.stringify(this.singData)){const e=this.singData.pushMessage.msgStrategy;if(void 0===e.maxCount){console.log(this.singData.pushMessage.msgStrategy,"this.singData.pushMessage.msgStrategy");const e=this.singData.pushMessage.msgStrategy.notWorkTimeStart&&this.singData.pushMessage.msgStrategy.notWorkTimeStart.length>0?this.singData.pushMessage.msgStrategy.notWorkTimeStart.split(":"):"";this.ruleForm.terminalStartHour="object"==typeof e?e[0]:"00",this.ruleForm.terminalStartMinutes="object"==typeof e?e[1]:"00";const t=this.singData.pushMessage.msgStrategy.notWorkTimeEnd&&this.singData.pushMessage.msgStrategy.notWorkTimeEnd.length>0?this.singData.pushMessage.msgStrategy.notWorkTimeEnd.split(":"):"";this.ruleForm.terminalEndHour="object"==typeof t?t[0]:"00",this.ruleForm.terminalEndMinutes="object"==typeof t?t[1]:"00",this.singData.pushMessage.msgStrategy.notWorkTimeStart&&this.singData.pushMessage.msgStrategy.notWorkTimeStart.length>0||this.singData.pushMessage.msgStrategy.notWorkTimeEnd&&this.singData.pushMessage.msgStrategy.notWorkTimeEnd.length>0?this.ruleForm.terminalTime=!0:this.ruleForm.terminalTime=!1,this.handleDealTime(this.singData.pushMessage.msgStrategy.timeInterval)}else null==e.maxCount&&(this.ruleForm={terminalTime:!1,terminalStartHour:"00",terminalStartMinutes:"00",terminalEndHour:"00",terminalEndMinutes:"00",intervalTime:!1,intervalHours:"0h",intervalMinutes:"10min"});this.$set(this.ruleForm,"messageTitle",this.singData.pushMessage.pushContent.msgTitle),this.$set(this.ruleForm,"messageContent",this.singData.pushMessage.pushContent.msgContent),this.$set(this.ruleForm,"messagePriority",this.singData.pushMessage.priority.toString()),this.handleDealShowTypes(this.singData.pushMessage.showTypes)}},methods:{getTerminalType(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/config/getConfigType":"/developerportal/developer/config/getConfigType",Sr("post",e,{configParentCode:"pushTerminalType"}).then((e=>{"00000"==e.retCode&&(this.terminalTypeList=e.data)}))},getToastType(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/config/getConfigType":"/developerportal/developer/config/getConfigType",Sr("post",e,{configParentCode:"pushShowType"}).then((e=>{"00000"==e.retCode&&(this.toastTypeList=e.data)}))},resetFormData(){this.$refs.diffForm.resetFields()},handleSetIntervalHour(){const e=Er.initHMS(24);return e.map((e=>e+"h"))},handleSetIntervalMinutes(e){const t=[];for(let a=0;a<e;a+=2)t.push(a.toString()+"min");return t},handleDealTime(e){if(null==e)return;const t=parseInt(e/60);this.ruleForm.intervalHours=parseInt(e/60).toString()+"h",this.ruleForm.intervalMinutes=parseInt(e-60*t).toString()+"min",this.ruleForm.intervalTime=null!==e},handleDealShowTypes(e){const t=[];for(let a in e)t.push(a),this.$set(this.ruleForm,"toastType",e[a]);this.$set(this.ruleForm,"terminalType",t)},handleChangeTerminalTime(e){e||(this.ruleForm.terminalStartHour="00",this.ruleForm.terminalStartMinutes="00",this.ruleForm.terminalEndHour="00",this.ruleForm.terminalEndMinutes="00")},handleChangeTntervalTime(e){e||(this.ruleForm.intervalHours="0h",this.ruleForm.intervalMinutes="10min")}}};const fo=(0,l.Z)(go,[["render",vo]]);var yo=fo;const bo={class:"startTime"},ko=(0,r.createElementVNode)("span",{style:{margin:"0 10px"}},"小时",-1),Vo=(0,r.createElementVNode)("span",{style:{margin:"0 10px"}},"分钟",-1),Co=(0,r.createElementVNode)("span",{style:{"margin-left":"10px"}},"秒",-1);function No(e,t,a,o,l,i){const n=(0,r.resolveComponent)("el-option"),s=(0,r.resolveComponent)("el-select"),c=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createBlock)(u,{ref:"ruleForm",model:l.ruleForm,class:"common-form","label-width":"100px","label-position":"top"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{label:"延时设置",class:"delaySet"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",bo,[(0,r.createVNode)(s,{modelValue:l.ruleForm.delayStartHour,"onUpdate:modelValue":t[0]||(t[0]=e=>l.ruleForm.delayStartHour=e),"popper-class":"selectCustomAttrs",style:{width:"80px"},placeholder:""},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setHour,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),ko,(0,r.createVNode)(s,{modelValue:l.ruleForm.delayStartMinutes,"onUpdate:modelValue":t[1]||(t[1]=e=>l.ruleForm.delayStartMinutes=e),"popper-class":"selectCustomAttrs",style:{width:"80px"},placeholder:""},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setMinutes,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),Vo,(0,r.createVNode)(s,{modelValue:l.ruleForm.delayStartSecond,"onUpdate:modelValue":t[2]||(t[2]=e=>l.ruleForm.delayStartSecond=e),"popper-class":"selectCustomAttrs",style:{width:"80px"},placeholder:""},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.setSeconds,(e=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),Co])])),_:1}),l.ruleForm.isShow?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,style:{color:"red"}},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("请选择延时时间！")])),_:1})):(0,r.createCommentVNode)("",!0)])),_:1},8,["model"])}var So={props:{singData:{type:Object,default(){return{}}}},data(){return{ruleForm:{delayStartHour:"0",delayStartMinutes:"0",delayStartSecond:"0",isShow:!1},source:this.$route.query.source||"",setHour:[],setMinutes:[],setSeconds:[],delayData:{}}},mounted(){this.setHour=Er.initHMS(24),this.setMinutes=Er.initHMS(60),this.setSeconds=Er.initHMS(60),this.getDelayData(),"{}"!==JSON.stringify(this.singData)&&this.handleDealHMS(this.singData.delayControl.args[0].value.value)},methods:{getDelayData(){let e;e="southeastAsia"===this.source?"/developerportal/dny/developer/component/cmptPropList/DELAY":"/developerportal/developer/component/cmptPropList/DELAY",Sr("get",e).then((e=>{"00000"==e.retCode&&(this.delayData=e.data[0])}))},resetFormData(){this.ruleForm={delayStartHour:"0",delayStartMinutes:"0",delayStartSecond:"0",isShow:!1}},handleDealHMS(e){this.ruleForm.delayStartHour=parseInt(e/3600).toString(),this.ruleForm.delayStartMinutes=parseInt((e-3600*this.ruleForm.delayStartHour)/60).toString(),this.ruleForm.delayStartSecond=parseInt((e-3600*this.ruleForm.delayStartHour)%60).toString()}}};const xo=(0,l.Z)(So,[["render",No]]);var wo,Fo=xo,Bo=(wo={},wo[sa]=Fr,wo[ca]=Ir,wo[ua]=Rr,wo[da]=Zr,wo[pa]=oo,wo[ma]=yo,wo[ha]=Fo,wo),Do=(0,c.pi)((0,c.pi)({},Bo),nr),Ao=function(e){var t=e.template;return console.log(t),Do[t]},Lo={class:"attribute-block"},Eo={class:"attribute-title"},To=["src"],Po=(0,r.defineComponent)({__name:"index",props:{node:null},setup:function(e){var t=e,a=(0,r.computed)((function(){return o.value.attr?Ao(o.value.attr):null})),o=(0,r.computed)((function(){return t.node&&t.node.data||{}}));return function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Lo,[(0,r.createElementVNode)("div",Eo,[(0,r.createElementVNode)("img",{src:(0,r.unref)(o).icon,alt:""},null,8,To),(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(o).description),1)]),(0,r.unref)(a)?((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)((0,r.unref)(a)),(0,r.normalizeProps)((0,r.mergeProps)({key:0},e.$attrs)),null,16)):(0,r.createCommentVNode)("",!0)])}}});const Io=(0,l.Z)(Po,[["__scopeId","data-v-1ea7eba8"]]);var qo=Io,Oo=a(1348);function Mo(e,t){var a=t.name,r=t.query.id,o=!1;if("createDescisionNode"===a){var l=JSON.parse(localStorage.getItem("descisionNode")||"{}");l[r]=e,localStorage.setItem("descisionNode",JSON.stringify(l)),o=!0}if("createDescisionGroup"===a){var i=JSON.parse(localStorage.getItem("descisionGroup")||"{}");i[r]=e,console.log("当前决策组内容是",e),localStorage.setItem("descisionGroup",JSON.stringify(i)),o=!0}if("createFlow"===a){var n=JSON.parse(localStorage.getItem("flow")||"{}");n[r]=e,localStorage.setItem("flow",JSON.stringify(n)),o=!0}o&&(0,Oo.z8)({message:"保存成功",type:"success"})}var _o=function(e){return(0,r.pushScopeId)("data-v-b09a3fca"),e=e(),(0,r.popScopeId)(),e},Jo={class:"home"},Ro={class:"menu-bar"},Uo={class:"canvas-card"},jo=_o((function(){return(0,r.createElementVNode)("div",{id:"container"},null,-1)})),Ho={class:"attrs-bar"},Zo=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,u.yj)(),a=(0,Ue.kR)(),o=Re(),l=o.graph,i=o.dnd,n=(0,r.ref)(),s=(0,r.ref)(),d=function(){l.value&&l.value.removeNode(n.value),n.value=void 0},p=function(e){if(n.value)if(n.value.shape===Ht)n.value.attr("text/text",e.descision);else{var t=n.value.getData();n.value.setData((0,c.pi)((0,c.pi)({},t),{attrData:e}))}},m=function(e){console.log("保存的数据是",e),Mo(e,t,l.value)},h=[ja,Ha,Za,Qa],v=function(e,t){for(var a=0,r=e.length;a<r;a+=1)e[a].style.visibility=t?"visible":"hidden"};return(0,r.onMounted)((function(){l.value&&i.value&&(l.value.on("node:click",(function(e){var t=e.view,a=e.node;s.value&&s.value.classList.remove("active"),s.value=t.container.querySelector(".basic-node")||void 0,s.value&&s.value.classList.add("active"),n.value?n.value!==a?n.value=a:n.value=void 0:n.value=a})),l.value.on("blank:click",(function(){n.value=void 0,s.value&&s.value.classList.remove("active")})),l.value.on("node:mouseenter",(function(){var e=document.getElementById("container"),t=e.querySelectorAll(".x6-port-body");v(t,!0)})),l.value.on("node:mouseleave",(function(){var e=document.getElementById("container"),t=e.querySelectorAll(".x6-port-body");v(t,!1)})))})),function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Jo,[(0,r.createElementVNode)("div",Ro,[(0,r.createVNode)(wa,{graph:(0,r.unref)(l),dnd:(0,r.unref)(i)},null,8,["graph","dnd"])]),(0,r.createElementVNode)("div",Uo,[(0,r.createElementVNode)("header",null,[(0,r.createVNode)(Ya,{tools:h,graph:(0,r.unref)(l),dnd:(0,r.unref)(i),onSaveData:m},null,8,["graph","dnd"])]),jo,(0,r.createVNode)((0,r.unref)(a))]),(0,r.withDirectives)((0,r.createElementVNode)("div",Ho,[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(qo,{key:(0,r.unref)(n)&&(0,r.unref)(n).id,node:(0,r.unref)(n),onSyncData:p,onDelNode:d},null,8,["node"])),[[r.vShow,(0,r.unref)(n)]])],512),[[r.vShow,(0,r.unref)(n)]])])}}});const Qo=(0,l.Z)(Zo,[["__scopeId","data-v-b09a3fca"]]);var Go=Qo,zo=function(e){return(0,r.pushScopeId)("data-v-06dd2138"),e=e(),(0,r.popScopeId)(),e},Wo={class:"rules-block"},Ko={class:"common-title"},Yo=zo((function(){return(0,r.createElementVNode)("h3",null,"决策列表",-1)})),Xo=(0,r.defineComponent)({__name:"descisionNode",setup:function(e){var t=(0,u.tv)(),a=(0,r.ref)(JSON.parse(localStorage.getItem("descisionNodeList")||"[]")),o=function(){var e=prompt("请输入决策点名称");e&&(a.value.push({id:"".concat(a.value.length+1),name:e}),localStorage.setItem("descisionNodeList",JSON.stringify(a.value)))},l=function(e){t.push({name:"createDescisionNode",query:{id:e.id,name:e.name}})},i=function(e){t.push({name:"rulesDetail",query:{id:e.id}})};return function(e,t){var n=(0,r.resolveComponent)("el-button"),s=(0,r.resolveComponent)("el-table-column"),c=(0,r.resolveComponent)("el-table");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Wo,[(0,r.createElementVNode)("div",Ko,[Yo,(0,r.createVNode)(n,{onClick:o},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("新建决策点")]})),_:1})]),(0,r.createVNode)(c,{data:a.value,style:{width:"100%"}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{prop:"name",label:"决策点名称",width:"180"}),(0,r.createVNode)(s,{prop:"createTime",label:"创建时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"修改时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"是否启用",width:"180"}),(0,r.createVNode)(s,{fixed:"right",label:"操作",width:"180"},{default:(0,r.withCtx)((function(e){return[(0,r.createVNode)(n,{link:"",type:"primary",size:"small",onClick:function(t){return i(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("详情")]})),_:2},1032,["onClick"]),(0,r.createVNode)(n,{link:"",type:"primary",size:"small",onClick:function(t){return l(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 编辑 ")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}}});const $o=(0,l.Z)(Xo,[["__scopeId","data-v-06dd2138"]]);var el=$o;function tl(){var e=(0,r.ref)(),t=(0,r.ref)();return(0,r.onMounted)((function(){e.value=Je({templateName:X,container:document.getElementById("container")}),t.value=I(e.value),Y(e.value,["copy","paste","cut","undo","redo","delete"])})),{graph:e,dnd:t}}const al=e=>((0,r.pushScopeId)("data-v-420c16b9"),e=e(),(0,r.popScopeId)(),e),rl=al((()=>(0,r.createElementVNode)("div",null,null,-1))),ol={class:"class-fold"},ll=al((()=>(0,r.createElementVNode)("i",{class:"el-icon-arrow-up"},null,-1))),il=[ll],nl={key:0,class:"fold-content"};function sl(e,t,a,o,l,i){return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[rl,(0,r.createElementVNode)("div",ol,[(0,r.createElementVNode)("div",{class:"fold-title",onClick:t[0]||(t[0]=e=>l.foldShow=!l.foldShow)},[(0,r.createTextVNode)((0,r.toDisplayString)(a.name)+" ",1),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["icon-fold",{"fold-show":!l.foldShow}])},il,2)]),l.foldShow?((0,r.openBlock)(),(0,r.createElementBlock)("div",nl,[(0,r.renderSlot)(e.$slots,"default",{},void 0,!0)])):(0,r.createCommentVNode)("",!0)])],64)}var cl={name:"ClassFold",props:{name:{type:String,required:!0,default:""},fold:{type:Boolean,required:!1,default:!1}},data(){return{foldShow:!1}},created(){this.foldShow=this.fold}};const ul=(0,l.Z)(cl,[["render",sl],["__scopeId","data-v-420c16b9"]]);var dl=ul,pl={class:"menu-item"},ml={class:"element-list"},hl=["onMousedown"],vl=["src"],gl=(0,r.defineComponent)({__name:"MenuItem",props:{menuList:null,dnd:null},setup:function(e){var t=e,a=(0,r.inject)("graph",(0,r.ref)(void 0)),o=function(e,r){a.value&&t.dnd&&q({graph:a.value,dnd:t.dnd,event:e,options:{shape:r.name},data:(0,c.pi)({},r)})};return function(t,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",pl,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.menuList,(function(e,t){return(0,r.openBlock)(),(0,r.createBlock)(dl,{key:e.classCode+t,name:e.className,fold:!0},{default:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("div",ml,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.children,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"element-item",draggable:"true",onMousedown:function(t){return o(t,e)}},[(0,r.createElementVNode)("img",{src:e.icon},null,8,vl),(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.description),1)],40,hl)})),128))])]})),_:2},1032,["name"])})),128))])}}});const fl=(0,l.Z)(gl,[["__scopeId","data-v-0a1cba7a"]]);var yl=fl,bl=function(){return Sr("get","/developerportal/developer/component/cmptPropList/TIMER",{})},kl=function(){return Sr("get","/developerportal/developer/component/cmptPropList/WEATHER",{})},Vl=function(){return Sr("get","/developerportal/developer/component/cmptPropList/GEOFENCE",{})},Cl=function(){return Sr("get","/developerportal/developer/component/cmptPropList/DELAY",{})};function Nl(e,t){var a=t.query.id,r=t.query.name,o=t.name;if("createDescisionNode"===o){var l=JSON.parse(localStorage.getItem("descisionNode")||"{}")[a];l&&e.fromJSON(l)}if("createDescisionGroup"===o){var i=JSON.parse(localStorage.getItem("descisionGroup")||"{}")[a];i&&e.fromJSON(i)}if("rulesDetail"===o&&a){var n=JSON.parse(localStorage.getItem("graphData")||"{}");e.fromJSON(n[a])}if("createFlow"===o){n=JSON.parse(localStorage.getItem("flow")||"{}");n[a]?e.fromJSON(n[a]):e.addNode({shape:"rect",x:100,y:40,width:100,height:40,attrs:{text:{text:r}},ports:_t({portTemplates:[de]})})}}function Sl(e){var t=(0,u.yj)(),a=(0,r.ref)(va),o=(0,r.ref)(ga),l=(0,r.ref)(ya),i=(0,r.ref)(fa),n=(0,r.ref)([]),s=JSON.parse(localStorage.getItem("config")||"[]");s.length&&a.value.push({className:"自定义组件",classCode:"self",children:s});var d=(0,r.ref)([]);return Promise.all([bl(),kl(),Vl(),Cl()]).then((function(s){var u=s[0],d=s[1],p=s[2],m=s[3];u&&u.data&&(a.value[1].children=u.data.map((function(e){return(0,c.pi)((0,c.pi)({},e),{shape:{template:Jt},attr:{template:ca}})}))),d&&d.data&&(a.value[2].children=d.data.map((function(e){return(0,c.pi)((0,c.pi)({},e),{shape:{template:Jt},attr:{template:ua}})}))),p&&p.data&&(a.value[3].children=p.data.map((function(e){return(0,c.pi)((0,c.pi)({},e),{shape:{template:Jt},attr:{template:da}})}))),m&&m.data&&(l.value[2].children=m.data.map((function(e){return(0,c.pi)((0,c.pi)({},e),{shape:{template:Jt},port:{templates:[de,pe]},attr:{template:ha}})}))),(0,c.ev)((0,c.ev)((0,c.ev)((0,c.ev)([],a.value,!0),o.value,!0),l.value,!0),i.value,!0).forEach((function(e){var t;(t=n.value).push.apply(t,e.children)})),la(n.value),(0,r.watch)(e,(function(e){e&&Nl(e,t)}),{immediate:!0})})),"createDescisionNode"===t.name?d.value=(0,c.ev)([],a.value,!0):"createFlow"===t.name?d.value=(0,c.ev)((0,c.ev)([],l.value,!0),i.value,!0):"createDescisionGroup"===t.name&&(d.value=o.value),{renderList:d}}var xl={class:"material-content"},wl=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,r.inject)("graph"),a=Sl(t),o=a.renderList,l=(0,r.ref)(["condition","action","logic"]),i=function(){console.log("world")};return function(e,t){var a=(0,r.resolveComponent)("el-collapse-item"),n=(0,r.resolveComponent)("el-collapse");return(0,r.openBlock)(),(0,r.createElementBlock)("div",xl,[(0,r.createVNode)(n,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.value=e}),onChange:i},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(a,{title:"决策组件",name:"condition"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(yl,(0,r.mergeProps)(e.$attrs,{"menu-list":(0,r.unref)(o)}),null,16,["menu-list"])]})),_:1})]})),_:1},8,["modelValue"])])}}});const Fl=(0,l.Z)(wl,[["__scopeId","data-v-95806a10"]]);var Bl=Fl,Dl={class:"attribute-block"},Al={class:"attribute-title"},Ll=["src"],El=(0,r.defineComponent)({__name:"index",props:{node:null},setup:function(e){var t=e,a=(0,r.computed)((function(){return o.value.attr?Ao(o.value.attr):null})),o=(0,r.computed)((function(){return t.node&&t.node.data||{}}));return function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Dl,[(0,r.createElementVNode)("div",Al,[(0,r.createElementVNode)("img",{src:(0,r.unref)(o).icon,alt:""},null,8,Ll),(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(o).description),1)]),(0,r.unref)(a)?((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)((0,r.unref)(a)),(0,r.normalizeProps)((0,r.mergeProps)({key:0},e.$attrs)),null,16)):(0,r.createCommentVNode)("",!0)])}}});const Tl=(0,l.Z)(El,[["__scopeId","data-v-af3eae30"]]);var Pl=Tl;function Il(e,t){var a=t.name,r=t.query.id,o=!1;if("createDescisionNode"===a){var l=JSON.parse(localStorage.getItem("descisionNode")||"{}");l[r]=e,localStorage.setItem("descisionNode",JSON.stringify(l)),o=!0}if("createDescisionGroup"===a){var i=JSON.parse(localStorage.getItem("descisionGroup")||"{}");i[r]=e,console.log("当前决策组内容是",e),localStorage.setItem("descisionGroup",JSON.stringify(i)),o=!0}if("createFlow"===a){var n=JSON.parse(localStorage.getItem("flow")||"{}");n[r]=e,localStorage.setItem("flow",JSON.stringify(n)),o=!0}o&&(0,Oo.z8)({message:"保存成功",type:"success"})}var ql=function(e){return(0,r.pushScopeId)("data-v-ae655140"),e=e(),(0,r.popScopeId)(),e},Ol={class:"home"},Ml={class:"menu-bar"},_l={class:"canvas-card"},Jl=ql((function(){return(0,r.createElementVNode)("div",{id:"container"},null,-1)})),Rl={class:"attrs-bar"},Ul=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,u.yj)(),a=tl(),o=a.graph,l=a.dnd;(0,r.provide)("graph",o);var i=(0,r.ref)(),n=(0,r.ref)(),s=function(){o.value&&o.value.removeNode(i.value),i.value=void 0},d=function(e){if(i.value)if(i.value.shape===Ht)i.value.attr("text/text",e.descision);else{var t=i.value.getData();i.value.setData((0,c.pi)((0,c.pi)({},t),{attrData:e}))}},p=function(e){console.log("保存的数据是",e),Il(e,t,o.value)},m=[ja,Ha,Za,Qa],h=function(e,t){for(var a=0,r=e.length;a<r;a+=1)e[a].style.visibility=t?"visible":"hidden"};return(0,r.onMounted)((function(){o.value&&l.value&&(o.value.on("node:click",(function(e){var t=e.view,a=e.node;n.value&&n.value.classList.remove("active"),n.value=t.container.querySelector(".basic-node")||void 0,n.value&&n.value.classList.add("active"),i.value?i.value!==a?i.value=a:i.value=void 0:i.value=a})),o.value.on("blank:click",(function(){i.value=void 0,n.value&&n.value.classList.remove("active")})),o.value.on("node:mouseenter",(function(){var e=document.getElementById("container"),t=e.querySelectorAll(".x6-port-body");h(t,!0)})),o.value.on("node:mouseleave",(function(){var e=document.getElementById("container"),t=e.querySelectorAll(".x6-port-body");h(t,!1)})))})),function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Ol,[(0,r.createElementVNode)("div",Ml,[(0,r.createVNode)(Bl,{dnd:(0,r.unref)(l)},null,8,["dnd"])]),(0,r.createElementVNode)("div",_l,[(0,r.createElementVNode)("header",null,[(0,r.createVNode)(Ya,{tools:m,graph:(0,r.unref)(o),onSaveData:p},null,8,["graph"])]),Jl]),(0,r.withDirectives)((0,r.createElementVNode)("div",Rl,[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(Pl,{key:(0,r.unref)(i)&&(0,r.unref)(i).id,node:(0,r.unref)(i),onSyncData:d,onDelNode:s},null,8,["node"])),[[r.vShow,(0,r.unref)(i)]])],512),[[r.vShow,(0,r.unref)(i)]])])}}});const jl=(0,l.Z)(Ul,[["__scopeId","data-v-ae655140"]]);var Hl=jl,Zl=function(e){return(0,r.pushScopeId)("data-v-19493b1e"),e=e(),(0,r.popScopeId)(),e},Ql={class:"rules-block"},Gl={class:"common-title"},zl=Zl((function(){return(0,r.createElementVNode)("h3",null,"决策组列表",-1)})),Wl=(0,r.defineComponent)({__name:"descisionGroup",setup:function(e){var t=(0,u.tv)(),a=(0,r.ref)(JSON.parse(localStorage.getItem("descisionGroupList")||"[]")),o=function(){var e=prompt("请输入决策组名称");e&&(a.value.push({id:"".concat(a.value.length+1),name:e}),localStorage.setItem("descisionGroupList",JSON.stringify(a.value)))},l=function(e){t.push({name:"createDescisionGroup",query:{id:e.id,name:e.name}})},i=function(e){t.push({name:"rulesDetail",query:{id:e.id}})};return function(e,t){var n=(0,r.resolveComponent)("el-button"),s=(0,r.resolveComponent)("el-table-column"),c=(0,r.resolveComponent)("el-table");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Ql,[(0,r.createElementVNode)("div",Gl,[zl,(0,r.createVNode)(n,{onClick:o},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("新建决策组")]})),_:1})]),(0,r.createVNode)(c,{data:a.value,style:{width:"100%"}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{prop:"name",label:"决策组名称",width:"180"}),(0,r.createVNode)(s,{prop:"createTime",label:"创建时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"修改时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"是否启用",width:"180"}),(0,r.createVNode)(s,{fixed:"right",label:"操作",width:"180"},{default:(0,r.withCtx)((function(e){return[(0,r.createVNode)(n,{link:"",type:"primary",size:"small",onClick:function(t){return i(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("详情")]})),_:2},1032,["onClick"]),(0,r.createVNode)(n,{link:"",type:"primary",size:"small",onClick:function(t){return l(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 编辑 ")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}}});const Kl=(0,l.Z)(Wl,[["__scopeId","data-v-19493b1e"]]);var Yl=Kl,Xl=[{path:"/descision-node-list",name:"descisionNodeList",component:el},{path:"/create-descision-node",name:"createDescisionNode",component:Hl,meta:{hideMenu:!0}},{path:"/descision-detail",name:"descisionDetail",component:Hl,meta:{hideMenu:!0}},{path:"/descision-group-list",name:"descisionGroupList",component:Yl},{path:"/create-descision-group",name:"createDescisionGroup",component:Hl,meta:{hideMenu:!0}}],$l=function(e){return(0,r.pushScopeId)("data-v-46354cda"),e=e(),(0,r.popScopeId)(),e},ei={class:"rules-block"},ti={class:"common-title"},ai=$l((function(){return(0,r.createElementVNode)("h3",null,"场景列表",-1)})),ri=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,u.tv)(),a=(0,r.ref)(JSON.parse(localStorage.getItem("sceneList")||"[]")),o=function(){var e=prompt("请输入规则名称");e&&(a.value.push({id:a.value.length,name:e}),localStorage.setItem("sceneList",JSON.stringify(a.value)))},l=function(e){t.push({name:"createFlow",query:{id:e.id,name:e.name}})},i=function(e){t.push({name:"rulesDetail",query:{id:e.id}})};return function(e,t){var n=(0,r.resolveComponent)("el-button"),s=(0,r.resolveComponent)("el-table-column"),c=(0,r.resolveComponent)("el-table");return(0,r.openBlock)(),(0,r.createElementBlock)("div",ei,[(0,r.createElementVNode)("div",ti,[ai,(0,r.createVNode)(n,{onClick:o},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("新建场景")]})),_:1})]),(0,r.createVNode)(c,{data:a.value,style:{width:"100%"}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{prop:"name",label:"决策名称",width:"180"}),(0,r.createVNode)(s,{prop:"createTime",label:"创建时间",width:"180"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"修改时间",width:"180"}),(0,r.createVNode)(s,{prop:"zip",label:"Zip",width:"180"}),(0,r.createVNode)(s,{fixed:"right",label:"操作",width:"180"},{default:(0,r.withCtx)((function(e){return[(0,r.createVNode)(n,{link:"",type:"primary",size:"small",onClick:function(t){return i(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("详情")]})),_:2},1032,["onClick"]),(0,r.createVNode)(n,{link:"",type:"primary",size:"small",onClick:function(t){return l(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 编辑 ")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}}});const oi=(0,l.Z)(ri,[["__scopeId","data-v-46354cda"]]);var li=oi,ii=[{path:"/flow-list",name:"flow-list",component:li},{path:"/create-flow",name:"createFlow",component:Hl,meta:{hideMenu:!0}},{path:"/flow-detail",name:"flowDetail",component:Hl,meta:{hideMenu:!0}}],ni=function(e){return(0,r.pushScopeId)("data-v-591be888"),e=e(),(0,r.popScopeId)(),e},si={class:"logicFlow-list-block"},ci={class:"common-title"},ui=ni((function(){return(0,r.createElementVNode)("h3",null,"场景列表",-1)})),di=(0,r.defineComponent)({__name:"index",setup:function(e){var t=(0,u.tv)(),a=(0,r.ref)(JSON.parse(localStorage.getItem("logicList")||'[{"id":0,"name":"汽车生产"}]'));localStorage.setItem("logicList",JSON.stringify(a.value));var o=function(){var e=prompt("请输入场景名称");e&&(a.value.push({id:a.value.length,name:e}),localStorage.setItem("logicList",JSON.stringify(a.value)))},l=function(e){t.push({name:"createLogicFlow",query:{id:e.id,name:e.name}})},i=function(e){t.push({name:"logicFlowDetail",query:{id:e.id}})};return function(e,t){var n=(0,r.resolveComponent)("el-button"),s=(0,r.resolveComponent)("el-table-column"),c=(0,r.resolveComponent)("el-table");return(0,r.openBlock)(),(0,r.createElementBlock)("div",si,[(0,r.createElementVNode)("div",ci,[ui,(0,r.createVNode)(n,{onClick:o},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("新建场景")]})),_:1})]),(0,r.createVNode)(c,{data:a.value,style:{width:"100%"}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{prop:"name",label:"场景名称"}),(0,r.createVNode)(s,{prop:"createTime",label:"创建时间"}),(0,r.createVNode)(s,{prop:"modifyTime",label:"修改时间"}),(0,r.createVNode)(s,{prop:"creater",label:"创建人"}),(0,r.createVNode)(s,{fixed:"right",label:"操作"},{default:(0,r.withCtx)((function(e){return[(0,r.createVNode)(n,{link:"",type:"primary",size:"small",onClick:function(t){return i(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("详情")]})),_:2},1032,["onClick"]),(0,r.createVNode)(n,{link:"",type:"primary",size:"small",onClick:function(t){return l(e.row)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)(" 编辑 ")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}}});const pi=(0,l.Z)(di,[["__scopeId","data-v-591be888"]]);var mi=pi,hi={class:"pattern"},vi=["onMousedown"],gi=(0,r.defineComponent)({__name:"bpmnMenu",props:{lf:null},setup:function(e){var t=e,a=(0,r.toRefs)(t).lf;(0,r.watch)(a,(function(){a.value&&a.value.on("selection:selected",(function(){a.value.updateEditConfig({stopMoveGraph:!1})}))}));var o=["control","events","gateways","task","logic"],l=[{name:"开始",type:"h-bpmn:startEvent",className:"pattern-start"},{name:"时间事件",type:"h-bpmn:timerIntermediateEvent",className:"pattern-time"},{name:"结束",type:"h-bpmn:endEvent",className:"pattern-end"}],i=[{name:"用户任务",type:"h-bpmn:userTask",className:"pattern-user"},{name:"设备任务",type:"h-bpmn:equipmentTask",className:"pattern-equipment"},{name:"服务任务",type:"h-bpmn:serviceTask",className:"pattern-service"},{name:"调用活动",type:"h-bpmn:callActivity",className:"pattern-call"}],n=[{id:"control",title:"工具",children:[{name:"选择",type:"selection",className:"pattern-selection"}]},{id:"events",title:"事件",children:l},{id:"task",title:"任务",children:i},{id:"logic",title:"逻辑",children:[{name:"逻辑或",type:"h-bpmn:complexGatewayOr",className:"pattern-or"},{name:"逻辑且",type:"h-bpmn:complexGatewayAnd",className:"pattern-and"},{name:"复杂逻辑",type:"h-bpmn:complexGateway",className:"pattern-complex"},{name:"条件判断",type:"h-bpmn:exclusiveGateway",className:"pattern-exclusive"}]}];function s(e){"selection"!==e?a&&a.value.dnd.startDrag({type:e}):a.value.updateEditConfig({stopMoveGraph:!0})}return function(e,t){var a=(0,r.resolveComponent)("el-collapse-item"),l=(0,r.resolveComponent)("el-collapse");return(0,r.openBlock)(),(0,r.createElementBlock)("div",hi,[(0,r.createVNode)(l,{modelValue:o,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o=e})},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n,(function(e){return(0,r.createVNode)(a,{key:e.id,title:e.title,name:e.id},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.children,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.type,class:"pattern-item"},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["pattern-ins",e.className]),onMousedown:function(t){return s(e.type)}},null,42,vi),(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.name),1)])})),128))]})),_:2},1032,["title","name"])})),64))]})),_:1})])}}});const fi=(0,l.Z)(gi,[["__scopeId","data-v-500dea52"]]);var yi=fi,bi=a(9782),ki=a.n(bi),Vi=(a(4728),a(611)),Ci="h-bpmn:startEvent",Ni="h-bpmn:timerIntermediateEvent",Si="h-bpmn:endEvent",xi="h-bpmn:userTask",wi="h-bpmn:serviceTask",Fi="h-bpmn:receiveTask",Bi="h-bpmn:callActivity",Di="h-bpmn:equipmentTask",Ai="h-bpmn:exclusiveGateway",Li="h-bpmn:parallelGateway",Ei="h-bpmn:complexGateway",Ti="h-bpmn:complexGatewayOr",Pi="h-bpmn:complexGatewayAnd",Ii=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.value="开始",this.text.editable=!1,this.text.x=this.x,this.text.y=this.y+this.r,this.r=30}}),t}(bi.CircleNodeModel),qi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.width,a=e.height,r=e.r,o=e.x,l=e.y,i=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("circle",(0,c.pi)((0,c.pi)({},i),{r:r,cx:o,cy:l,width:t,height:a}))])}}),t}(bi.CircleNode),Oi={type:Ci,view:qi,model:Ii},Mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.value=this.text.value||"时间事件",this.text.editable=!0,this.text.x=this.x,this.text.y=this.y+this.r,this.r=30}}),t}(bi.CircleNodeModel),_i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,bi.h)("svg",{x:t-r/2+6,y:a-o/2,width:60,height:60,viewBox:"0 0 1274 1024"},[(0,bi.h)("path",{fill:l.stroke,d:"M827.871087 196.128913C743.498468 111.756293 631.321596 65.290005 512 65.290005c-119.319549 0-231.499491 46.465265-315.871087 130.837884S65.290005 392.680451 65.290005 512s46.465265 231.499491 130.837884 315.871087 196.551538 130.837884 315.871087 130.837884c119.321596 0 231.499491-46.465265 315.871087-130.837884S958.708971 631.319549 958.708971 512 912.243707 280.500509 827.871087 196.128913zM531.556405 917.246651l0-74.145697c0-11.31572-9.174963-20.491707-20.491707-20.491707-11.316743 0-20.491707 9.174963-20.491707 20.491707l0 74.059739C283.276738 906.322857 116.693746 739.164766 106.755396 531.634176l72.351841 0c11.31572 0 20.491707-9.174963 20.491707-20.491707 0-11.31572-9.174963-20.491707-20.491707-20.491707l-72.273047 0c10.769274-206.737528 177.01253-373.005342 383.740848-383.813502l0 72.346725c0 11.316743 9.174963 20.491707 20.491707 20.491707 11.31572 0 20.491707-9.17394 20.491707-20.491707L531.558451 106.752326c207.593012 9.901511 374.807385 176.539762 385.609405 383.89946l-74.142627 0c-11.316743 0-20.491707 9.174963-20.491707 20.491707 0 11.316743 9.174963 20.491707 20.491707 20.491707l74.220399 0C907.275555 739.78796 739.720422 907.317511 531.556405 917.246651z"}),(0,bi.h)("path",{fill:l.stroke,d:"M532.098757 503.118726 532.098757 258.240529c0-11.316743-9.174963-20.491707-20.491707-20.491707-11.31572 0-20.491707 9.17394-20.491707 20.491707l0 254.66612c0 7.858992 4.429893 14.677281 10.924817 18.114566L693.447539 722.42757c4.002151 4.000104 9.245572 6.001691 14.490016 6.001691s10.487865-2.001587 14.490016-6.001691c8.002254-8.002254 8.002254-20.977777 0-28.980032L532.098757 503.118726z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.width,a=e.height,r=e.r,o=e.x,l=e.y,i=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("circle",(0,c.pi)((0,c.pi)({},i),{r:r,cx:o,cy:l,width:t,height:a})),this.getLabelShape()])}}),t}(bi.CircleNode),Ji={type:Ni,view:_i,model:Mi},Ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.value="结束",this.text.editable=!1,this.text.x=this.x,this.text.y=this.y+this.r,this.r=30;var a={message:"正方形节点下一个节点只能是圆形节点",validate:function(e,t,a,r){return console.log(e,t,a,r),e.type!==Si}};this.sourceRules.push(a)}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t.strokeWidth=4,t}}),t}(bi.CircleNodeModel),Ui=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),t}(bi.CircleNode),ji={type:Si,view:Ui,model:Ri},Hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(bi.RectNodeModel),Zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,bi.h)("svg",{x:t-r/2+5,y:a-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},[(0,bi.h)("path",{fill:l.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.radius,i=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("rect",(0,c.pi)((0,c.pi)({},i),{x:t-r/2,y:a-o/2,rx:l,ry:l,width:r,height:o})),this.getLabelShape()])}}),t}(bi.RectNode),Qi={type:xi,view:Zi,model:Hi},Gi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(bi.RectNodeModel),zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,bi.h)("svg",{x:t-r/2+5,y:a-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},[(0,bi.h)("path",{fill:l.stroke,d:"M1016.832 606.208q2.048 12.288-1.024 29.696t-10.24 35.328-17.408 32.256-22.528 20.48-21.504 6.144-20.48-4.096q-10.24-3.072-25.6-5.632t-31.232-1.024-31.744 6.656-27.136 17.408q-24.576 25.6-28.672 58.368t9.216 62.464q10.24 20.48-3.072 40.96-6.144 8.192-19.456 16.896t-29.184 15.872-33.28 11.264-30.72 4.096q-9.216 0-17.408-7.168t-11.264-15.36l-1.024 0q-11.264-31.744-38.4-54.784t-62.976-23.04q-34.816 0-62.976 23.04t-39.424 53.76q-5.12 12.288-15.36 17.92t-22.528 5.632q-14.336 0-32.256-5.12t-35.84-12.8-32.256-17.92-21.504-20.48q-5.12-7.168-5.632-16.896t7.68-27.136q11.264-23.552 8.704-53.76t-26.112-55.808q-14.336-15.36-34.816-19.968t-38.912-3.584q-21.504 1.024-44.032 8.192-14.336 4.096-28.672-2.048-11.264-4.096-20.992-18.944t-17.408-32.768-11.776-36.864-2.048-31.232q3.072-22.528 20.48-28.672 30.72-12.288 55.296-40.448t24.576-62.976q0-35.84-24.576-62.464t-55.296-38.912q-9.216-3.072-15.36-14.848t-6.144-24.064q0-13.312 4.096-29.696t10.752-31.744 15.36-28.16 18.944-18.944q8.192-5.12 15.872-4.096t16.896 4.096q30.72 12.288 64 7.68t58.88-29.184q12.288-12.288 17.92-30.208t7.168-35.328 0-31.744-2.56-20.48q-2.048-6.144-3.584-14.336t1.536-14.336q6.144-14.336 22.016-25.088t34.304-17.92 35.84-10.752 27.648-3.584q13.312 0 20.992 8.704t10.752 17.92q11.264 27.648 36.864 48.64t60.416 20.992q35.84 0 63.488-19.968t38.912-50.688q4.096-8.192 12.8-16.896t17.92-8.704q14.336 0 31.232 4.096t33.28 11.264 30.208 18.432 22.016 24.576q5.12 8.192 3.072 17.92t-4.096 13.824q-13.312 29.696-8.192 62.464t29.696 57.344 60.416 27.136 66.56-11.776q8.192-5.12 19.968-4.096t19.968 9.216q15.36 14.336 27.136 43.52t15.872 58.88q2.048 17.408-5.632 27.136t-15.872 12.8q-31.744 11.264-54.272 39.424t-22.528 64q0 34.816 18.944 60.928t49.664 37.376q7.168 4.096 12.288 8.192 11.264 9.216 15.36 23.552zM540.672 698.368q46.08 0 87.04-17.408t71.168-48.128 47.616-71.168 17.408-86.528-17.408-86.528-47.616-70.656-71.168-47.616-87.04-17.408-86.528 17.408-70.656 47.616-47.616 70.656-17.408 86.528 17.408 86.528 47.616 71.168 70.656 48.128 86.528 17.408z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.radius,i=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("rect",(0,c.pi)((0,c.pi)({},i),{x:t-r/2,y:a-o/2,rx:l,ry:l,width:r,height:o})),this.getLabelShape()])}}),t}(bi.RectNode),Wi={type:wi,view:zi,model:Gi},Ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(bi.RectNodeModel),Yi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,bi.h)("svg",{x:t-r/2+5,y:a-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},[(0,bi.h)("path",{fill:l.stroke,d:"M780.8 341.333333H243.2l268.8 149.333334v85.333333L213.333333 409.6V682.666667h597.333334V409.6l-298.666667 166.4v-85.333333L780.8 341.333333zM896 256v512H128V256h768z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.radius,i=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("rect",(0,c.pi)((0,c.pi)({},i),{x:t-r/2,y:a-o/2,rx:l,ry:l,width:r,height:o})),this.getLabelShape()])}}),t}(bi.RectNode),Xi={type:Fi,view:Yi,model:Ki},$i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(bi.RectNodeModel),en=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),t}(bi.RectNode),tn={type:Bi,view:en,model:$i},an=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.width=200,this.height=100,this.radius=5}}),Object.defineProperty(t.prototype,"getNodeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.getNodeStyle.call(this);return t}}),t}(bi.RectNodeModel),rn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,bi.h)("svg",{x:t-r/2+5,y:a-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},[(0,bi.h)("path",{fill:l.stroke,d:"M1035.09001747 686.59460362V79.64608611H-11.09001747v606.94851751h492.95525433v192.93487986h-274.01820648v60.32985611h608.33610417v-60.32985611h-273.98804156v-192.93487986h492.89492448z m-985.85017885-60.32985612V139.97594225h925.52032276v486.28880525H49.23983862z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.radius,i=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("rect",(0,c.pi)((0,c.pi)({},i),{x:t-r/2,y:a-o/2,rx:l,ry:l,width:r,height:o})),this.getLabelShape()])}}),t}(bi.RectNode),on={type:Di,view:rn,model:an},ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),console.log(this),this.text.editable=!1,this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(bi.DiamondNodeModel),nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,bi.h)("svg",{x:t-r/2+15,y:a-o/2+12,width:36,height:36,viewBox:"0 0 1274 1024"},[(0,bi.h)("path",{fill:l.stroke,d:"M617.92 516.096l272 272-101.824 101.824-272-272-272 272-101.856-101.824 272-272-275.008-275.04L241.056 139.2l275.04 275.04 275.04-275.04 101.824 101.824-275.04 275.04z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.points,a=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("polygon",(0,c.pi)((0,c.pi)({},a),{points:t})),this.getLabelShape()])}}),t}(bi.DiamondNode),sn={type:Ai,view:nn,model:ln},cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),console.log(this),this.text.editable=!1,this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(bi.DiamondNodeModel),un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,bi.h)("svg",{x:t-r/2+15,y:a-o/2+12,width:36,height:36,viewBox:"0 0 1274 1024"},[(0,bi.h)("path",{fill:l.stroke,d:"M960.621531 575.791885 571.769268 575.791885l0 382.755404-120.688733 0L451.080535 575.791885 64.875566 575.791885 64.875566 448.207092l386.204969 0L451.080535 65.451688l120.688733 0 0 382.755404 388.853285 0L960.622554 575.791885z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.points,a=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("polygon",(0,c.pi)((0,c.pi)({},a),{points:t})),this.getLabelShape()])}}),t}(bi.DiamondNode),dn={type:Li,view:un,model:cn},pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),console.log(this),this.text.editable=!1,this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(bi.DiamondNodeModel),mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"getLabelShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.x,a=e.y,r=e.width,o=e.height,l=e.getNodeStyle();return(0,bi.h)("svg",{x:t-r/2+15,y:a-o/2+12,width:36,height:36,viewBox:"0 0 1274 1024"},[(0,bi.h)("path",{fill:l.stroke,d:"M476 72a8 8 0 0 1 8-8h56a8 8 0 0 1 8 8v353.089l249.671-249.672a8 8 0 0 1 11.314 0l39.598 39.598a8 8 0 0 1 0 11.314L598.912 476H952a8 8 0 0 1 8 8v56a8 8 0 0 1-8 8H598.912l249.671 249.671a8 8 0 0 1 0 11.314l-39.598 39.598a8 8 0 0 1-11.314 0L548 598.911V952a8 8 0 0 1-8 8h-56a8 8 0 0 1-8-8V598.912L226.329 848.583a8 8 0 0 1-11.314 0l-39.598-39.598a8 8 0 0 1 0-11.314L425.089 548H72a8 8 0 0 1-8-8v-56a8 8 0 0 1 8-8h353.089L175.417 226.329a8 8 0 0 1 0-11.314l39.598-39.598a8 8 0 0 1 11.314 0L476 425.088V72z"})])}}),Object.defineProperty(t.prototype,"getShape",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.model,t=e.points,a=e.getNodeStyle();return(0,bi.h)("g",{},[(0,bi.h)("polygon",(0,c.pi)((0,c.pi)({},a),{points:t})),this.getLabelShape()])}}),t}(bi.DiamondNode),hn={type:Ei,view:mn,model:pn},vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.editable=!1,this.text.value="and",this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(bi.DiamondNodeModel),gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),t}(bi.DiamondNode),fn={type:Pi,view:gn,model:vn},yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),Object.defineProperty(t.prototype,"initNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.initNodeData.call(this,t),this.text.editable=!1,this.text.value="or",this.rx=30,this.ry=30,this.style.stroke="rgb(24, 125, 255)"}}),t}(bi.DiamondNodeModel),bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.ZT)(t,e),t}(bi.DiamondNode),kn={type:Ti,view:bn,model:yn},Vn=function(){function e(e){var t=e.lf;t.register(Oi),t.register(Ji),t.register(ji),t.register(Qi),t.register(Wi),t.register(Xi),t.register(tn),t.register(on),t.register(sn),t.register(dn),t.register(hn),t.register(fn),t.register(kn)}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"pluginName",{enumerable:!0,configurable:!0,writable:!0,value:"HBpmn"}),e}(),Cn=Vn,Nn={0:{nodes:[{id:"6669bf12-8295-4169-9f8b-c46ac8e8ff03",type:"h-bpmn:startEvent",x:360,y:320,properties:{},text:{x:360,y:370,value:"开始"}},{id:"5d284689-55d8-4a83-8565-3ce849b6b17d",type:"h-bpmn:userTask",x:580,y:320,properties:{},text:{x:580,y:320,value:"设计汽车的人工任务"}},{id:"67b0cb5b-57f7-4b8e-86bf-6f025eeaa598",type:"h-bpmn:userTask",x:840,y:320,properties:{},text:{x:840,y:320,value:"审核批准生产"}},{id:"7ee0298b-542c-409e-a3e5-6cc545e0f07a",type:"h-bpmn:exclusiveGateway",x:1040,y:320,properties:{}},{id:"5574b2a6-6977-46fa-bf7b-19c4529a017b",type:"h-bpmn:serviceTask",x:1340,y:320,properties:{},text:{x:1340,y:320,value:"载入图纸"}},{id:"2afa2413-55c4-4496-8954-307effcd069d",type:"h-bpmn:callActivity",x:1660,y:320,properties:{},text:{x:1660,y:320,value:"集团成本审核（调用审核子流程）"}},{id:"f945ccf4-82cf-4a24-bd0e-44b49d6ca3b2",type:"h-bpmn:receiveTask",x:1660,y:560,properties:{},text:{x:1660,y:560,value:"等待原材料"}},{id:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",type:"h-bpmn:parallelGateway",x:600,y:960,properties:{}},{id:"567f6bc5-8c53-440b-b857-757b310cc037",type:"h-bpmn:serviceTask",x:920,y:780,properties:{},text:{x:920,y:780,value:"生产引擎"}},{id:"e75efa15-2a53-4115-af55-908265eb1ce8",type:"h-bpmn:serviceTask",x:920,y:900,properties:{},text:{x:920,y:900,value:"生产轮胎"}},{id:"ae8b0af0-2bb9-41cb-9832-5b8834b54381",type:"h-bpmn:serviceTask",x:920,y:1020,properties:{},text:{x:920,y:1020,value:"生产车灯"}},{id:"d1635522-d221-4810-917f-b7e39a51790c",type:"h-bpmn:serviceTask",x:920,y:1140,properties:{},text:{x:920,y:1140,value:"生产内饰"}},{id:"1eb353d2-5c96-4127-ad91-cc16a5649216",type:"h-bpmn:parallelGateway",x:1220,y:960,properties:{}},{id:"f80c87fa-10b3-4b7b-a6d9-8ec06f5d7b50",type:"h-bpmn:serviceTask",x:1440,y:960,properties:{},text:{x:1440,y:960,value:"组装"}},{id:"4c5376d8-60e4-4ffe-bfab-1d00424f9605",type:"h-bpmn:endEvent",x:1700,y:960,properties:{},text:{x:1700,y:1010,value:"结束"}}],edges:[{id:"dc03c358-2cb1-47a3-a532-5648c2fe713d",type:"polyline",sourceNodeId:"6669bf12-8295-4169-9f8b-c46ac8e8ff03",targetNodeId:"5d284689-55d8-4a83-8565-3ce849b6b17d",startPoint:{x:390,y:320},endPoint:{x:480,y:320},properties:{},pointsList:[{x:390,y:320},{x:480,y:320}]},{id:"409724bc-7682-4e5a-bfc4-422cae7c50c6",type:"polyline",sourceNodeId:"5d284689-55d8-4a83-8565-3ce849b6b17d",targetNodeId:"67b0cb5b-57f7-4b8e-86bf-6f025eeaa598",startPoint:{x:680,y:320},endPoint:{x:740,y:320},properties:{},pointsList:[{x:680,y:320},{x:740,y:320}]},{id:"1221b0fb-87f2-4c4b-adbd-4c9b46ca12dc",type:"polyline",sourceNodeId:"67b0cb5b-57f7-4b8e-86bf-6f025eeaa598",targetNodeId:"7ee0298b-542c-409e-a3e5-6cc545e0f07a",startPoint:{x:940,y:320},endPoint:{x:1010,y:320},properties:{},pointsList:[{x:940,y:320},{x:1010,y:320}]},{id:"4fb48ca0-2d57-4d7a-823d-82f0b59f7f7e",type:"polyline",sourceNodeId:"7ee0298b-542c-409e-a3e5-6cc545e0f07a",targetNodeId:"5d284689-55d8-4a83-8565-3ce849b6b17d",startPoint:{x:1040,y:350},endPoint:{x:580,y:370},properties:{},text:{x:780.6273922638885,y:457,value:"返回修改"},pointsList:[{x:1040,y:350},{x:1040,y:457},{x:580,y:457},{x:580,y:370}]},{id:"3d2c8399-d2c8-405e-894b-e8893a8a513e",type:"polyline",sourceNodeId:"7ee0298b-542c-409e-a3e5-6cc545e0f07a",targetNodeId:"5574b2a6-6977-46fa-bf7b-19c4529a017b",startPoint:{x:1070,y:320},endPoint:{x:1240,y:320},properties:{},text:{x:1134.3773922638886,y:320,value:"审批通过"},pointsList:[{x:1070,y:320},{x:1240,y:320}]},{id:"31016c0b-8350-48b5-b85d-2dcc8069312d",type:"polyline",sourceNodeId:"5574b2a6-6977-46fa-bf7b-19c4529a017b",targetNodeId:"2afa2413-55c4-4496-8954-307effcd069d",startPoint:{x:1440,y:320},endPoint:{x:1560,y:320},properties:{},pointsList:[{x:1440,y:320},{x:1560,y:320}]},{id:"1ce078c4-105b-456d-bd7a-4cbc2492ae81",type:"polyline",sourceNodeId:"2afa2413-55c4-4496-8954-307effcd069d",targetNodeId:"f945ccf4-82cf-4a24-bd0e-44b49d6ca3b2",startPoint:{x:1660,y:370},endPoint:{x:1660,y:510},properties:{},pointsList:[{x:1660,y:370},{x:1660,y:510}]},{id:"8cab2708-bab4-43bc-93e6-7d8739e01643",type:"polyline",sourceNodeId:"f945ccf4-82cf-4a24-bd0e-44b49d6ca3b2",targetNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",startPoint:{x:1660,y:610},endPoint:{x:600,y:930},properties:{},pointsList:[{x:1660,y:610},{x:1660,y:673.0769230769231},{x:600,y:673.0769230769231},{x:600,y:930}]},{id:"07ec8fb2-aa2a-4d91-afed-a88e50a76c42",type:"polyline",sourceNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",targetNodeId:"567f6bc5-8c53-440b-b857-757b310cc037",startPoint:{x:630,y:960},endPoint:{x:820,y:780},properties:{},pointsList:[{x:630,y:960},{x:724.6153846153848,y:960},{x:724.6153846153848,y:780},{x:820,y:780}]},{id:"e0879137-a770-4dd0-885a-fae3af21739d",type:"polyline",sourceNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",targetNodeId:"e75efa15-2a53-4115-af55-908265eb1ce8",startPoint:{x:630,y:960},endPoint:{x:820,y:900},properties:{},pointsList:[{x:630,y:960},{x:725,y:960},{x:725,y:900},{x:820,y:900}]},{id:"78c37200-e933-4b55-9bb3-dd26fe79a2bf",type:"polyline",sourceNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",targetNodeId:"ae8b0af0-2bb9-41cb-9832-5b8834b54381",startPoint:{x:630,y:960},endPoint:{x:820,y:1020},properties:{},pointsList:[{x:630,y:960},{x:725,y:960},{x:725,y:1020},{x:820,y:1020}]},{id:"ee049f6e-a63b-4390-8e0d-fb98e67012a6",type:"polyline",sourceNodeId:"dc46e2cd-87e7-4fd8-83c7-8f071dd1e1c9",targetNodeId:"d1635522-d221-4810-917f-b7e39a51790c",startPoint:{x:630,y:960},endPoint:{x:820,y:1140},properties:{},pointsList:[{x:630,y:960},{x:724.6153846153848,y:960},{x:724.6153846153848,y:1140},{x:820,y:1140}]},{id:"cc27abc3-664c-4dc7-af21-4aa0b7baa9c2",type:"polyline",sourceNodeId:"567f6bc5-8c53-440b-b857-757b310cc037",targetNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",startPoint:{x:1020,y:780},endPoint:{x:1190,y:960},properties:{},pointsList:[{x:1020,y:780},{x:1123.995726495727,y:780},{x:1123.995726495727,y:960},{x:1190,y:960}]},{id:"08205997-63c0-4e98-b531-d4e911fae978",type:"polyline",sourceNodeId:"e75efa15-2a53-4115-af55-908265eb1ce8",targetNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",startPoint:{x:1020,y:900},endPoint:{x:1190,y:960},properties:{},pointsList:[{x:1020,y:900},{x:1123.3760683760681,y:900},{x:1123.3760683760681,y:960},{x:1190,y:960}]},{id:"bf09cc38-b930-46b0-9c9c-66ead7e26a91",type:"polyline",sourceNodeId:"ae8b0af0-2bb9-41cb-9832-5b8834b54381",targetNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",startPoint:{x:1020,y:1020},endPoint:{x:1190,y:960},properties:{},pointsList:[{x:1020,y:1020},{x:1124.230769230769,y:1020},{x:1124.230769230769,y:960},{x:1190,y:960}]},{id:"0a068a23-ac1d-4040-bb47-9903dde0c7d3",type:"polyline",sourceNodeId:"d1635522-d221-4810-917f-b7e39a51790c",targetNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",startPoint:{x:1020,y:1140},endPoint:{x:1190,y:960},properties:{},pointsList:[{x:1020,y:1140},{x:1123.8888888888891,y:1140},{x:1123.8888888888891,y:960},{x:1190,y:960}]},{id:"08734739-b3f9-4b47-b3b1-88ac54bce878",type:"polyline",sourceNodeId:"1eb353d2-5c96-4127-ad91-cc16a5649216",targetNodeId:"f80c87fa-10b3-4b7b-a6d9-8ec06f5d7b50",startPoint:{x:1250,y:960},endPoint:{x:1340,y:960},properties:{},pointsList:[{x:1250,y:960},{x:1340,y:960}]},{id:"a33987af-dad0-4646-b422-1c655ce1a446",type:"polyline",sourceNodeId:"f80c87fa-10b3-4b7b-a6d9-8ec06f5d7b50",targetNodeId:"4c5376d8-60e4-4ffe-bfab-1d00424f9605",startPoint:{x:1540,y:960},endPoint:{x:1670,y:960},properties:{},pointsList:[{x:1540,y:960},{x:1670,y:960}]}]}},Sn=Nn,xn="menu-common",wn=200,Fn=100,Bn=function(){function e(e){var t=this,a=e.lf;Object.defineProperty(this,"lf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"menuTypeMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__menuDOM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_activeData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isShow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setContextMenuByType",{enumerable:!0,configurable:!0,writable:!0,value:function(e,a){t.menuTypeMap.set(e,a)}}),Object.defineProperty(this,"listenDelete",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.hideContextMenu()}}),this.menuTypeMap=new Map,this.lf=a,this.__menuDOM=document.createElement("div"),this.__menuDOM.className="lf-inner-context",this.menuTypeMap.set(xn,[]),this.isShow=!1}return Object.defineProperty(e.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var a=this;this.container=t,e.on("node:click",(function(e){var t=e.data;a._activeData=t,a.createContextMenu()})),e.on("edge:click",(function(e){var t=e.data;a._activeData=t,a.createContextMenu()})),e.on("blank:click",(function(){a.hideContextMenu()}))}}),Object.defineProperty(e.prototype,"hideContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.__menuDOM.innerHTML="",this.__menuDOM.style.display="none",this.isShow&&this.container.removeChild(this.__menuDOM),this.lf.off("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!1}}),Object.defineProperty(e.prototype,"showContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&e.id?(this._activeData=e,this.createContextMenu()):console.warn("请检查传入的参数")}}),Object.defineProperty(e.prototype,"setContextMenuItems",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.menuTypeMap.set(xn,e)}}),Object.defineProperty(e.prototype,"getContextMenuPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._activeData,t=this.lf.graphModel.getElement(e.id);if(t){var a,r;if("edge"===t.BaseType){a=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER;var o=t.getData();a=Math.max(o.startPoint.x,a),r=Math.min(o.startPoint.y,r),a=Math.max(o.endPoint.x,a),r=Math.min(o.endPoint.y,r),o.pointsList&&o.pointsList.forEach((function(e){a=Math.max(e.x,a),r=Math.min(e.y,r)}))}return"node"===t.BaseType&&(a=e.x+t.width/2,r=e.y-t.height/2),this.lf.graphModel.transformModel.CanvasPointToHtmlPoint([a,r])}console.warn("找不到元素".concat(e.id))}}),Object.defineProperty(e.prototype,"createContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.lf.options.isSilentMode;if(!t){var a=this.menuTypeMap.get(this._activeData.type)||[];a=a.concat(this.menuTypeMap.get(xn)),console.log(a);var r=document.createDocumentFragment();a.forEach((function(t){var a=document.createElement("div");a.className="lf-context-item";var o=document.createElement("img");o.src=t.icon,o.className="lf-context-img",t.className&&(a.className="".concat(a.className," ").concat(t.className)),o.addEventListener("click",(function(){if(console.log("sdfef"),e.hideContextMenu(),t.callback)t.callback(e._activeData);else{var a=e.lf.getNodeModelById(e._activeData.id);console.log(a),e.addNode({sourceId:e._activeData.id,x:e._activeData.x,y:e._activeData.y,width:e._activeData.width,properties:t.properties,type:t.type},void 0)}})),a.appendChild(o),r.appendChild(a)})),this.__menuDOM.innerHTML="",this.__menuDOM.appendChild(r),this.showMenu()}}}),Object.defineProperty(e.prototype,"addNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var a=void 0!==t;void 0===t&&(t=e.y);var r=this.lf.getNodeModelById(e.sourceId),o=e.x+wn,l=t-e.y/2-20,i=e.x+100+wn,n=t+e.y/2+20,s=this.lf.getAreaElement([o,l],[i,n]);if(s.length)return t+=Fn,void this.addNode(e,t);console.log(e);var c,u,d=this.lf.addNode({type:e.type,x:e.x+wn+r.width/2,y:t,properties:e.properties});a&&(c={x:e.x,y:e.y+r.height/2},u={x:d.x-d.width/2,y:d.y}),this.lf.addEdge({sourceNodeId:e.sourceId,targetNodeId:d.id,startPoint:c,endPoint:u})}}),Object.defineProperty(e.prototype,"showMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getContextMenuPosition(),t=e[0],a=e[1];this.__menuDOM.style.display="flex",this.__menuDOM.style.top="".concat(a,"px"),this.__menuDOM.style.left="".concat(t+10,"px"),this.container.appendChild(this.__menuDOM),!this.isShow&&this.lf.on("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!0}}),e}();Bn.pluginName="contextPad";var Dn=Bn,An=function(e){var t={type:"h-bpmn:userTask",label:"用户任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAp1JREFUWEftlj9oE2EYxp/3IkSckotOpqDgl5ZWcLBgxcVBdBL8gw66iCg2lxrBzcl0qpPS1lyQKm5uiuBUHBztoAjVVtOLRDA46Z06VAvmXkkwQWLS3PudQwn54KY8z/v8eO7uvRA2+KENzoc+YNg71PsNxm6VYxStnibwIQCnAF4kptcMv+RWjSlk1VqYFkM1mLCLx5jpJoh2doD4zoQpL61u6EJqA5oF5zwY9wIFE3JuWk0G0raItAATd8r7uPprQRRoYMQdV8siD6C3ZkzbeQ5gTBLGwGPPUsclnppW3GCs8HaHwZvK0iAAq5sj37Z9ujS6KvGKARP5lXNMdF8S0tT6fNidSD2VeMWAcfv9OMEvSEKaWo2XRQwYm3UOGhE80wEk5pNfMqlHEq8YMFEobmc2KpKQhpZR3eNZQ4sSrxiwNty0Sw8BPiEJAujDlp/R4crVgR8Snxagzm1m8FnPSj2QwGmtmUaAaTtzAC4ECWTCNd3PnVaDDahEoZRl5ul1ITVWy9/zQgHWBsULpQPw+QwIw2CM1IcTlsBYZgN3v6bVqyAtd9KEBgwTHsTb+4DmnJPEGgZgIAlCst4KowIfFUTx0b2otHZmo11xg+ZtZz8iGAPjCFC/gpx5EOZRxYI7oWr/hAKfQIBb7XeDDOMKMx1tthQ4okXIqBDxE4I//dkaKnYb0xXQzBdzoEgW4Hi3YbLfyQNXZ9zMYG4937qApu28Af6sDlm6RL3kWmq3eM3EbecFAXslSbpaBl56lhpt52/bYNxemSHQZd1AHR+DZz0rlW31tgfMOw4RdukE6XqYUfIySgUCNG2HdYPC+FxL/VNY2wb7gB1q7qEG68vZuB7meRJ72Z9st7S7fknEQf/Z0AcMW2i/wbAN/gbA1dYpL5kz5gAAAABJRU5ErkJggg=="},a={type:"h-bpmn:serviceTask",label:"系统任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAz9JREFUWEfVmEtoE1EUhv8zqaBgwUwi+K5CJqkoumhBxY11IVTBhaBUUNCFtplQRRSrK+vKVrTgYyZUF7qRigV3dqFg3YhdtAsLapIJKK2vRToRqgtpM0cmtTVJE3IzyWKcXTL/+c83c+/cc+4luPwil/OhKsCVWjJgEVqZM75iD8rk+co08/xHePMnpy/CMaANlyE2RBJbNLvJKaRjQF/UuMaMSyKAROiZCiuXRbSFGseAsp4cALhNLCk9NtXAUTFtvqoKQOMNgJ2CSUdMVdklqM2TlQRc1ze57NfS38eJM2uY+GlabRzPjZR14xuAVYJJv5uqsjpX69Vj24jpECRpAoQRs0N5X8yrKKCsJdeDeBDAjvkgBl5JzHdm6+itlEEfAQcF4eZkRENShs4xZbZaRJ0E7MmJfwemVjMSmBSag7KWvAXiMxUBVCtmum1GAmfLAvq1ZItF/LLafE7iJaa9qUhgODd20RDL0eQzMO93kqDqGKIhMxw4UBJQ1uKnQNK9yhPxFwYZEjhmEc0SEAIoBOYNFXuxddqMhO7Pxy28wfr+uH9JRnoNIFiJKTGfnIoEHxaL8WqJi0TUW4kfgMSMx9o93R5KZb+t+WBZNw4DeFKJmUgJ8+vJJgs8WokvE46lw8qjfEAt3g2SrogaSaDmlBoYE9GviH7YKHHdRxFtVsPWVTMS6s4DtH94dWOUgKZyRszclY4Er5fT5d73aYkTTPSgfAyPm2pw+6I5aP/h743VW8ulfhCVrptEE2Y40FA+0WKFrCc+A7S2ZCzzgPTTak91NU4XBVyYj1r8PEi6UdSI8MIMK/ucAHp1Y7iggvyzYeuCGQndLPQtWYtLmTHhbjqsdDoB9OmJKIM6CmPtMppWlZZinv8noOzWIXb9R+LqZUZ2+0Lt+lLn+mbBXoNc3W4tVBE3N6zZeuz2ln9uqF28afoLWHLbyR6Kwco2tlsqqcfMSHqI2pithqq3nXZigY27abeQgpBpU1XkXG1VG3eRpKJVJ9sgA2NpVWkW8RVut8qZybphD7O9jxG5Bk1VOSIirBmgTzd6GOgSSUpA75SqCB3V1QzQ9QeY9pO6+ghYZGhroXF8gFmL5CIefwB0scE4DheJlAAAAABJRU5ErkJggg==",cls:"import_icon"},r={type:"h-bpmn:exclusiveGateway",label:"条件判断",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="},o={type:"h-bpmn:timerIntermediateEvent",label:"时间时间",icon:"data:image/png;base64,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"},l={type:"h-bpmn:endEvent",label:"结束",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"},i={icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAUpJREFUWEftVzuywjAMlKgDPV2g4RYPuAnfDs7w4AzQ8b0Jn1vQQDp6SI0YFwFPSMC2EiYZnDLZldYrybERGI/XLs4Aofc2BMHcXV37pmnQlOh1SwMgmijxEYfu4jJVwoZARgKPXeevQLjTSXhDqlcX/l6HI7APgaeOM0LCulIAhDIA1JSwT9ABCM4qHELaVZb+6FUg4L9KgLQxBDTOqUDVEqdsYWSJU85pHN5oio2zGRDzK/DUchpYwI3BorUpdKNmZe1vo4ixDlqBkl2JOCiCaNfuDUFun0QEustrogPldYoU6P9dgWKQ5CoGkxj3XsZ+xcG4JOEdIKo9rEBRLuugfKIOb1mcPuJwwzqUf3U6jW4FCps5LnC4tsRc962D1sGgBziTyOHaHsxUD2b+wMq5RH3lwJopgZm/dnLc+sRN5Nr5KQnne64F3gEyDFZHJCakvQAAAABJRU5ErkJggg==",callback:function(t){e.deleteElement(t.id),e.extension.contextPad.hideContextMenu()}};e.extension.contextPad.setContextMenuItems([i]),e.extension.contextPad.setContextMenuByType("h-bpmn:startEvent",[t,a,r,o]),e.extension.contextPad.setContextMenuByType("h-bpmn:timerIntermediateEvent",[t,a,r,o]),e.extension.contextPad.setContextMenuByType("h-bpmn:userTask",[t,a,r,l,o]),e.extension.contextPad.setContextMenuByType("h-bpmn:serviceTask",[t,o,a,r,l]),e.extension.contextPad.setContextMenuByType("h-bpmn:exclusiveGateway",[t,a,o])},Ln=An;function En(){var e=(0,r.ref)(void 0),t=(0,r.ref)(null),a=(0,u.yj)(),o=a.query.id;return(0,r.onMounted)((function(){e.value=new(ki())({container:document.querySelector("#logic-flow"),grid:!0,background:{backgroundColor:"rgb(248, 248, 248)"},keyboard:{enabled:!0},overlapMode:1,isSilentMode:"logicFlowDetail"===a.name,plugins:[Vi.Ou,Dn,Vi.aC,Vi.v2,Vi.ip,Vi.Ju,Cn],style:{rect:{radius:5,stroke:"#187DFF"},circle:{r:18,stroke:"#187DFF"},polygon:{stroke:"#187DFF"},polyline:{stroke:"#187DFF",hoverStroke:"#187DFF",selectedStroke:"#187DFF"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}}}),Ln(e.value),e.value.extension.selectionSelect.setSelectionSense(!1,!1),e.value.on("node:click",(function(e){console.log(e),t.value=e})),e.value.on("blank:click",(function(e){console.log(e),t.value=null}));var r=JSON.parse(localStorage.getItem("logicData")||JSON.stringify(Sn));r[o]?(e.value.render(r[o]),localStorage.setItem("logicData",JSON.stringify(r))):e.value.render()})),{lf:e,activeCell:t}}var Tn=function(e){return(0,r.pushScopeId)("data-v-12adbf9c"),e=e(),(0,r.popScopeId)(),e},Pn={class:"flow-basic__attr"},In=Tn((function(){return(0,r.createElementVNode)("h4",null,"全局属性",-1)})),qn=Tn((function(){return(0,r.createElementVNode)("span",{class:"text-gray-500"},"-",-1)})),On=(0,r.defineComponent)({__name:"logicFlowBasicAttr",setup:function(e){var t=(0,r.ref)("default"),a=(0,r.ref)(),o=(0,r.reactive)({name:"",tag:"",atag:"",group:"",date2:"",date1:"",type:[],resource:"",desc:""}),l=(0,r.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],region:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]});return function(e,i){var n=(0,r.resolveComponent)("el-input"),s=(0,r.resolveComponent)("el-form-item"),c=(0,r.resolveComponent)("el-option"),u=(0,r.resolveComponent)("el-select"),d=(0,r.resolveComponent)("el-date-picker"),p=(0,r.resolveComponent)("el-col"),m=(0,r.resolveComponent)("el-time-picker"),h=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Pn,[In,(0,r.createVNode)(h,{ref_key:"ruleFormRef",ref:a,model:o,rules:l,"label-width":"120px",class:"demo-ruleForm",size:t.value,"label-position":"top","status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{label:"场景名称",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(n,{modelValue:o.name,"onUpdate:modelValue":i[0]||(i[0]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"场景分类标签",prop:"tag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{modelValue:o.tag,"onUpdate:modelValue":i[1]||(i[1]=function(e){return o.tag=e}),placeholder:"请选择场景分类标签"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"低碳节能",value:"weiyu"}),(0,r.createVNode)(c,{label:"安心居家",value:"chufang"}),(0,r.createVNode)(c,{label:"灯光氛围",value:"anfang"}),(0,r.createVNode)(c,{label:"健康睡眠",value:"dengguang"}),(0,r.createTextVNode)("a "),(0,r.createVNode)(c,{label:"家庭空气",value:"kongqi"}),(0,r.createVNode)(c,{label:"居家环境",value:"tongyong"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"场景标签",prop:"atag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{modelValue:o.atag,"onUpdate:modelValue":i[2]||(i[2]=function(e){return o.atag=e}),placeholder:"请选择场景标签"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"卫浴",value:"weiyu"}),(0,r.createVNode)(c,{label:"厨房",value:"chufang"}),(0,r.createVNode)(c,{label:"安防",value:"anfang"}),(0,r.createVNode)(c,{label:"灯光",value:"dengguang"}),(0,r.createVNode)(c,{label:"空气",value:"kongqi"}),(0,r.createVNode)(c,{label:"通用",value:"tongyong"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"场景描述",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(n,{modelValue:o.name,"onUpdate:modelValue":i[3]||(i[3]=function(e){return o.name=e}),type:"textarea"},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"关联分组",prop:"group"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{modelValue:o.group,"onUpdate:modelValue":i[4]||(i[4]=function(e){return o.group=e}),placeholder:"请选择分组"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"分组1",value:"weiyu"}),(0,r.createVNode)(c,{label:"分组2",value:"chufang"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(s,{label:"生效时间",prop:"group"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{span:11},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:o.date1,"onUpdate:modelValue":i[5]||(i[5]=function(e){return o.date1=e}),type:"date",placeholder:"Pick a date",style:{width:"100%"}},null,8,["modelValue"])]})),_:1}),(0,r.createVNode)(p,{span:2,class:"text-center"},{default:(0,r.withCtx)((function(){return[qn]})),_:1}),(0,r.createVNode)(p,{span:11},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(m,{modelValue:o.date2,"onUpdate:modelValue":i[6]||(i[6]=function(e){return o.date2=e}),placeholder:"Pick a time",style:{width:"100%"}},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["model","rules","size"])])}}});const Mn=(0,l.Z)(On,[["__scopeId","data-v-12adbf9c"]]);var _n=Mn,Jn=function(e){return(0,r.pushScopeId)("data-v-887bc7ae"),e=e(),(0,r.popScopeId)(),e},Rn={class:"flow-basic__attr"},Un=Jn((function(){return(0,r.createElementVNode)("h4",null,"设备属性",-1)})),jn=(0,r.defineComponent)({__name:"logicFlowBasicEquipmentAttr",setup:function(e){var t=(0,r.ref)("default"),a=(0,r.ref)(),o=(0,r.reactive)({name:"",tag:"",atag:"",group:"",date2:"",date1:"",type:[],resource:"",desc:""}),l=(0,r.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],region:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]});return function(e,i){var n=(0,r.resolveComponent)("el-radio"),s=(0,r.resolveComponent)("el-radio-group"),c=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-option"),d=(0,r.resolveComponent)("el-select"),p=(0,r.resolveComponent)("el-input"),m=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Rn,[Un,(0,r.createVNode)(m,{ref_key:"ruleFormRef",ref:a,model:o,rules:l,"label-width":"120px",class:"demo-ruleForm",size:t.value,"label-position":"top","status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"类型"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:o.type,"onUpdate:modelValue":i[0]||(i[0]=function(e){return o.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(n,{label:3},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("消息上报")]})),_:1}),(0,r.createVNode)(n,{label:6},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("消息下发")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"设备产品类型",prop:"tag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:o.tag,"onUpdate:modelValue":i[1]||(i[1]=function(e){return o.tag=e}),placeholder:"请选择设备产品类型"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"穿衣镜",value:"weiyu"}),(0,r.createVNode)(u,{label:"电熨斗",value:"chufang"}),(0,r.createVNode)(u,{label:"床头灯",value:"anfang"}),(0,r.createVNode)(u,{label:"智能温控器",value:"dengguang"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"设备命令",prop:"atag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:o.atag,"onUpdate:modelValue":i[2]||(i[2]=function(e){return o.atag=e}),placeholder:"请选择设备命令"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"目标温度",value:"weiyu"}),(0,r.createVNode)(u,{label:"目标湿度",value:"chufang"})]})),_:1},8,["modelValue"])]})),_:1}),(0,r.createVNode)(c,{label:"命令参数",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":i[3]||(i[3]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules","size"])])}}});const Hn=(0,l.Z)(jn,[["__scopeId","data-v-887bc7ae"]]);var Zn=Hn,Qn=function(e){return(0,r.pushScopeId)("data-v-40abc83b"),e=e(),(0,r.popScopeId)(),e},Gn={class:"flow-basic__attr"},zn=Qn((function(){return(0,r.createElementVNode)("h4",null,"服务属性",-1)})),Wn=(0,r.defineComponent)({__name:"logicFlowBasicServiceAttr",setup:function(e){var t=(0,r.ref)("default"),a=(0,r.ref)(),o=(0,r.reactive)({name:"",tag:"",atag:"",group:"",date2:"",date1:"",type:3,resource:"",desc:""}),l=(0,r.reactive)({name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],region:[{required:!0,message:"Please select Activity zone",trigger:"change"}],count:[{required:!0,message:"Please select Activity count",trigger:"change"}],date1:[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}],date2:[{type:"date",required:!0,message:"Please pick a time",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}]});return function(e,i){var n=(0,r.resolveComponent)("el-radio"),s=(0,r.resolveComponent)("el-radio-group"),c=(0,r.resolveComponent)("el-form-item"),u=(0,r.resolveComponent)("el-option"),d=(0,r.resolveComponent)("el-select"),p=(0,r.resolveComponent)("el-input"),m=(0,r.resolveComponent)("el-form");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Gn,[zn,(0,r.createVNode)(m,{ref_key:"ruleFormRef",ref:a,model:o,rules:l,"label-width":"120px",class:"demo-ruleForm",size:t.value,"label-position":"top","status-icon":""},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{label:"类型"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:o.type,"onUpdate:modelValue":i[0]||(i[0]=function(e){return o.type=e})},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(n,{label:3},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("常规")]})),_:1}),(0,r.createVNode)(n,{label:6},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("自定义服务")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),3===o.type?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,label:"服务类型",prop:"tag"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:o.tag,"onUpdate:modelValue":i[1]||(i[1]=function(e){return o.tag=e}),placeholder:"请选择设备产品类型"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,{label:"室外温度",value:"weiyu"}),(0,r.createVNode)(u,{label:"室外湿度",value:"chufang"})]})),_:1},8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0),3===o.type?((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,label:"命令参数",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":i[2]||(i[2]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0),6===o.type?((0,r.openBlock)(),(0,r.createBlock)(c,{key:2,label:"接入Api",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":i[3]||(i[3]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0),6===o.type?((0,r.openBlock)(),(0,r.createBlock)(c,{key:3,label:"输入参数",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":i[4]||(i[4]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0),6===o.type?((0,r.openBlock)(),(0,r.createBlock)(c,{key:4,label:"输出参数",prop:"name"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{modelValue:o.name,"onUpdate:modelValue":i[5]||(i[5]=function(e){return o.name=e})},null,8,["modelValue"])]})),_:1})):(0,r.createCommentVNode)("",!0)]})),_:1},8,["model","rules","size"])])}}});const Kn=(0,l.Z)(Wn,[["__scopeId","data-v-40abc83b"]]);var Yn=Kn,Xn={key:0,class:"flow-attr__block"},$n=(0,r.defineComponent)({__name:"logicFlowAttr",props:{activeCell:null},setup:function(e){var t=e,a={basic:_n,"h-bpmn:equipmentTask":Zn,"h-bpmn:serviceTask":Yn},o=(0,r.computed)((function(){var e=null===t.activeCell?"basic":t.activeCell.data.type;return a[e]||null}));return function(e,t){return(0,r.unref)(o)?((0,r.openBlock)(),(0,r.createElementBlock)("div",Xn,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)((0,r.unref)(o))))])):(0,r.createCommentVNode)("",!0)}}});const es=(0,l.Z)($n,[["__scopeId","data-v-70f86f4e"]]);var ts=es,as={class:"logic-flow__tools"},rs=(0,r.defineComponent)({__name:"index",props:{lf:null},setup:function(e){var t=e,a=(0,u.yj)(),o=(0,r.toRefs)(t).lf,l=a.query.id,i=function(){var e=o.value.getGraphData(),t=JSON.parse(localStorage.getItem("logicData")||"{}");t[l]=e,localStorage.setItem("logicData",JSON.stringify(t)),(0,Oo.z8)({message:"保存成功",type:"success"})},n=function(e){switch(e.key){case"ZoomIn":o.value.zoom(!0);break;case"ZoomOut":o.value.zoom(!1);break;case"Undo":o.value.undo();break;case"Redo":o.value.redo();break;case"Reset":o.value.clearData();break;case"Save":i();break;default:break}},s=[{id:"1",children:[{key:"ZoomIn",name:"放大"},{key:"ZoomOut",name:"缩小"}]},{id:"2",children:[{key:"Undo",icon:"RefreshLeft",name:"返回上一步"},{key:"Redo",icon:"RefreshRight",name:"恢复下一步"},{key:"Reset",icon:"Refresh",name:"重置"},{key:"Save",icon:"Download",name:"保存"}]}];return function(e,t){var a=(0,r.resolveComponent)("el-icon"),o=(0,r.resolveComponent)("el-button"),l=(0,r.resolveComponent)("el-button-group");return(0,r.openBlock)(),(0,r.createElementBlock)("div",as,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s,(function(e){return(0,r.createVNode)(l,{key:e.id},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.children,(function(e){return(0,r.openBlock)(),(0,r.createBlock)(o,{key:e.key,title:e.name,onClick:function(t){return n(e)}},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(a,null,{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon||e.key)))]})),_:2},1024)]})),_:2},1032,["title","onClick"])})),128))]})),_:2},1024)})),64))])}}});const os=(0,l.Z)(rs,[["__scopeId","data-v-5e418635"]]);var ls=os,is={class:"home"},ns={class:"logic-block"},ss={id:"logic-flow",ref:"flow"},cs=(0,r.defineComponent)({__name:"logicFlowBasic",setup:function(e){var t=(0,u.yj)(),a=En(),o=a.lf,l=a.activeCell;return function(e,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",is,["logicFlowDetail"!==(0,r.unref)(t).name?((0,r.openBlock)(),(0,r.createBlock)(yi,{key:0,lf:(0,r.unref)(o)},null,8,["lf"])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",ns,[(0,r.createVNode)(ls,{lf:(0,r.unref)(o)},null,8,["lf"]),(0,r.createElementVNode)("div",ss,null,512)]),(0,r.createVNode)(ts,{activeCell:(0,r.unref)(l)},null,8,["activeCell"])])}}});const us=(0,l.Z)(cs,[["__scopeId","data-v-9808a76c"]]);var ds=us,ps=[{path:"/logic-flow-list",name:"logic-flow-list",component:mi},{path:"/create-logic-flow",name:"createLogicFlow",component:ds,meta:{hideMenu:!0}},{path:"/logic-flow-detail",name:"logicFlowDetail",component:ds,meta:{hideMenu:!0}}],ms=(0,c.ev)((0,c.ev)([{path:"/scene",name:"scene",component:Go},{path:"/",name:"home",component:k,children:(0,c.ev)((0,c.ev)([],Xl,!0),ii,!0)}],ps,!0),[{path:"/config",name:"config",component:T}],!1),hs=(0,u.p7)({history:(0,u.r5)(),routes:ms}),vs=hs,gs=a(3907),fs=(0,gs.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),ys=a(5260),bs=(a(4415),a(544)),ks=(0,r.createApp)(s);ks.use(ys.Z,{locale:bs.Z}).use(fs).use(vs).mount("#app");for(var Vs=0,Cs=Object.entries(d);Vs<Cs.length;Vs++){var Ns=Cs[Vs],Ss=Ns[0],xs=Ns[1];ks.component(Ss,xs)}}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=e,function(){var e=[];a.O=function(t,r,o,l){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],l=e[u][2];for(var n=!0,s=0;s<r.length;s++)(!1&l||i>=l)&&Object.keys(a.O).every((function(e){return a.O[e](r[s])}))?r.splice(s--,1):(n=!1,l<i&&(i=l));if(n){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,l,i=r[0],n=r[1],s=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(s)var u=s(a)}for(t&&t(r);c<i.length;c++)l=i[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},r=self["webpackChunkscenes"]=self["webpackChunkscenes"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(1324)}));r=a.O(r)})();
//# sourceMappingURL=app.db178b1f.js.map